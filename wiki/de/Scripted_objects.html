<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Scripted objects/de</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="id" title="Scripted objects (1% translated)">Bahasa Indonesia</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="de">Deutsch</span></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="Scripted_objects.html" lang="en" title="Scripted objects (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="tr" title="Scripted objects (1% translated)">Türkçe</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="es" title="Scripted objects (5% translated)">español</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="Scripted_objects.html" lang="fr" title="Objets créés par script (100% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="Scripted_objects.html" lang="it" title="Oggetti creati da script (100% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="Scripted_objects.html" lang="pl" title="Obiekty tworzone skryptami (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="pt" title="Scripted objects (1% translated)">português</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="pt-BR" title="Objetos com Script (3% translated)">português do Brasil</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="ro" title="Obiecte create prin script-programare (8% translated)">română</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="fi" title="Scripted objects (1% translated)">suomi</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="sv" title="Scripted objects (5% translated)">svenska</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="cs" title="Skriptované objekty (5% translated)">čeština</a></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="Scripted_objects.html" lang="ru" title="Программируемые объекты (44% translated)">русский</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Scripted_objects.html" lang="zh-Hans-CN" title="脚本化物体 (4% translated)">中文（中国大陆）</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="Topological_data_scripting.html" title="Topological data scripting/de">Topologische Daten skripten</a></div>
<div style="margin: 4px 0; float: right;"><a href="Scenegraph.html" title="Scenegraph/de">Szenengraph</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="Online_Help_Toc.html" title="Online Help Toc/de">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Online_Help_Toc.svg" width="24"/></span></span></div>
</div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Einführung"><span class="tocnumber">1</span> <span class="toctext">Einführung</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Grundlegendes_Beispiel"><span class="tocnumber">2</span> <span class="toctext">Grundlegendes Beispiel</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Beachtenswertes"><span class="tocnumber">2.1</span> <span class="toctext">Beachtenswertes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Andere_komplexere_Beispiele"><span class="tocnumber">3</span> <span class="toctext">Andere komplexere Beispiele</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Objekte_auswählbar_machen"><span class="tocnumber">4</span> <span class="toctext">Objekte auswählbar machen</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Arbeiten_mit_einfachen_Shapes"><span class="tocnumber">5</span> <span class="toctext">Arbeiten mit einfachen Shapes</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Struktur_des_Szenegraph"><span class="tocnumber">6</span> <span class="toctext">Struktur des Szenegraph</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#In_Part_Design_erzeugte_Objekte"><span class="tocnumber">7</span> <span class="toctext">In Part Design erzeugte Objekte</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Vorhandene_Objekt_Typen"><span class="tocnumber">8</span> <span class="toctext">Vorhandene Objekt Typen</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Vorhandene_Methoden"><span class="tocnumber">9</span> <span class="toctext">Vorhandene Methoden</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Vorhandene_Eigenschaften"><span class="tocnumber">10</span> <span class="toctext">Vorhandene Eigenschaften</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Property_attributes"><span class="tocnumber">10.1</span> <span class="toctext">Property attributes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Vorhandene_Erweiterungen"><span class="tocnumber">11</span> <span class="toctext">Vorhandene Erweiterungen</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Weitere_Informationen"><span class="tocnumber">12</span> <span class="toctext">Weitere Informationen</span></a></li>
</ul>
</div>
</div>
<p><span id="Introduction"></span>
</p>
<h2><span id="Einf.C3.BChrung"></span><span class="mw-headline" id="Einführung">Einführung</span></h2>
<p>Neben den Standard-Objekttypen wie Beschriftungen, Netze und Bauteilobjekte bietet FreeCAD auch die erstaunliche Möglichkeit, 100% mit Python geschriebene parametrische Objekte zu erstellen, die als <a href="App_FeaturePython.html" title="App FeaturePython">Python-Objekt</a> (App FeaturePython-Objekt) bezeichnet werden. Diese Objekte verhalten sich genau wie jedes andere FreeCAD-Objekt und werden beim Speichern/Laden von Dateien automatisch gespeichert und wiederhergestellt.
</p><p>Eine Besonderheit muss beachtet werden: Aus Sicherheitsgründen enthalten FreeCAD Dateien niemals eingebetteten Code. Der Python Code, den du zum Erstellen von parametrischen Objekten schreibst, wird niemals innerhalb einer Datei gespeichert. Das bedeutet, dass, wenn du eine Datei, die ein solches Objekt enthält, auf einem anderen Rechner öffnest, wenn dieser Python Code auf diesem Rechner nicht verfügbar ist, das Objekt nicht vollständig neu erstellt wird. Wenn du solche Objekte an andere weitergibst, musst du auch dein Python Skript weitergeben, z. B. als <a href="Macros.html" title="Macros/de">Makro</a>.
</p><p><b>Hinweis</b>: Es ist möglich, Python Code in eine FreeCAD Datei zu packen, indem man json mit einem App::PropertyPythonObject serialisiert, aber dieser Code kann nie direkt ausgeführt werden und hat daher für unseren Zweck hier wenig Nutzen.
</p><p><a href="App_FeaturePython.html" title="App FeaturePython/de">Python-Objekte</a> folgen der gleichen Regel wie alle FreeCAD Funktionen: Sie sind in App- und einen GUI-Teile getrennt. Der App-Teil, das Dokument-Objekt, definiert die Geometrie unseres Objekts, während sein GUI-Teil, das View-Provider-Objekt, definiert, wie das Objekt auf dem Bildschirm daegestellt wird. Das Ansichtsprovider-Objekt ist, wie jede andere FreeCAD-Funktion, nur verfügbar, wenn FreeCAD in seiner eigenen GUI ausgeführt wird. Es stehen mehrere Eigenschaften und Methoden zur Verfügung, um ein Objekt zu erstellen. Die Eigenschaften müssen zu einem der vordefinierten Eigenschaftstypen gehören, die FreeCAD anbietet und werden im Eigenschaften Ansichtsfenster angezeigt, damit sie vom Benutzer bearbeitet werden können. Auf diese Weise sind FeaturePython-Objekte wirklich und vollständig parametrisch. Du kannst Eigenschaften für das Objekt und sein Ansichtsobjekt getrennt definieren.
</p><p><span id="Basic_example"></span>
</p>
<h2><span class="mw-headline" id="Grundlegendes_Beispiel">Grundlegendes Beispiel</span></h2>
<p>Das folgende Beispiel ist zusammen mit einigen anderen Beispielen in der Datei <a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">src/Mod/TemplatePyMod/FeaturePython.py</a> zu finden:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="sd">'''Examples for a feature class and its view provider.'''</span>

<span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Add some custom properties to our box feature'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Width"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Width of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Height"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Height of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Do something when a property has changed'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''Do something when doing a recomputation, this method is mandatory'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Recompute Python Box feature</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderBox</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Set this object to the proxy object of the actual view provider'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyColor"</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Color of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Color</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Setup the scene sub-graph of the view provider, this method is mandatory'''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoScale</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoBaseColor</span><span class="p">()</span>

        <span class="n">data</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoCube</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="p">,</span> <span class="s2">"Shaded"</span><span class="p">);</span>
        <span class="n">style</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
        <span class="n">style</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="p">,</span> <span class="s2">"Wireframe"</span><span class="p">);</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onChanged</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''If a property of the handled feature has changed we have the chance to handle this here'''</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Width"</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Height"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">scaleFactor</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">h</span><span class="p">))</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Return a list of display modes.'''</span>
        <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modes</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the name of the default display mode. It must be defined in getDisplayModes.'''</span>
        <span class="k">return</span> <span class="s2">"Shaded"</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">'''Map the display mode defined in attach with those defined in getDisplayModes.\</span>
<span class="sd">                Since they have the same names nothing needs to be done. This method is optional'''</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Here we can do something when a single property got changed'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Color"</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Color"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">rgb</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the icon in XPM format which will appear in the tree view. This method is\</span>
<span class="sd">                optional and if not defined a default icon is shown.'''</span>
        <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">            /* XPM */</span>
<span class="s2">            static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">            "16 16 6 1",</span>
<span class="s2">            "   c None",</span>
<span class="s2">            ".  c #141010",</span>
<span class="s2">            "+  c #615BD2",</span>
<span class="s2">            "@  c #C39D55",</span>
<span class="s2">            "#  c #000000",</span>
<span class="s2">            "$  c #57C355",</span>
<span class="s2">            "        ........",</span>
<span class="s2">            "   ......++..+..",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@  .++++++.",</span>
<span class="s2">            "  ..@@  .++..++.",</span>
<span class="s2">            "###@@@@ .++..++.",</span>
<span class="s2">            "##$.@@$#.++++++.",</span>
<span class="s2">            "#$#$.$$$........",</span>
<span class="s2">            "#$$#######      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            " #$#$$$$$#      ",</span>
<span class="s2">            "  ##$$$$$#      ",</span>
<span class="s2">            "   #######      "};</span>
<span class="s2">            """</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''When saving the document this object gets stored using Python's json module.\</span>
<span class="sd">                Since we have some un-serializable parts here -- the Coin stuff -- we must define this method\</span>
<span class="sd">                to return a tuple of all serializable objects or None.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="sd">'''When restoring the serialized object from document we have the chance to set some internals here.\</span>
<span class="sd">                Since no data were serialized nothing needs to be done here.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeBox</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">)</span>
    <span class="n">Box</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">ViewProviderBox</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>

<span class="n">makeBox</span><span class="p">()</span>
</pre></div>
<p><span id="Things_to_note"></span>
</p>
<h3><span class="mw-headline" id="Beachtenswertes">Beachtenswertes</span></h3>
<p>Wenn sich dein Objekt darauf verläßt, das es sobald es erzeugt wird neu berechnet wird, dann muss man das sofern es nicht automatisch gemacht wird in der Funktion <code>__init__</code> durchführen. In diesem Beispiel wird das nicht benötigt weil die <code>onChanged</code> Methode der Klasse <code>Box</code> den gleichen Effekt wie die Funktion <code>execute</code> hat, aber das untere Beispiel verläßt sich darauf, dass neu berechnet wird bevor irgend etwas in der 3D Ansicht angezeigt wird. In den Beispielen wird dies von Hand mit <code>ActiveDocument.recompute()</code> durchgeführt, aber in komplexeren Szenarios muss man entscheiden wo entweder das gesamte Dokument oder das FeaturePython Objekt neu berechnet wird.
</p><p>Dieses Beispiel erzeugt einige Fehlermeldungen im report view Fenster. Dies erfolgt weil die Methode <code>onChanged</code> der Klasse <code>Box</code> jedes mal aufgerufen wird, wenn eine property in der Methode <code>__init__</code> hinzugefügt wird. Wenn die Erste hinzugefügt wird gibt es die properties Width und Height noch nicht, deshalb schlägt der Versuch auf diese zuzugreifen fehl.
</p><p>Eine Erklärung zu <code>__getstate__</code> und <code>__setstate__</code>, die durch <code>dumps</code> und <code>loads</code> ersetzt wurden, befindet sich im Forumsbeitrag <a class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=44009&amp;start=10#p377892" rel="nofollow">obj.Proxy.Type is a dict, not a string</a>.
</p><p><code>obj.addProperty(...)</code> gibt <code>obj</code>, zurück, sodass der Wert der property in der gleichen Zeile gesetzt werden kann:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
<p>Was Gleichwertig ist zu:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
<p><span id="Other_more_complex_example"></span>
</p>
<h2><span class="mw-headline" id="Andere_komplexere_Beispiele">Andere komplexere Beispiele</span></h2>
<p>Dieses Beispiel verwendet das <a href="Part_Workbench.html" title="Part Workbench/de">Part-Modul</a>, um ein Oktaeder zu erstellen und dann seine Coin-Darstellung mit pivy.
</p><p>Das Erste ist das Documentobjekt selbst:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="kn">import</span> <span class="nn">pivy</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Octahedron</span><span class="p">:</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Add some custom properties to our box feature"</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Length"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Length of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Width"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Width of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Width</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Height"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span> <span class="s2">"Height of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"Part::PropertyPartShape"</span><span class="p">,</span><span class="s2">"Shape"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span> <span class="s2">"Shape of the octahedron"</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
     <span class="c1"># Define six vetices for the shape</span>
     <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v5</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
     <span class="n">v6</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

     <span class="c1"># Make the wires/faces</span>
     <span class="n">f1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f7</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f8</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">shell</span><span class="o">=</span><span class="n">Part</span><span class="o">.</span><span class="n">makeShell</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">,</span><span class="n">f3</span><span class="p">,</span><span class="n">f4</span><span class="p">,</span><span class="n">f5</span><span class="p">,</span><span class="n">f6</span><span class="p">,</span><span class="n">f7</span><span class="p">,</span><span class="n">f8</span><span class="p">])</span>
     <span class="n">solid</span><span class="o">=</span><span class="n">Part</span><span class="o">.</span><span class="n">makeSolid</span><span class="p">(</span><span class="n">shell</span><span class="p">)</span>
     <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">solid</span>

  <span class="c1"># helper mehod to create the faces</span>
  <span class="k">def</span> <span class="nf">make_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">):</span>
     <span class="n">wire</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makePolygon</span><span class="p">([</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v1</span><span class="p">])</span>
     <span class="n">face</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Face</span><span class="p">(</span><span class="n">wire</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">face</span>
</pre></div>
<p>Dann haben wir das View Provider Objekt, das für die Darstellung des Objekts in der 3D Szene verantwortlich ist:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">ViewProviderOctahedron</span><span class="p">:</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Set this object to the proxy object of the actual view provider"</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyColor"</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Color of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Color</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Setup the scene sub-graph of the view provider, this method is mandatory"</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoScale</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoBaseColor</span><span class="p">()</span>

     <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoCoordinate3</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoIndexedFaceSet</span><span class="p">()</span>

     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="p">,</span><span class="s2">"Shaded"</span><span class="p">);</span>
     <span class="n">style</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
     <span class="n">style</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="p">,</span><span class="s2">"Wireframe"</span><span class="p">);</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">onChanged</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
     <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
     <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
     <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Shape"</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Shape"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">setNum</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">Vertexes</span><span class="p">:</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="n">cnt</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>
           <span class="n">cnt</span><span class="o">=</span><span class="n">cnt</span><span class="o">+</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Return a list of display modes."</span>
     <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
     <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
     <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">modes</span>

  <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="s2">"Return the name of the default display mode. It must be defined in getDisplayModes."</span>
     <span class="k">return</span> <span class="s2">"Shaded"</span>

  <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
     <span class="k">return</span> <span class="n">mode</span>

  <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
     <span class="s2">"Here we can do something when a single property got changed"</span>
     <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
     <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Color"</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Color"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">rgb</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

  <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">        /* XPM */</span>
<span class="s2">        static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">        "16 16 6 1",</span>
<span class="s2">        "    c None",</span>
<span class="s2">        ".   c #141010",</span>
<span class="s2">        "+   c #615BD2",</span>
<span class="s2">        "@   c #C39D55",</span>
<span class="s2">        "#   c #000000",</span>
<span class="s2">        "$   c #57C355",</span>
<span class="s2">        "        ........",</span>
<span class="s2">        "   ......++..+..",</span>
<span class="s2">        "   .@@@@.++..++.",</span>
<span class="s2">        "   .@@@@.++..++.",</span>
<span class="s2">        "   .@@  .++++++.",</span>
<span class="s2">        "  ..@@  .++..++.",</span>
<span class="s2">        "###@@@@ .++..++.",</span>
<span class="s2">        "##$.@@$#.++++++.",</span>
<span class="s2">        "#$#$.$$$........",</span>
<span class="s2">        "#$$#######      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        " #$#$$$$$#      ",</span>
<span class="s2">        "  ##$$$$$#      ",</span>
<span class="s2">        "   #######      "};</span>
<span class="s2">        """</span>

  <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="kc">None</span>

  <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
     <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<p>Schließlich, sobald unser Objekt und sein Viewobjekt definiert sind, müssen wir sie nur noch aufrufen (Der Code der Octahedron Klasse und der Viewprovider Klasse könnte direkt in die FreeCAD Python Konsole kopiert werden):
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">)</span>
<span class="n">Octahedron</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">ViewProviderOctahedron</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
</pre></div>
<p><span id="Making_objects_selectable"></span>
</p>
<h2><span id="Objekte_ausw.C3.A4hlbar_machen"></span><span class="mw-headline" id="Objekte_auswählbar_machen">Objekte auswählbar machen</span></h2>
<p>Wenn du dein Objekt oder zumindest einen Teil davon durch Anklicken im Ansichtsfenster auswählbar machen möchtest, musst du seine Coin-Geometrie in einen SoFCSelection-Knoten aufnehmen. Wenn dein Objekt eine komplexe Darstellung hat, mit Widgets, Anmerkungen usw., möchtest du vielleicht nur einen Teil davon in eine SoFCSelection einschließen. Alles, was eine SoFCSelection ist, wird von FreeCAD ständig gescannt, um Auswahl/Vorwahl zu erkennen, daher ist es sinnvoll, es nicht mit unnötigem Scannen zu überlasten.
</p><p>Sobald jene Teile des Scenegraph die auswählbar sein sollen sich in den SoFCSelection Knoten befinden, müssen zwei Methoden bereit gestellt werden, um den Auswahlpfad zu bearbeiten. Der Auswahlpfad kann als ein String mit den Namen jedes Elementes im Pfad, oder als ein Array aus Szenegraph Objekten aufscheinen. Die beiden Methoden welche bereitgestellt werden müssen sind <code>getDetailPath</code> welche einen String Pfad in ein Array aus Szenegraph Objekten umwandelt, und <code>getElementPicked</code> welches ein im Szenegraph angeklicktes Element nimmt, und seinen Namen als String zurückgibt (Hinweis, nicht seinen Pfad als String).
</p><p>Hier ist das obige Molekülbeispiel, angepasst, um die Elemente des Moleküls auswählbar zu machen:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Molecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Add two point properties '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span> <span class="ow">or</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="sd">''' Print the name of the property that has changed '''</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">''' Print a short message when doing a recomputation, this method is mandatory '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderMolecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="n">sep1</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSeparator</span><span class="p">()</span>
        <span class="n">sel1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="c1"># sel1.policy.setValue(coin.SoSelection.SHIFT)</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">ref</span><span class="p">()</span>
        <span class="n">sep1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sel1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoTranslation</span><span class="p">()</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="p">)</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSphere</span><span class="p">())</span>
        <span class="n">sep2</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSeparator</span><span class="p">()</span>
        <span class="n">sel2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">ref</span><span class="p">()</span>
        <span class="n">sep2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sel2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoTranslation</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="p">)</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSphere</span><span class="p">())</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">RootNode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sep1</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">RootNode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sep2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateData</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel1</span> <span class="o">=</span> <span class="n">sel1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel2</span> <span class="o">=</span> <span class="n">sel2</span>

    <span class="k">def</span> <span class="nf">getDetailPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subname</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">append</span><span class="p">):</span>
        <span class="n">vobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span>
        <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">RootNode</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="p">)</span>

            <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">whichChild</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">sub</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">splitSubname</span><span class="p">(</span><span class="n">subname</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom1'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom2'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">getElementPicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">getPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom1'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom2'</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p1"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="o">.</span><span class="n">translation</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p2"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="o">.</span><span class="n">translation</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeMolecule</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Molecule"</span><span class="p">)</span>
    <span class="n">Molecule</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">ViewProviderMolecule</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p><span id="Working_with_simple_shapes"></span>
</p>
<h2><span class="mw-headline" id="Arbeiten_mit_einfachen_Shapes">Arbeiten mit einfachen Shapes</span></h2>
<p>Wenn ein parametrisches Objekt einfach nur eine Form ausgibt, muss man keine View-Provider-Objekt verwenden. Die Form wird mit FreeCADs Standard-Form-Darstellung angezeigt.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">FreeCADGui</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="kn">import</span> <span class="nn">Part</span>
<span class="k">class</span> <span class="nc">Line</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''"App two point properties" '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''"Print a short message when doing a recomputation, this method is mandatory" '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">)</span>
<span class="n">Line</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span><span class="o">=</span><span class="mi">0</span> <span class="c1"># just set it to something different from None (this assignment is needed to run an internal notification)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p>Gleicher Code unter Verwendung von <b>ViewProviderLine</b>
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">FreeCADGui</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="kn">import</span> <span class="nn">Part</span>

<span class="k">class</span> <span class="nc">Line</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
         <span class="sd">'''"App two point properties" '''</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''"Print a short message when doing a recomputation, this method is mandatory" '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderLine</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
      <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
      <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

   <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">''' Return the name of the default display mode. It must be defined in getDisplayModes. '''</span>
      <span class="k">return</span> <span class="s2">"Flat Lines"</span>

<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">)</span>
<span class="n">Line</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">ViewProviderLine</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
<span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p><span id="Scenegraph_Structure"></span>
</p>
<h2><span class="mw-headline" id="Struktur_des_Szenegraph">Struktur des Szenegraph</span></h2>
<p>Du hast vielleicht bemerkt, dass die obigen Beispiele deine Szenengraphen auf leicht unterschiedliche Weise aufbauen.  Einige verwenden <code>obj.addDisplayMode(node, "modename")</code>, während andere <code>obj.SwitchNode.getChild(x).addChild(y)</code> verwenden.
</p><p>Jedes Feature in einem FreeCAD Dokument basiert auf der folgenden Struktur des Szenegraph:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">RootNode</span>
 \<span class="o">-</span> <span class="n">SwitchNode</span>
     \<span class="o">-</span> <span class="n">Shaded</span>
      <span class="o">-</span> <span class="n">Wireframe</span>
      <span class="o">-</span> <span class="n">etc</span>
</pre></div>
<p>The <code>SwitchNode</code> displays only one of its children, depending on which display mode is selection in FreeCAD.
</p><p>Die Beispiele welche <code>addDisplayMode</code> verwenden bilden ihre Szenegraphen ausschließlich aus coin3d Szenegraph Elementen. Im Hintergrund fügt <code>addDisplayMode</code> ein neues Kind zum <code>SwitchNode</code>; der Name dieses Knotens stimmt mit dem durchgeführten display mode überein.
</p><p>Die Beispiele die <code>SwitchNode.getChild(x).addChild</code> verwenden bilden Teile ihrer Geometrie durch Verwenden von Funktionen des Workbench Part, wie etwa <code>fp.Shape = Part.makeLine(fp.p1,fp.p2)</code>. Dies erstellt verschiedene Ausgabemodi des Szenegraph unter dem <code>SwitchNode</code>; wenn wir später coin3d Elemente zum Szenegraph hinzufügen müssen wir sie zum vorhandenen Ausgabemodus des Szenegraphen eher durch Verwenden von <code>addChild</code> als durch Erzeugen eines neuen Kindes des <code>SwitchNode</code> hinzufügen.
</p><p>Bei Verwendung von <code>addDisplayMode()</code> zum Hinzufügen von Geometrie zum Szenegraph, sollte jeder Ausgabemodus seinen eigenen Knoten haben, der an <code>addDisplayMode()</code> übergeben wird; verwende nicht den Gleichen Knoten dafür. Wenn man das macht wird der Auswahlmechanismus verwirrt. Es ist in Ordnung, wenn jeder Knoten eines Ausgabemodus weiter unten die gleichen Geometrieknoten angefügt hat, nur die Wurzel jedes Ausgabemodus muss eindeutig sein.
</p><p>Hier das obige Molekül Beispiel, angepasst so dass im Szenegraph nur Coin3D Objekte an Stelle von Objekten des Workbench Part gezeichnet werden:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">Part</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Molecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Add two point properties '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">''' Print a short message when doing a recomputation, this method is mandatory '''</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ViewProviderMolecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span> <span class="o">=</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">material</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoMaterial</span><span class="p">()</span>
        <span class="n">material</span><span class="o">.</span><span class="n">diffuseColor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">emissiveColor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">drawStyle</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
        <span class="n">drawStyle</span><span class="o">.</span><span class="n">pointSize</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">drawStyle</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
        <span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">wireframe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">shaded</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoCoordinate3</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">drawStyle</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">material</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">drawStyle</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">material</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedPointSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p1</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">sel1</span> <span class="o">+=</span> <span class="n">p1</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel1</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedPointSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p2</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sel2</span> <span class="o">+=</span> <span class="n">p2</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel2</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel3</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel3</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedLineSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p3</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">sel3</span> <span class="o">+=</span> <span class="n">p3</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel3</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="n">wireframe</span><span class="p">,</span> <span class="s1">'Wireframe'</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="n">shaded</span><span class="p">,</span> <span class="s1">'Shaded'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sel1</span> <span class="o">=</span> <span class="n">sel1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel2</span> <span class="o">=</span> <span class="n">sel2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel3</span> <span class="o">=</span> <span class="n">sel3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateData</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDetailPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subname</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">append</span><span class="p">):</span>
        <span class="n">vobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span>
        <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">RootNode</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="p">)</span>

            <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">whichChild</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span><span class="p">(</span><span class="s2">"getDetailPath: mode </span><span class="si">{}</span><span class="s2"> is active</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">sub</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">splitSubname</span><span class="p">(</span><span class="n">subname</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom1'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom2'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Line'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel3</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">getElementPicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">getPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom1'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom2'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel3</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Line'</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p1"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p2"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'Wireframe'</span><span class="p">,</span> <span class="s1">'Shaded'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'Shaded'</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeMolecule</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span><span class="s2">"Molecule"</span><span class="p">)</span>
    <span class="n">Molecule</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">b</span><span class="o">=</span><span class="n">ViewProviderMolecule</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
    <span class="n">a</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>

<span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">makeMolecule</span><span class="p">()</span>
</pre></div>
<p><span id="Part_Design_scripted_objects"></span>
</p>
<h2><span class="mw-headline" id="In_Part_Design_erzeugte_Objekte">In Part Design erzeugte Objekte</span></h2>
<p>Wenn Skript basierte Objekte in Part Design erzeugt werden, dann ist die Vorgangsweise ähnlich wie bei den oben besprochenen Skript basierten Objekten, aber mit wenigen zusätzlichen Überlegungen. Wir müssen zwei Gebilde Eigenschaften behandeln, eine für das Gebilde das wir in der 3D Ansicht sehen, und eine andere für das  Gebilde dass von den Muster Werkzeugen, wie etwa polares Mustern verwendet wird. Die Objekt Gebilde müssen auch an an jedes vorhandene Material dass sich schon im Körper befindet (oder abgetrennt im Fall von Subtrahierten Features) angefügt werden.
</p><p>Skript basierte Festkörper Objekte in Part Design sollten eher auf PartDesign::FeaturePython, PartDesign::FeatureAdditivePython, oder PartDesign::FeatureSubtractivePython als auf Part::FeaturePython basieren. Nur Addierte and Subtrahierte Varianten können in Muster Werkzeugen verwendet werden, und auf Part::FeaturePython basierende nur dann wenn der User das Object in einen Part Design Körper einfügt und es ein BaseFeature wird, welches eher als Body denn als native Part Design Objekt behandelt wird. Hinweis: es wird erwartet, dass alle Objekte Solids sind. Ein nicht Solid Feature sollte auf Part::FeaturePython aufbauen, sonst versucht das nächste Feature im Modellbaum es mit einem Solid zu verbinden und scheitert.
</p><p>Hier ist ein einfaches Beispiel das eine Rohr Grundform erzeugt, ähnlich zur Rohr Grundform im Workbench Part, außer dass ein Part Design Solid Feature Objekt erzeugt wird. Wir verwenden zwei getrennte Dateien: pdtube.FCMacro und pdtube.py. Die .FCMacro Datei wird um das Objekt zu erzeugen vom User ausgeführt. Die .py Datei enthält die Definitionen der Klassen die vom .FCMacro importiert werden. Dies wird so gemacht, um die parametrische Natur des Objektes nach einem Neustart von FreeCAD und Öffnen des Dokumentes das eines unserer Rohre enthält zu unterstützen.
</p><p>Zuerst die Datei welche die Klassen definiert:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#classes should go in pdtube.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="k">class</span> <span class="nc">PDTube</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Radius1"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Radius1"</span><span class="p">)</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Radius2"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Radius2"</span><span class="p">)</span><span class="o">.</span><span class="n">Radius2</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Height"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Height of tube"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makeAttachable</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">makeAttachable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Version</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addExtension</span><span class="p">(</span><span class="s1">'Part::AttachExtensionPython'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addExtension</span><span class="p">(</span><span class="s1">'Part::AttachExtensionPython'</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">setEditorMode</span><span class="p">(</span><span class="s1">'Placement'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#non-readonly non-hidden</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fp</span><span class="p">):</span>
        <span class="n">outer_cylinder</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeCylinder</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="p">)</span>
        <span class="n">inner_cylinder</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeCylinder</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">==</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">:</span> <span class="c1">#just make cylinder</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">outer_cylinder</span>
        <span class="k">elif</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">&lt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">:</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">outer_cylinder</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">inner_cylinder</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#invert rather than error out</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">inner_cylinder</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">outer_cylinder</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">"positionBySupport"</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">makeAttachable</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">positionBySupport</span><span class="p">()</span>
        <span class="n">tube_shape</span><span class="o">.</span><span class="n">Placement</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">Placement</span>

        <span class="c1">#BaseFeature (shape property of type Part::PropertyPartShape) is provided for us</span>
        <span class="c1">#with the PartDesign::FeaturePython and related classes, but it might be empty</span>
        <span class="c1">#if our object is the first object in the tree.  it's a good idea to check</span>
        <span class="c1">#for its existence in case we want to make type Part::FeaturePython, which won't have it</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">"BaseFeature"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">"Subtractive"</span> <span class="ow">in</span> <span class="n">fp</span><span class="o">.</span><span class="n">TypeId</span><span class="p">:</span>
                <span class="n">full_shape</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">tube_shape</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">full_shape</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">fuse</span><span class="p">(</span><span class="n">tube_shape</span><span class="p">)</span>
            <span class="n">full_shape</span><span class="o">.</span><span class="n">transformShape</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span><span class="o">.</span><span class="n">toMatrix</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#borrowed from gears workbench</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">full_shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">tube_shape</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="s2">"AddSubShape"</span><span class="p">):</span> <span class="c1">#PartDesign::FeatureAdditivePython and</span>
                                      <span class="c1">#PartDesign::FeatureSubtractivePython have this</span>
                                      <span class="c1">#property but PartDesign::FeaturePython does not</span>
                                      <span class="c1">#It is the shape used for copying in pattern features</span>
                                      <span class="c1">#for example in making a polar pattern</span>
            <span class="n">tube_shape</span><span class="o">.</span><span class="n">transformShape</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span><span class="o">.</span><span class="n">toMatrix</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">AddSubShape</span> <span class="o">=</span> <span class="n">tube_shape</span>

<span class="k">class</span> <span class="nc">PDTubeVP</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Set this object to the proxy object of the actual view provider'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vobj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vobj</span> <span class="o">=</span> <span class="n">vobj</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''If a property of the handled feature has changed we have the chance to handle this here'''</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Return a list of display modes.'''</span>
        <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Flat Lines"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modes</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the name of the default display mode. It must be defined in getDisplayModes.'''</span>
        <span class="k">return</span> <span class="s2">"Flat Lines"</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">'''Map the display mode defined in attach with those defined in getDisplayModes.\</span>
<span class="sd">                Since they have the same names nothing needs to be done. This method is optional'''</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Here we can do something when a single property got changed'''</span>
        <span class="c1">#FreeCAD.Console.PrintMessage("Change property: " + str(prop) + "\n")</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the icon in XPM format which will appear in the tree view. This method is\</span>
<span class="sd">                optional and if not defined a default icon is shown.'''</span>
        <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">            /* XPM */</span>
<span class="s2">            static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">            "16 16 6 1",</span>
<span class="s2">            "   c None",</span>
<span class="s2">            ".  c #141010",</span>
<span class="s2">            "+  c #615BD2",</span>
<span class="s2">            "@  c #C39D55",</span>
<span class="s2">            "#  c #000000",</span>
<span class="s2">            "$  c #57C355",</span>
<span class="s2">            "        ........",</span>
<span class="s2">            "   ......++..+..",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@  .++++++.",</span>
<span class="s2">            "  ..@@  .++..++.",</span>
<span class="s2">            "###@@@@ .++..++.",</span>
<span class="s2">            "##$.@@$#.++++++.",</span>
<span class="s2">            "#$#$.$$$........",</span>
<span class="s2">            "#$$#######      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            " #$#$$$$$#      ",</span>
<span class="s2">            "  ##$$$$$#      ",</span>
<span class="s2">            "   #######      "};</span>
<span class="s2">            """</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''When saving the document this object gets stored using Python's json module.\</span>
<span class="sd">                Since we have some un-serializable parts here -- the Coin stuff -- we must define this method\</span>
<span class="sd">                to return a tuple of all serializable objects or None.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="sd">'''When restoring the serialized object from document we have the chance to set some internals here.\</span>
<span class="sd">                Since no data were serialized nothing needs to be done here.'''</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<p>Und jetzt die Macro Datei um das Objekt zu erzeugen:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1">#pdtube.FCMacro</span>
<span class="kn">import</span> <span class="nn">pdtube</span>
<span class="c1">#above line needed if the class definitions above are place in another file: PDTube.py</span>
<span class="c1">#this is needed if the tube object is to remain parametric after restarting FreeCAD and loading</span>
<span class="c1">#a document containing the object</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">ActiveView</span><span class="o">.</span><span class="n">getActiveObject</span><span class="p">(</span><span class="s2">"pdbody"</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintError</span><span class="p">(</span><span class="s2">"No active body.</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">PySide</span> <span class="kn">import</span> <span class="n">QtGui</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">getMainWindow</span><span class="p">()</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Additive"</span><span class="p">,</span><span class="s2">"Subtractive"</span><span class="p">,</span><span class="s2">"Neither additive nor subtractive"</span><span class="p">]</span>
    <span class="n">item</span><span class="p">,</span><span class="n">ok</span> <span class="o">=</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="s2">"Select tube type"</span><span class="p">,</span><span class="s2">"Select whether you want additive, subtractive, or neither:"</span><span class="p">,</span><span class="n">items</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeatureAdditivePython"</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeatureSubtractivePython"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeaturePython"</span> <span class="c1">#not usable in pattern features, such as polar pattern</span>

        <span class="n">tube</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">)</span>
        <span class="n">pdtube</span><span class="o">.</span><span class="n">PDTube</span><span class="p">(</span><span class="n">tube</span><span class="p">)</span>
        <span class="n">pdtube</span><span class="o">.</span><span class="n">PDTubeVP</span><span class="p">(</span><span class="n">tube</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="n">tube</span><span class="p">)</span> <span class="c1">#optionally we can also use body.insertObject() for placing at particular place in tree</span>
</pre></div>
<p><span id="Available_object_types"></span>
</p>
<h2><span class="mw-headline" id="Vorhandene_Objekt_Typen">Vorhandene Objekt Typen</span></h2>
<p>Die Objekt Typen die mit <code>FreeCAD.ActiveDocument.addObject()</code> erzeugt werden können hängen von den geladenen Modulen ab. Nach dem Laden aller inneren Workbenches kann man mit <code>FreeCAD.ActiveDocument.supportedTypes()</code> eine vollständige Liste aller erhalten. Nur Objekt Typen die mit <code>Python</code> enden können in Skript Objekten verwendet werden. Diese sind hier aufgelistet (für FreeCAD v1.0):
</p>
<ul><li><code>App::DocumentObjectGroupPython</code></li>
<li><code>App::FeaturePython</code></li>
<li><code>App::GeometryPython</code></li>
<li><code>App::LinkElementPython</code></li>
<li><code>App::LinkGroupPython</code></li>
<li><code>App::LinkPython</code></li>
<li><code>App::MaterialObjectPython</code></li>
<li><code>App::PlacementPython</code></li>
<li><code>Fem::ConstraintPython</code></li>
<li><code>Fem::FeaturePython</code></li>
<li><code>Fem::FemAnalysisPython</code></li>
<li><code>Fem::FemMeshObjectPython</code></li>
<li><code>Fem::FemResultObjectPython</code></li>
<li><code>Fem::FemSolverObjectPython</code></li>
<li><code>Measure::MeasurePython</code></li>
<li><code>Mesh::FeaturePython</code></li>
<li><code>Part::CustomFeaturePython</code></li>
<li><code>Part::FeaturePython</code></li>
<li><code>Part::Part2DObjectPython</code></li>
<li><code>PartDesign::FeatureAdditivePython</code></li>
<li><code>PartDesign::FeatureAddSubPython</code></li>
<li><code>PartDesign::FeaturePython</code></li>
<li><code>PartDesign::FeatureSubtractivePython</code></li>
<li><code>PartDesign::SubShapeBinderPython</code></li>
<li><code>Path::FeatureAreaPython</code></li>
<li><code>Path::FeatureAreaViewPython</code></li>
<li><code>Path::FeatureCompoundPython</code></li>
<li><code>Path::FeaturePython</code></li>
<li><code>Path::FeatureShapePython</code></li>
<li><code>Points::FeaturePython</code></li>
<li><code>Sketcher::SketchObjectPython</code></li>
<li><code>Spreadsheet::SheetPython</code></li>
<li><code>TechDraw::DrawBrokenViewPython</code></li>
<li><code>TechDraw::DrawComplexSectionPython</code></li>
<li><code>TechDraw::DrawLeaderLinePython</code></li>
<li><code>TechDraw::DrawPagePython</code></li>
<li><code>TechDraw::DrawRichAnnoPython</code></li>
<li><code>TechDraw::DrawTemplatePython</code></li>
<li><code>TechDraw::DrawTilePython</code></li>
<li><code>TechDraw::DrawTileWeldPython</code></li>
<li><code>TechDraw::DrawViewPartPython</code></li>
<li><code>TechDraw::DrawViewPython</code></li>
<li><code>TechDraw::DrawViewSectionPython</code></li>
<li><code>TechDraw::DrawViewSymbolPython</code></li>
<li><code>TechDraw::DrawWeldSymbolPython</code></li></ul>
<p><span id="Available_methods"></span>
</p>
<h2><span class="mw-headline" id="Vorhandene_Methoden">Vorhandene Methoden</span></h2>
<p>Siehe <a href="FeaturePython_methods.html" title="FeaturePython methods/de">FeaturePython Methoden</a> für eine vollständige Referenz.
</p><p><span id="Available_properties"></span>
</p>
<h2><span class="mw-headline" id="Vorhandene_Eigenschaften">Vorhandene Eigenschaften</span></h2>
<p>Eigenschaften sind die wahren Bausteine von FeaturePython-Objekten. Durch sie kann man mit einem Objekt interagieren und es ändern. Nach dem Erstellen eines neuen FeaturePython-Objekts in einem Dokument, kann man eine Liste der vorhandenen Eigenschaften bekommen:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">supportedProperties</span><span class="p">()</span>
</pre></div>
<p>Siehe <a href="FeaturePython_Custom_Properties.html" title="FeaturePython Custom Properties/de">FunktionsPython benutzerdefinierte Eigenschaften</a> für einen Überblick:
</p><p>Beim Hinzufügen von Eigenschaften zu benutzerdefinierten Objekten bitte folgendes beachten:
</p>
<ul><li>Nicht die Zeichen <code>&lt;</code> oder <code> &gt;</code> in den Beschreibungen der Eigenschaften verwenden (das würde die XML-Teile in der .FCStd-Datei auseinanderbrechen)</li>
<li>Eigenschaften werden alphabetisch in einer .FCStd-Datei gespeichert. Befindet sich eine Form (shape) in den Eigenschaften, wird jede Eigenschaft, deren Name in alphabetischen Reihenfolge nach "Shape" kommt, auch NACH der Form geladen, was zu seltsamen Verhaltensweisen führen kann.</li></ul>
<p>Die Eigenschaften sind in der C++ header-Datei <a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/App/PropertyStandard.h" rel="nofollow">PropertyStandard.h</a> festgelegt.
</p>
<h3><span class="mw-headline" id="Property_attributes">Property attributes</span></h3>
<p>Standardmäßig können Eigenschaften durch den Anwender geändert werden, aber es ist möglich, die Eigenschaften auf schreibgeschützt zu setzen, wenn man zum Beispiel das Ergebnis einer Methode anzeigen möchte. Es ist auch möglich, eine Eigenschaft auszublenden. Diese Attribute können festgelegt werden mit:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">setEditorMode</span><span class="p">(</span><span class="s2">"MyPropertyName"</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</pre></div>
<p>wobei mode diese Werte annehmen kann:
</p>
<pre>0 -- Standardmodus, zum Lesen und Schreiben
1 -- Schreibgeschützt (nur zum Lesen)
2 -- Ausgeblendet
3 -- Schreibgeschützt und ausgeblendet
</pre>
<p>Die Attribute können auch durch Verwenden einer Liste von Zeichenketten festgelegt werden, z.B. <code>obj.setEditorMode("Placement", ["ReadOnly", "Hidden"])</code>.
</p><p>Attribute, die mit <code>setEditorMode</code> gesetzt wurden, können vom Anwender entfernt werden. Siehe <a href="Property_editor.html#Kontextmenü" title="Property editor/de">Eigenschafteneditor</a>. Man beachte, dass schreibgeschützte Eigenschaften mit Python (-Anweisungen) geändert werden können.
</p><p>Diese und weitere Attribute können auch direkt mit der Funktion <code>addProperty</code> gesetzt werden. Attribute, die mit dieser Funktion gesetzt wurden, können nicht vom Anwender geändert werden. Eine interessante Möglichkeit ist es, eine Eigenschaft als Ausgabe-Eigenschaft zu kennzeichnen. Auf diese Weise werden Objekte durch FreeCAD nicht als verändert gekennzeichnet, wenn sie bearbeitet werden (dadurch ist eine Neuberechnung nicht erforderlich).
</p><p>Beispiel einer Ausgabe Property (siehe auch <a class="external free" href="https://forum.freecad.org/viewtopic.php?t=24928" rel="nofollow">https://forum.freecad.org/viewtopic.php?t=24928</a>):
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
<p>The attributes that can be set with <code>addProperty</code> are listed below. Multiple attributes can be set by adding values.
</p>
<pre>  0 -- Prop_None, No special property attribute
  1 -- Prop_ReadOnly, Property is read-only in the editor
  2 -- Prop_Transient, Property won't be saved to file
  4 -- Prop_Hidden, Property won't appear in the editor
  8 -- Prop_Output, Modified property doesn't touch its parent container
 16 -- Prop_NoRecompute, Modified property doesn't touch its container for recompute
 32 -- Prop_NoPersist, Property won't be saved to file at all
</pre>
<p>Die Attribute der Eigenschaften sind in der <a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/App/PropertyContainer.h" rel="nofollow">PropertyContainer C++ header-Datei</a> festgelegt.
</p><p>For <code>Prop_ReadOnly</code> and <code>Prop_Hidden</code> the <code>addProperty</code> function has boolean arguments as well:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
<p>Which is equivalent to:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
<p><span style="font-size:small;"><a href="Release_notes_1.0.html" title="Release notes 1.0">introduced in version 1.0</a></span>: The full signature of the function is:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enum_vals</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
<ul><li><code>type</code>: Property type.</li>
<li><code>name</code>: Property name.</li>
<li><code>group</code>: Property subsection (used in the <a href="Property_editor.html" title="Property editor">Property editor</a>).</li>
<li><code>doc</code>: Tooltip (idem).</li>
<li><code>attr</code>: Attribute, see above.</li>
<li><code>read_only</code>: See above.</li>
<li><code>hidden</code>: See above.</li>
<li><code>enum_vals</code>: Enumeration values (list of string), only relevant if type is <code>"App::PropertyEnumeration"</code>.</li></ul>
<p><span id="Available_extensions"></span>
</p>
<h2><span class="mw-headline" id="Vorhandene_Erweiterungen">Vorhandene Erweiterungen</span></h2>
<p>The list of available extensions can be obtained with <code>grep -RI EXTENSION_PROPERTY_SOURCE_TEMPLATE</code> in the repository of the source code and is given here (for FreeCAD v0.21).
</p><p>For objects:
</p>
<ul><li><code>App::GeoFeatureGroupExtensionPython</code></li>
<li><code>App::GroupExtensionPython</code></li>
<li><code>App::LinkBaseExtensionPython</code></li>
<li><code>App::LinkExtensionPython</code></li>
<li><code>App::OriginGroupExtensionPython</code></li>
<li><code>Part::AttachExtensionPython</code></li>
<li><code>TechDraw::CosmeticExtensionPython</code></li></ul>
<p>For view objects:
</p>
<ul><li><code>Gui::ViewProviderExtensionPython</code></li>
<li><code>Gui::ViewProviderGeoFeatureGroupExtensionPython</code></li>
<li><code>Gui::ViewProviderGroupExtensionPython</code></li>
<li><code>Gui::ViewProviderOriginGroupExtensionPython</code></li>
<li><code>PartGui::ViewProviderAttachExtensionPython</code></li>
<li><code>PartGui::ViewProviderSplineExtensionPython</code></li></ul>
<p>There exist other extensions but they do not work as-is:
</p>
<ul><li><code>App::ExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderCosmeticExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderDrawingViewExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderPageExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderTemplateExtensionPython</code></li></ul>
<p><span id="Further_information"></span>
</p>
<h2><span class="mw-headline" id="Weitere_Informationen">Weitere Informationen</span></h2>
<p>Weitere Seiten:
</p>
<ul><li><a href="Scripted_objects_saving_attributes.html" title="Scripted objects saving attributes/de">Skriptgesteuerte Objekte, die Attribute speichern</a></li>
<li><a href="Scripted_objects_migration.html" title="Scripted objects migration/de">Migration von geskripteten Objekten</a></li>
<li><a href="Scripted_objects_with_attachment.html" title="Scripted objects with attachment/de">Geskriptete Objekte mit Anhang</a></li>
<li><a href="Viewprovider.html" title="Viewprovider/de">Ansichtsanbieter</a></li></ul>
<p>Interessante Forenbeiträge über geskriptete Objekte:
</p>
<ul><li><a class="external text" href="http://forum.freecadweb.org/viewtopic.php?f=22&amp;t=13740" rel="nofollow">Python object attributes lost at load</a></li>
<li><a class="external text" href="http://forum.freecadweb.org/viewtopic.php?t=12139" rel="nofollow">New FeaturePython is grey</a></li>
<li><a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=18&amp;t=44009" rel="nofollow">Explanation on dumps and loads</a>, <a class="external text" href="https://docs.python.org/3/library/pickle.html#object.__getstate__" rel="nofollow">official documentation</a></li>
<li><a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=18&amp;t=13460&amp;start=20#p109709" rel="nofollow">Eigenmode frequency always 0?</a></li>
<li><a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=22&amp;t=21330" rel="nofollow">how to implement python feature's setEdit properly?</a></li></ul>
<p>Zusätzlich zu den hier vorgestellten Beispielen solltedz du einen Blick in den FreeCAD Quellcode <a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">src/Mod/TemplatePyMod/FeaturePython.py</a> für weitere Beispiele werfen.
</p><p><br/>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="Topological_data_scripting.html" title="Topological data scripting/de">Topologische Daten skripten</a></div>
<div style="margin: 4px 0; float: right;"><a href="Scenegraph.html" title="Scenegraph/de">Szenengraph</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="Online_Help_Toc.html" title="Online Help Toc/de">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Online_Help_Toc.svg" width="24"/></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/Power_user_hub.png"><img decoding="async" height="24" src="../File/Power_user_hub.png" srcset="/images/thumb/8/8f/Power_user_hub.png/36px-Power_user_hub.png 1.5x, /images/thumb/8/8f/Power_user_hub.png/48px-Power_user_hub.png 2x" width="24"/></a></span> <a href="Power_users_hub.html" title="Power users hub/de">Power user documentation</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>FreeCAD scripting:</b> <a href="Python.html" title="Python/de">Python</a>, <a href="Introduction_to_Python.html" title="Introduction to Python/de">Introduction to Python</a>, <a href="Python_scripting_tutorial.html" title="Python scripting tutorial/de">Python scripting tutorial</a>, <a href="FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/de">FreeCAD Scripting Basics</a></li></ul>
<hr/>
<ul><li><b>Modules:</b> <a href="Builtin_modules.html" title="Builtin modules/de">Builtin modules</a>, <a href="Units.html" title="Units/de">Units</a>, <a href="Quantity.html" title="Quantity/de">Quantity</a></li>
<li><b>Workbenches:</b> <a href="Workbench_creation.html" title="Workbench creation/de">Workbench creation</a>, <a href="Gui_Command.html" title="Gui Command/de">Gui Commands</a>, <a href="Command.html" title="Command/de">Commands</a>, <a href="Installing_more_workbenches.html" title="Installing more workbenches/de">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="Mesh_Scripting.html" title="Mesh Scripting/de">Mesh Scripting</a>, <a href="Topological_data_scripting.html" title="Topological data scripting/de">Topological data scripting</a>, <a href="Mesh_to_Part.html" title="Mesh to Part/de">Mesh to Part</a>, <a href="PythonOCC.html" title="PythonOCC/de">PythonOCC</a></li></ul>
<hr/>
<ul><li><b>Parametric objects:</b> <a class="mw-selflink selflink">Scripted objects</a>, <a href="Viewprovider.html" title="Viewprovider/de">Viewproviders</a> <small>(<a href="Custom_icon_in_tree_view.html" title="Custom icon in tree view/de">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="Scenegraph.html" title="Scenegraph/de">Coin (Inventor) scenegraph</a>, <a href="Pivy.html" title="Pivy/de">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="Interface_creation.html" title="Interface creation/de">Interface creation</a>, <a href="Dialog_creation.html" title="Dialog creation/de">Interface creation completely in Python</a> <small>(<a href="Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/de">1</a>, <a href="Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/de">2</a>, <a href="Dialog_creation_setting_colors.html" title="Dialog creation setting colors/de">3</a>, <a href="Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/de">4</a>, <a href="PySide_usage_snippets.html" title="PySide usage snippets/de">5</a>)</small>, <a href="PySide.html" title="PySide/de">PySide</a>, PySide examples <a href="PySide_Beginner_Examples.html" title="PySide Beginner Examples/de">beginner</a>, <a href="PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/de">intermediate</a>, <a href="PySide_Advanced_Examples.html" title="PySide Advanced Examples/de">advanced</a></li>
<li><b>Macros:</b> <a href="Macros.html" title="Macros/de">Macros</a>, <a href="How_to_install_macros.html" title="How to install macros/de">How to install macros</a></li>
<li><b>Embedding:</b> <a href="Embedding_FreeCAD.html" title="Embedding FreeCAD/de">Embedding FreeCAD</a>, <a href="Embedding_FreeCADGui.html" title="Embedding FreeCADGui/de">Embedding FreeCADGui</a></li></ul>
<hr/>
<ul><li><b>Other:</b> <a href="Expressions.html" title="Expressions/de">Expressions</a>, <a href="Code_snippets.html" title="Code snippets/de">Code snippets</a>, <a href="Line_drawing_function.html" title="Line drawing function/de">Line drawing function</a>, <a href="FreeCAD_vector_math_library.html" title="FreeCAD vector math library/de">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr/>
<ul><li><b>Hubs:</b> <a href="User_hub.html" title="User hub/de">User hub</a>, <a href="Power_users_hub.html" title="Power users hub/de">Power users hub</a>, <a href="Developer_hub.html" title="Developer hub/de">Developer hub</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241129211219
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.237 seconds
Real time usage: 2.075 seconds
Preprocessor visited node count: 1124/1000000
Post‐expand include size: 13664/2097152 bytes
Template argument size: 33489/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 19/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 136308/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 1875.217      1 -total
 98.98% 1856.058     19 Template:Code
  0.24%    4.572      1 Template:Powerdocnavi/de
  0.18%    3.414    114 Template:Incode
  0.11%    2.131      1 Template:Navigation_menu_2
  0.08%    1.586      2 Template:Docnav/de
  0.06%    1.102      1 Template:Version
  0.03%    0.493      1 Template:TOCright
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:2266-0!canonical and timestamp 20241129211217 and revision id 1499210. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
