<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Translating an external workbench/de</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="de">Deutsch</span></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Translating_an_external_workbench.html" lang="en" title="Translating an external workbench (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../es\Translating_an_external_workbench.html" lang="es" title="Traduciendo un banco de trabajo externo (6% translated)">español</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../fr\Translating_an_external_workbench.html" lang="fr" title="Traduction d'un atelier externe (100% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../it\Translating_an_external_workbench.html" lang="it" title="Traduzione di un ambiente di lavoro esterno (2% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\Translating_an_external_workbench.html" lang="pl" title="Tłumaczenie interfejsu zewnętrznych środowisk pracy (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../pt-br\Translating_an_external_workbench.html" lang="pt-BR" title="Translating an external workbench/pt-br (2% translated)">português do Brasil</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../ru\Translating_an_external_workbench.html" lang="ru" title="Перевод внешних верстаков (14% translated)">русский</a></li></ul></div>
<p>In den folgenden Beschreibungen steht <code>"context"</code> für den Namen deines Addons oder deines Arbeitsbereichs, z.B. <code>"MeinSuperAddon"</code> oder <code>"DraftPlus"</code> oder was auch immer. Groß- und Kleinschreibung wird hier unterschieden: So ist z.B. <code>"Context"</code> ist nicht dasselbe wie <code>"context"</code>. Dieser "context" sorgt dafür, dass alle Übersetzungen des Codes unter demselben Namen zusammengefasst werden, um von Übersetzern leichter erkannt zu werden. Das heißt, sie wissen genau, zu welchem Addon oder welchem Arbeitsbereich eine bestimmte Zeichenfolge gehört.
</p><p><b>Hinweis</b>: Hier gibt es ein Multifunktionsskript, das den kompletten unten beschriebenen Ablauf automatisiert (Es wird trotzdem empfohlen, die Beschreibung zu lesen, um zu wissen, was das Skript erledigen soll): <a class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py" rel="nofollow">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p><p><span id="Preparing_the_sources"></span>
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Die_Quellen_vorbereiten"><span class="tocnumber">1</span> <span class="toctext">Die Quellen vorbereiten</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Allgemeines"><span class="tocnumber">1.1</span> <span class="toctext">Allgemeines</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#In_jeder_Python-Datei"><span class="tocnumber">1.2</span> <span class="toctext">In jeder Python-Datei</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#In_Der_Datei_InitGui.py"><span class="tocnumber">1.3</span> <span class="toctext">In Der Datei InitGui.py</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Innerhalb_jeder_FreeCAD-Befehlsklasse"><span class="tocnumber">1.4</span> <span class="toctext">Innerhalb jeder FreeCAD-Befehlsklasse</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Alle_Zeichenketten_des_eigenen_Moduls_sammeln"><span class="tocnumber">2</span> <span class="toctext">Alle Zeichenketten des eigenen Moduls sammeln</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Die_.ts-Datei_an_eine_Übersetzungsplattform_senden"><span class="tocnumber">3</span> <span class="toctext">Die .ts-Datei an eine Übersetzungsplattform senden</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Die_Übersetzungen_zusammenführen"><span class="tocnumber">4</span> <span class="toctext">Die Übersetzungen zusammenführen</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Die_Übersetzungen_kompilieren"><span class="tocnumber">5</span> <span class="toctext">Die Übersetzungen kompilieren</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Übersetzungen_testen"><span class="tocnumber">6</span> <span class="toctext">Übersetzungen testen</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Wichtige_Hinweise"><span class="tocnumber">6.1</span> <span class="toctext">Wichtige Hinweise</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Ein_nützliches_Skript"><span class="tocnumber">7</span> <span class="toctext">Ein nützliches Skript</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Technische_Einzelheiten_und_erweiterte_Anwendung"><span class="tocnumber">8</span> <span class="toctext">Technische Einzelheiten und erweiterte Anwendung</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Wichtige_Verweise"><span class="tocnumber">9</span> <span class="toctext">Wichtige Verweise</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Verwandte_Seiten"><span class="tocnumber">10</span> <span class="toctext">Verwandte Seiten</span></a></li>
</ul>
</div>
<h2><span class="mw-headline" id="Die_Quellen_vorbereiten">Die Quellen vorbereiten</span></h2>
<p><span id="General"></span>
</p>
<h3><span class="mw-headline" id="Allgemeines">Allgemeines</span></h3>
<ul><li>Einen Ordner <code>translations/</code> hinzufügen. Dieser kann auch gänzlich anders benannt werden, aber mit diesem Namen ist es einfacher, da er so in allen Bereichen von FreeCAD verendet wird. In diesem Ordner werden die <code>.ts</code>-Dateien (die "Quelldateien" der Übersetzungen) und <code>.qm</code>-Dateien (kompilierte Übersetzungsdateien) abgelegt.</li>
<li>Nur der Text, der dem Anwender in der FreeCAD-Benutzeroberfläche angezeigt wird, sollte übersetzt werden. Text, der nur in der Python-Konsole angezeigt wird, sollte nicht übersetzt werden.</li>
<li>Text, der über <code>FreeCAD.Console</code> ausgegeben wird, wird im "Ausgabefenster" angezeigt und sollte daher übersetzt werden. Das "Ausgabefenster" unterscheidet sich von der Python-Konsole.</li></ul>
<p><span id="In_every_Python_.py_file"></span>
</p>
<h3><span class="mw-headline" id="In_jeder_Python-Datei">In jeder Python-Datei</span></h3>
<ul><li>In jeder (.py-) Datei, in der Text übersetzt werden soll, muss eine <code>translate()</code>-Funktion definiert werden. Sie muss exakt <code>translate</code> benannt werden, da der Zeichenkettenausleser die exakte Benennung benötigt. Man kann den vollständigen Namen von Qt verwenden, aber die Verwendung des Folgenden ist etwas sauberer:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="n">translate</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">translate</span>
</pre></div></dd></dl>
<ul><li>Alle Texte, die übersetzt werden sollen, müssen durch die Funktion <code>translate()</code> übergeben werden:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"My text"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>wird zu:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>Man darf nicht vergessen, dass <code>translate()</code> nicht nur eine normale Funktion ist, sondern auch als "Tag" für das Textverabeitungs-Dienstprogramm <code>lupdate</code> dient und deshalb exakt "translate" heißen muss. Das Programm <code>lupdate</code> ist eine einfache Textverarbeitung; es führt keinen Code aus. Zeichenketteninhalte müssen direkt an die Funktion <code>translate()</code> übergeben werden: Es können keine Variablen, Konstanten usw. übergeben werden. Ein Beispiel:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># This works:</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># This does not, lupdate only sees the word "a_variable", and doesn't know what that is:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="s2">"My text"</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="n">a_variable</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># But this works -- a_variable will contain the translated string:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">a_variable</span>  <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>Dies kann überall verwendet werden: In <code>print()</code>, in <code>FreeCAD.Console.PrintMessage()</code>, in Qt-Dialogen, etc. Die <code>FreeCAD.Console</code>-Funktionen fügen das Zeichen für den Zeilenumbruch (<code>\n</code>) nicht automatisch hinzu, es muss bei Bedarf am Ende hinzugefügt werden. Dieses Zeichen benötigt auch keine Übersetzung und kann daher außerhalb der Übersetzungsfunktion liegen:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<ul><li>Werden <code>.ui</code>-Dateien verwendet, die mit dem QtDesigner erstellt wurden, muss nichts Besonderes mit ihnen gemacht werden.</li>
<li>Beim Erstellen neuer Objekte darf der "Name" des Objekts nicht übersetzt werden. Übersetzt wird vielmehr die "Benennung" (das Label) des Objekts. Der Unterschied besteht darin, dass ein "Name" einzigartig ist; er bleibt über die gesamte Lebensdauer des Objekts derselbe; andererseits kann eine "Benennung" vom Benutzer beliebig geändert werden.</li>
<li>Wenn man Eigenschaften für eigene Objekte erstellt, werden die Namen der Eigenschaften nicht übersetzt. Aber die Beschreibung wird in <code>QT_TRANSLATE_NOOP</code> eingebettet:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyBool"</span><span class="p">,</span> <span class="s2">"MyProperty"</span><span class="p">,</span> <span class="s2">"PropertyGroup"</span><span class="p">,</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"App::Property"</span><span class="p">,</span> <span class="s2">"This is what My Property does"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>Man verwendet in diesem speziellen Fall keinen eigenen <code>"context"</code>, sondern behält <code>"App::Property"</code> bei.</dd></dl>
<p><span id="In_InitGui.py"></span>
</p>
<h3><span class="mw-headline" id="In_Der_Datei_InitGui.py">In Der Datei InitGui.py</span></h3>
<ul><li>Die folgende Zeile im oberen Bereich der Datei hinzufügen:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<dl><dd>Das Makro <code>QT_TRANSLATE_NOOP</code> macht nichts außer, dass es Texte markiert, die später vom Dienstprogramm <code>lupdate</code> aufgesammelt werden. Es wird nur in Sonderfällen verwendet, in denen sich FreeCAD selbst um alles kümmert.</dd></dl>
<ul><li>Um Namen von Menüs und Symboleisten zu übersetzen, verwendet man das Wort <code>"Workbench"</code> als Kontext:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My menu"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My toolbar"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div></dd></dl>
<ul><li>In der Initialisierten Funktion den Pfad zum eigenen Ordner <code>translations/</code> hinzufügen und locale aktualisieren:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="s2">"/path/to/translations"</span><span class="p">)</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<p>Die Datei InitGui.py hat kein Attribut <b>file</b>, so dass es nicht einfach ist, die relative Position des Übersetzungsordners zu finden. Eine einfache Möglichkeit, dies zu umgehen, besteht darin, eine andere Datei aus demselben Ordner zu importieren und in dieser Datei Folgendes zu tun:
</p>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">"translations"</span><span class="p">))</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<p><span id="Inside_each_FreeCAD_command_class"></span>
</p>
<h3><span class="mw-headline" id="Innerhalb_jeder_FreeCAD-Befehlsklasse">Innerhalb jeder FreeCAD-Befehlsklasse</span></h3>
<ul><li>Die folgende Zeile im oberen Bereich der Datei hinzufügen:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<ul><li><code>'MenuText'</code> und <code>'Tooltip'</code> des Befehls werden wie folgt übersetzt:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">),</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div></dd></dl>
<dl><dd>wobei "CommandName" der Name des Befehls ist, definiert durch:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">'CommandName'</span><span class="p">,</span> <span class="n">My_Command_Class</span><span class="p">())</span>
</pre></div></dd></dl>
<p><span id="Gather_all_the_strings_from_your_module"></span>
</p>
<h2><span class="mw-headline" id="Alle_Zeichenketten_des_eigenen_Moduls_sammeln">Alle Zeichenketten des eigenen Moduls sammeln</span></h2>
<ul><li>Die Werkzeuge <code>lupdate</code>, <code>lconvert</code>, <code>lrelease</code> und <code>pylupdate</code> müssen auf dem eigenen System installiert sein. In Linux-Distributionen sind sie in der Regel in Paketen mit den Namen <code>pyside-tools</code> oder <code>pyside2-tools</code> enthalten. Auf einigen Systemen wird <code>lupdate</code> auch <code>lupdate4</code>, <code>lupdate5</code>,<code>lupdateqt4</code> oder ähnlich genannt. Das Gleiche gilt für die anderen Werkzeuge. Die Versionen Qt4 oder Qt5 können nach Wahl verwendet werden. In Qt6 gibt es kein eigenständiges Übersetzungssystem für Python-Dateien, <code>lupdate</code> wird zum Extrahieren der Zeichenketten aus allen Arten von Quelldateien verwendet.</li>
<li>Sind <code>.ui</code>-Dateien vorhanden, muss zuerst <code>lupdate</code> ausgeführt werden:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<dl><dd>Dies ist rekursiv und findet <code>.ui</code>-Dateien in der gesamten Verzeichnisstruktur.</dd></dl>
<ul><li>Sind <code>.py</code>-Dateien vorhanden, muss auch <code>pylupdate</code> ausgeführt werden:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>Wurden beide Operationen ausgeführt, müssen nun die beiden Dateien zu einer einzigen zusammengefeasst werden:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>Die Inhalte der drei <code>.ts</code>-Dateien überprüfen, um sicherzustellen, dass sie die Zeichenketten enthalten, danach können <code>pyfiles.ts</code> und <code>uifiles.ts</code> gelöscht werden.</li>
<li>Das alles kann auch mit einem Bash-Skript wie diesem ausgeführt werden:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<p><span id="Send_the_.ts_file_to_a_translation_platform"></span>
</p>
<h2><span id="Die_.ts-Datei_an_eine_.C3.9Cbersetzungsplattform_senden"></span><span class="mw-headline" id="Die_.ts-Datei_an_eine_Übersetzungsplattform_senden">Die .ts-Datei an eine Übersetzungsplattform senden</span></h2>
<p>Es ist an der Zeit, die .ts-Datei übersetzen zu lassen. Dafür kann man ein Konto auf einer öffentlichen Übersetzungsplattform wie <a class="external text" href="https://crowdin.com/" rel="nofollow">Crowdin</a> oder <a class="external text" href="https://www.transifex.com/" rel="nofollow">Transifex</a> einrichten, oder unser bestehendes <a class="external text" href="https://crowdin.com/project/freecad-addons" rel="nofollow">FreeCAD-Addons-Konto bei Crowdin</a> nutzen, das bereits viele Benutzer hat und somit eine größere Chance, die Datei schnell übersetzen zu lassen, von Leuten, die FreeCAD kennen.
</p><p>Soll die Datei auf dem FreeCAD-Crowdin-Konto untergebracht werden, hilft <a class="external text" href="https://forum.freecadweb.org/memberlist.php?mode=viewprofile&amp;u=68" rel="nofollow">Yorik</a> im <a class="external text" href="https://forum.freecadweb.org/" rel="nofollow">FreeCAD-Forum</a> gerne weiter.
</p><p><i>Hinweis:</i> Einige Plattformen wie Crowdin können sich in GitHub integrieren und den gesamten Prozess von Punkt 2, 3 und 4 automatisch durchführen. Dafür kann das FreeCAD-Crowdin-Konto nicht verwendet werden; Man muss sein eigenes Konto einrichten.
</p><p><span id="Merge_the_translations"></span>
</p>
<h2><span id="Die_.C3.9Cbersetzungen_zusammenf.C3.BChren"></span><span class="mw-headline" id="Die_Übersetzungen_zusammenführen">Die Übersetzungen zusammenführen</span></h2>
<p>Sobald deine <code>.ts</code> Datei übersetzt wurde, wenn auch nur teilweise, kannst du die Übersetzungen von der Internetseite herunterladen:
</p>
<ul><li>Du wirst normalerweise eine <code>.zip</code> Datei herunterladen, die eine <code>.ts</code> pro Sprache enthält.</li>
<li>Platziere alle übersetzten <code>.ts</code> Dateien zusammen mit Deiner Basisdatei <code>.ts</code> im <code>translations/</code> Ordner.</li></ul>
<p><span id="Compile_the_translations"></span>
</p>
<h2><span id="Die_.C3.9Cbersetzungen_kompilieren"></span><span class="mw-headline" id="Die_Übersetzungen_kompilieren">Die Übersetzungen kompilieren</span></h2>
<p>Nun wird das Programm <code>lrelease</code> auf jede vorhandene Datei angewendet:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lrelease</span> <span class="s2">"translations/Draft_de.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_fr.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_pt-BR.ts"</span>
</pre></div>
<p>Der Prozess lässt sich automatisieren:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">translations</span><span class="o">/*</span><span class="n">_</span><span class="o">*.</span><span class="n">ts</span>
<span class="n">do</span>
    <span class="n">lrelease</span> <span class="s2">"translations/$f"</span>
<span class="n">done</span>
</pre></div>
<p>Es sollte jetzt eine <code>.qm</code>-Datei für jede übersetzte <code>.ts</code>-Datei vorhanden sein. Die <code>.qm</code>-Dateien sind die, die von Qt und FreeCAD zur Laufzeit verwendet werden.
</p><p>Das ist alles, was gebraucht wird. Man beachte, dass bestimmte Teile des eigenen Arbeitsbereichs nicht sofort übersetzt werden können, wenn man sich für einen Wechsel der Sprache entscheidet. In diesem Fall muss FreeCAD neu gestartet werden, damit die neue Sprache verwendet wird.
</p><p><span id="Testing_translations"></span>
</p>
<h2><span id=".C3.9Cbersetzungen_testen"></span><span class="mw-headline" id="Übersetzungen_testen">Übersetzungen testen</span></h2>
<ol><li>In FreeCAD zu einer Sprache wechseln, die man übersetzt hat (z.B. Deutsch)</li>
<li>Die Übersetzung in FreeCAD laden, z.B. <code>FreeCADGui.addTranslationPath("/Pfad/zum/Verzeichnis/mit/qmfile")</code></li>
<li>Eine Zeichenkette testen, z.B. <code>FreeCAD.Qt.translate("dein Kontext","Eine Zeichenkette")</code></li></ol>
<p>Ergebnis: Dies sollte die deutsche Übersetzung liefern. Wenn das funktioniert, ist die Basiseinstellung OK. Dann können wir uns etwas anderes ansehen. Beispielsweise sollten Befehlsnamen einen speziellen Kontext benutzen, das ist der in FreeCAD eingetragene Befehlsname.
</p><p><span id="Important_notes"></span>
</p>
<h3><span class="mw-headline" id="Wichtige_Hinweise">Wichtige Hinweise</span></h3>
<ul><li>Stelle sicher, dass du einen *context* und *string* verwendest, der tatsächlich in der ts/qm-Datei vorhanden ist.</li></ul>
<p><span id="Convenience_script"></span>
</p>
<h2><span id="Ein_n.C3.BCtzliches_Skript"></span><span class="mw-headline" id="Ein_nützliches_Skript">Ein nützliches Skript</span></h2>
<p>Yorik unterhält ein nützliches Skript für den Arbeitsbereich BIM, das .ts-Dateien sammeln, hochladen und herunterladen kann.
Dieses Skript kann einfach kopiert und für den eigenen Arbeitsbereich angepasst werden:
</p><p><a class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py" rel="nofollow">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p><p><span id="Technical_details_and_advanced_usage"></span>
</p>
<h2><span class="mw-headline" id="Technische_Einzelheiten_und_erweiterte_Anwendung">Technische Einzelheiten und erweiterte Anwendung</span></h2>
<p>In den obigen Beispielen wurden zwei separate Funktionen verwendet: <code>translate()</code> und <code>QT_TRANSLATE_NOOP</code>. Vielleicht stößt man auch auf <code>tr()</code> und <code>QT_TR_NOOP</code>, die automatisch das Argument "context" basierend auf dem Ort, von wo sie aufgerufen werden, bereitstellen. Diese beiden Paare von Funktionen unterscheiden sich grundlegend. 
</p><p><code>translate()</code> and <code>tr()</code> accomplish two separate tasks: at runtime they perform the actual translation from the string passed into them to the final translated string. This is true whether they are provided a literal string, or a variable, or a constant: the lookup is dynamic and real-time during the run of the code. However, they provide an additional non-runtime function: they are recognized by the <code>pylupdate</code> utility. If (and only if) they contain a string literal, that literal is extracted by the utility. ONLY string literals are extracted by <code>pylupdate</code> -- if a variable is passed it is ignored by the <code>pylupdate</code> utility. Qt will attempt to provide a translation at runtime, but this will only work if some other piece of code called one of the translation functions with the literal string that needs to be translated, so that <code>pylupdate</code> can extract it. Note that the code with the string literal need not actually ever execute, it must simply exist as a line of code in a file somewhere: <code>pylupdate</code> performs no analysis or code execution, it is simply performing a string search and extraction.
</p><p>In contrast, <code>QT_TRANSLATE_NOOP</code> and <code>QT_TR_NOOP</code> do nothing at all at runtime: they are literal "no-ops", and are completely ignored by running code. Their only use is to mark a literal string for extraction by <code>pylupdate</code>: it never makes sense to place a variable within a call to one of these functions, it will have no effect. They are used in circumstances where <code>translate()</code> or <code>tr()</code> will be called with a variable containing the text to translate. For example, any code that is used to create a Command or a Property will use a NOOP-type function around the command menu text or tooltip, or the property docstring: at runtime when FreeCAD displays these items to the user it calls <code>translate()</code>: the literal strings must have been extracted by <code>pylupdate</code> at the point of creation, for example:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div>
<p>In this usage, at runtime the dictionary returned by this function is literally:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span> 
    <span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
    <span class="s1">'MenuText'</span><span class="p">:</span> <span class="s2">"My Command"</span><span class="p">,</span>
    <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="s2">"Describes what the command does"</span><span class="p">,</span>
    <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
<span class="p">}</span>
</pre></div>
<p>There is no reference to any type of translation information. When FreeCAD actually displays this information to the user, the pseudo-code is:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">GetResources</span><span class="p">()</span>
    <span class="n">menu_text</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="s1">'MenuText'</span><span class="p">])</span>
</pre></div>
<p>In this case, <code>lupdate</code> cannot extract any string from the call to <code>translate()</code> because it refers to a variable. So <code>lupdate</code> ignores that call, but at runtime Qt searches for the string that's passed to it. As long as someplace in the code there is a call to one of the translation functions with a matching literal string (in this case, in the <code>GetResources()</code> function), this translation call will succeed.
</p><p>To verify that the expected strings are being extracted, you can manually run the <code>pylupdate</code> command:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="n">myfile</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">outfile</span><span class="o">.</span><span class="n">ts</span>
</pre></div>
<p>The file <code>outfile.ts</code> will contain the set of strings that are uploaded to CrowdIn for translation.
</p><p><span id="Important_references"></span>
</p>
<h2><span class="mw-headline" id="Wichtige_Verweise">Wichtige Verweise</span></h2>
<ul><li>Warum und wie man <code>openCommand()</code> Funktionen übersetzen sollte (<a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=10&amp;t=55869" rel="nofollow">forum thread</a>)</li></ul>
<p><span id="Related_Pages"></span>
</p>
<h2><span class="mw-headline" id="Verwandte_Seiten">Verwandte Seiten</span></h2>
<ul><li><a href="../de\External_workbenches.html" title="External workbenches/de">Externe Arbeitsbereiche</a></li>
<li><a href="../de\Localisation.html" title="Localisation/de">Lokalisierung</a></li>
<li>Eigene Anfragen nach weitere Informationen können hier gestellt werden:<a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=10&amp;t=36413" rel="nofollow">Translating external workbenches</a> (engl.).</li></ul>
<p><br/>
</p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/User_hub.png"><img decoding="async" height="24" src="../File/User_hub.png" width="24"/></a></span> <a href="../de\User_hub.html" title="User hub/de">Anwenderdokumentation</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b><a href="../de\Getting_started.html" title="Getting started/de">Erste Schritte</a></b></li>
<li><b>Installation:</b> <a href="../de\Download.html" title="Download/de">Herunterladen</a>, <a href="../de\Installing_on_Windows.html" title="Installing on Windows/de">Windows</a>, <a href="../de\Installing_on_Linux.html" title="Installing on Linux/de">Linux</a>, <a href="../de\Installing_on_Mac.html" title="Installing on Mac/de">Mac</a>, <a href="../de\Installing_additional_components.html" title="Installing additional components/de">Zusätzliche Komponenten</a>, <a href="../de\Compile_on_Docker.html" title="Compile on Docker/de">Docker</a>, <a href="../de\AppImage.html" title="AppImage/de">AppImage</a>, <a href="../de\Ubuntu_Snap.html" title="Ubuntu Snap/de">Ubuntu Snap</a></li>
<li><b>Grundlagen:</b> <a href="../de\About_FreeCAD.html" title="About FreeCAD/de">Über FreeCAD</a>, <a href="../de\Interface.html" title="Interface/de">Graphische Oberfläche</a>, <a href="../de\Mouse_navigation.html" title="Mouse navigation/de">Mausbedienung</a>, <a href="../de\Selection_methods.html" title="Selection methods/de">Auswahlmethoden</a>, <a href="../de\Object_name.html" title="Object name/de">Objektname</a>, <a href="../de\Preferences_Editor.html" title="Preferences Editor/de">Voreinstellungseditor</a>, <a href="../de\Workbenches.html" title="Workbenches/de">Arbeitsbereiche</a>, <a href="../de\Document_structure.html" title="Document structure/de">Dokumentstruktur</a>, <a href="../de\Property.html" title="Property/de">Objekteigenschaften</a>, <a href="../de\Help_FreeCAD.html" title="Help FreeCAD/de">FreeCAD unterstützen</a>, <a href="../de\Donate.html" title="Donate/de">Spenden</a></li></ul>
<hr/>
<ul><li><b>Hilfe:</b> <a href="../de\Tutorials.html" title="Tutorials/de">Anleitungen</a>, <a href="../de\Video_tutorials.html" title="Video tutorials/de">Videoanleitungen</a></li>
<li><b><a href="../de\Workbenches.html" title="Workbenches/de">Arbeitsbereiche</a>:</b> <a href="../de\Std_Base.html" title="Std Base/de">Std Base</a>, <a href="../de\Arch_Workbench.html" title="Arch Workbench/de">Arch</a>, <a href="../de\Assembly_Workbench.html" title="Assembly Workbench/de">Assembly</a>, <a href="../de\BIM_Workbench.html" title="BIM Workbench/de">BIM</a>, <a href="../de\CAM_Workbench.html" title="CAM Workbench/de">CAM</a>, <a href="../de\Draft_Workbench.html" title="Draft Workbench/de">Draft</a>, <a href="../de\FEM_Workbench.html" title="FEM Workbench/de">FEM</a>, <a href="../de\Inspection_Workbench.html" title="Inspection Workbench/de">Inspection</a>, <a href="../de\Material_Workbench.html" title="Material Workbench/de">Material</a>, <a href="../de\Mesh_Workbench.html" title="Mesh Workbench/de">Mesh</a>, <a href="../de\OpenSCAD_Workbench.html" title="OpenSCAD Workbench/de">OpenSCAD</a>, <a href="../de\Part_Workbench.html" title="Part Workbench/de">Part</a>, <a href="../de\PartDesign_Workbench.html" title="PartDesign Workbench/de">PartDesign</a>, <a href="../de\Points_Workbench.html" title="Points Workbench/de">Points</a>, <a href="../de\Reverse_Engineering_Workbench.html" title="Reverse Engineering Workbench/de">Reverse Engineering</a>, <a href="../de\Robot_Workbench.html" title="Robot Workbench/de">Robot</a>, <a href="../de\Sketcher_Workbench.html" title="Sketcher Workbench/de">Sketcher</a>, <a href="../de\Spreadsheet_Workbench.html" title="Spreadsheet Workbench/de">Spreadsheet</a>, <a href="../de\Surface_Workbench.html" title="Surface Workbench/de">Surface</a>, <a href="../de\TechDraw_Workbench.html" title="TechDraw Workbench/de">TechDraw</a>, <a href="../de\Testing.html" title="Testing/de">Test Framework</a></li></ul>
<hr/>
<ul><li><b><a href="../de\Addon.html" title="Addon/de">Addon</a>:</b> <a href="../de\Std_AddonMgr.html" title="Std AddonMgr/de">Addon-Manager</a>, <a href="../de\External_workbenches.html" title="External workbenches/de">Externe Arbeitsbereiche</a>, <a href="../de\Scripting_and_macros.html" title="Scripting and macros/de">Skripten und Makros</a></li></ul>
<hr/>
<ul><li><b>Hubs:</b> <a href="../de\User_hub.html" title="User hub/de">Anwenderzentrum</a>, <a href="../de\Power_users_hub.html" title="Power users hub/de">Hauptanwenderzentrum</a>, <a href="../de\Developer_hub.html" title="Developer hub/de">Entwicklerzentrum</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241214204020
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.164 seconds
Real time usage: 3.439 seconds
Preprocessor visited node count: 910/1000000
Post‐expand include size: 9485/2097152 bytes
Template argument size: 5567/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 23/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 18453/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 3341.376      1 -total
 99.51% 3324.960     23 Template:Code
  0.17%    5.793     86 Template:Incode
  0.08%    2.735      1 Template:Userdocnavi/de
  0.02%    0.827      1 Template:Navigation_menu_2
  0.02%    0.789      1 Template:Emphasis
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:164579-0!canonical and timestamp 20241214204017 and revision id 1376086. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
