<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">VRML Preparation for Robot Simulation/ro</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../de\VRML_Preparation_for_Robot_Simulation.html" lang="de" title="VRML Vorbereitung für die Robotersimulation (100% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../VRML_Preparation_for_Robot_Simulation.html" lang="en" title="VRML Preparation for Robot Simulation (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="../es\VRML_Preparation_for_Robot_Simulation.html" lang="es" title="VRML Preparación per la simulación de robots (54% translated)">español</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../fr\VRML_Preparation_for_Robot_Simulation.html" lang="fr" title="VRML Préparation à la simulation de robot (100% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="../it\VRML_Preparation_for_Robot_Simulation.html" lang="it" title="Preparare il file VRML per la simulazione (58% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\VRML_Preparation_for_Robot_Simulation.html" lang="pl" title="Przygotowanie VRML do symulacji robota (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../pt-br\VRML_Preparation_for_Robot_Simulation.html" lang="pt-BR" title="Preparação de VRML para simulação de robô (4% translated)">português do Brasil</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" dir="ltr" lang="ro">română</span></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../sv\VRML_Preparation_for_Robot_Simulation.html" lang="sv" title="VRML Preparation for Robot Simulation (4% translated)">svenska</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../cs\VRML_Preparation_for_Robot_Simulation.html" lang="cs" title="VRML Preparation for Robot Simulation (4% translated)">čeština</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../ru\VRML_Preparation_for_Robot_Simulation.html" lang="ru" title="VRML Preparation for Robot Simulation (4% translated)">русский</a></li></ul></div>
<div class="mw-translate-fuzzy">
<table class="fcinfobox wikitable ct" style="width: 230px; float: right; margin-left: 1em">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;"><span typeof="mw:File"><span><img decoding="async" height="32" src="../File/Freecad.svg" width="32"/></span></span> Tutorial
</td></tr>
<tr>
<th class="ctOdd">Topic
</th></tr>
<tr>
<td class="ctEven">Robot Workbench
</td></tr>
<tr>
<th class="ctOdd">Level
</th></tr>
<tr>
<td class="ctEven">Intermediate
</td></tr>
<tr>
<th class="ctOdd">Time to complete
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">Authors
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">FreeCAD version
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">Example files
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<td class="ctToc"><br/><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Deschideți_un_fișier_sau_creați_unul_cu_FreeCAD"><span class="tocnumber">2</span> <span class="toctext">Deschideți un fișier sau creați unul cu FreeCAD</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Măsurați_caracteristicile_geometrice"><span class="tocnumber">3</span> <span class="toctext">Măsurați caracteristicile geometrice</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Export_la_vrml"><span class="tocnumber">4</span> <span class="toctext">Export la vrml</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Pregătirea_fișierului_vrml"><span class="tocnumber">5</span> <span class="toctext">Pregătirea fișierului vrml</span></a></li>
</ul>
</div>
</td></tr></tbody></table>
</div>
<div id="itsfree" style="text-align:center;color:black;background:#FDE0A8;margin:1em 7em;padding:0.5em 2em;border:2px solid #FF5706;">The FreeCAD Robot Workbench is unmaintained. Please mention on the FreeCAD forum if you have an interest in maintaining this 
workbench.</div>
<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<div class="mw-translate-fuzzy">
<p>Acest tutorial explică modul de utilizare a FreeCAD și a Atelierului de simulare a robotului  pentru a simula mișcările robotului serial cu 6 axe. <b>Tutorialul se concentreaza pe crearea fișierului vrml</b> utilizat ca vizualizare. Baza fișierului vrml este un model FreeCAD. Versiunea FreeCAD folosită este 0.11.4252ppa1 pe Ubuntu 32bit.
</p>
</div>
<h2><span id="Deschide.C8.9Bi_un_fi.C8.99ier_sau_crea.C8.9Bi_unul_cu_FreeCAD"></span><span class="mw-headline" id="Deschideți_un_fișier_sau_creați_unul_cu_FreeCAD">Deschideți un fișier sau creați unul cu FreeCAD</span></h2>
<p>Tutorialul se bazează pe fișierul STEP al unui Stäubli TX40 (TX40-HB.stp). Puteți descărca fișierul de la <a class="external text" href="https://secure.staubli.com/Intranet_Applications/Robotics/Group/RobDoc.nsf/ea05b3f4b301f597c1256d5f005665e8/bc3707ec036c9f6bc12576c700327958/$FILE/page.html" rel="nofollow">Stäubli</a>. Cu toate acestea, deși încă nu trebuie se verifică acest lucru, metoda ar trebui să se aplice și unui model freeCAD complet realizat.
După deschiderea fișierului, trebuie să obțineți acest lucru:
</p><p><span typeof="mw:File"><a class="mw-file-description" href="../File/Staeubli_step_import.png"><img decoding="async" height="587" src="../File/Staeubli_step_import.png" width="1024"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<p>Observați că importăm, robotul este alcătuit din 8 forme, direct pe rădăcina arborelui de documente. Structura fișierului vrml exportat se poate schimba dacă se utilizează grupuri. Formele sunt comandate de la bază la instrument. Ultima formă conține axele de rotație ale tuturor axelor robotului. Corelația dintre numele formei - numele piesei este dat de (din martie 2011) FreeCAD nu importă numele incluse în fișierele STEP:
</p>
</div>
<table class="wikitable">
<tbody><tr>
<th>FreeCAD name
</th>
<th>STEP name
</th></tr>
<tr>
<td>TX40_HB
</td>
<td>HORIZONTAL BASE CABLE OUTLET
</td></tr>
<tr>
<td>TX40_HB001
</td>
<td>SHOULDER
</td></tr>
<tr>
<td>TX40_HB002
</td>
<td>ARM
</td></tr>
<tr>
<td>TX40_HB003
</td>
<td>ELBOW
</td></tr>
<tr>
<td>TX40_HB004
</td>
<td>FOREARM
</td></tr>
<tr>
<td>TX40_HB005
</td>
<td>WRIST
</td></tr>
<tr>
<td>TX40_HB006
</td>
<td>TOOL FLANGE
</td></tr>
<tr>
<td>TX40_HB007
</td>
<td>?
</td></tr></tbody></table>
<div class="mw-translate-fuzzy">
<p>Pentru acest import, schimbați "Display Mode" pentru fiecare formă, exceptând TX40_HB007, de la "Flat Lines" la "Shaded" pentru exportul vrml pentru a arăta bine. Am schimbat de asemenea culoarile la [245, 196, 0] și [204, 204, 204] pentru a corespunde mai bine cu galbenul Stäubli's. Ascunde  TX40_HB007 deoarece conține axele tuturorl articulațiilor și nu poate fi luat de o parte.
</p>
</div>
<h2><span id="M.C4.83sura.C8.9Bi_caracteristicile_geometrice"></span><span class="mw-headline" id="Măsurați_caracteristicile_geometrice">Măsurați caracteristicile geometrice</span></h2>
<p>În vederea construirii tabelului Denavit-Hartenberg (see <a href="../Robot_6-Axis.html" title="Robot 6-Axis">Robot 6-Axis</a>) și pregătiți fișierul vrml, trebuie să obțineți caracteristicile robotului. Deocamdată, instrumentul de măsurare FreeCAD nu este gata, puteți utiliza axele incluse în TX40_HB007 (coordonatele sunt indicate în partea stângă jos atunci când indicați un obiect cu mouse-ul) sau trebuie să utilizați consola Python pentru a obține unele informații despre geometrie. Rețineți că tabelul DH este necesar numai dacă trebuie să utilizați cinematica inversă, adică să obțineți coordonatele carteziene sau să dirijați robotul cu coordonate carteziene.
Tabelul DH-table pentru acest robot este următorul (mm, deg and deg/s):
</p>
<table class="wikitable">
<tbody><tr>
<th>i
</th>
<th>d
</th>
<th>θ
</th>
<th>r
</th>
<th>α
</th>
<th>θmin
</th>
<th>θmax
</th>
<th>Axis velocity
</th></tr>
<tr>
<td>1
</td>
<td>320
</td>
<td>q1
</td>
<td>0
</td>
<td>-90
</td>
<td>-180
</td>
<td>180
</td>
<td>555
</td></tr>
<tr>
<td>2
</td>
<td>35
</td>
<td>q2 - 90
</td>
<td>225
</td>
<td>0
</td>
<td>-125
</td>
<td>125
</td>
<td>475
</td></tr>
<tr>
<td>3
</td>
<td>0
</td>
<td>q3 + 90
</td>
<td>0
</td>
<td>90
</td>
<td>-138
</td>
<td>138
</td>
<td>585
</td></tr>
<tr>
<td>4
</td>
<td>225
</td>
<td>q4
</td>
<td>0
</td>
<td>-90
</td>
<td>-270
</td>
<td>270
</td>
<td>1035
</td></tr>
<tr>
<td>5
</td>
<td>0
</td>
<td>q5
</td>
<td>0
</td>
<td>90
</td>
<td>-120
</td>
<td>133.5
</td>
<td>1135
</td></tr>
<tr>
<td>6
</td>
<td>65
</td>
<td>q6
</td>
<td>0
</td>
<td>0
</td>
<td>-270
</td>
<td>270
</td>
<td>1575
</td></tr></tbody></table>
<p>Atunci fișierul csv file este :
</p>
<pre>a  , alpha, d  , theta, rotDir, maxAngle, minAngle, AxisVelocity
0  ,   -90, 320,     0,      1,      180,     -180, 555
225,     0,  35,   -90,      1,      125,     -125, 475
0  ,    90,   0,    90,      1,      138,     -138, 585
0  ,   -90, 225,     0,      1,      270,     -270, 1035
0  ,    90,   0,     0,      1,    133.5,     -120, 1135
0  ,     0,  65,     0,      1,      270,     -270, 1575
</pre>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Export_la_vrml">Export la vrml</span></h2>
<p>Exportați documentul într-un fișier vrml. Structura fișierului vrml este următoarea:
</p>
</div>
<p><code>
</code></p><code><pre>#VRML V2.0 utf8


Group {
  children 
    Group {
      children [ 
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        },
          
        Group {
        …

        } ]

    }

}
</pre></code><code></code><p><code></code>
</p><p>Puteți observa că avem 8 grupuri independente care corespund celor 8 forme.
</p>
<div class="mw-translate-fuzzy">
<h2><span id="Preg.C4.83tirea_fi.C8.99ierului_vrml"></span><span class="mw-headline" id="Pregătirea_fișierului_vrml">Pregătirea fișierului vrml</span></h2>
<p>Toate formele din fișierul vrml sunt exprimate în cadrul de bază, independente una de celălaltă. Pentru Atelierul Robot Simulation Workbench, trebuie să creăm o structură în care o mișcare a unei forme induce o mișcare a tuturor formelor situate ulterior în structură. Plasarea formelor va fi relativă la forma precedentă, așa că trebuie să includem câteva translații din sistemul de referință absolut la cel relativ.
Translațiile descrise în următoarea imagine:
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Staeubli_important_points.png"><img decoding="async" height="418" src="../File/Staeubli_important_points.png" width="177"/></a></span>
</p><p>With
</p>
<dl><dd>A=(0, 0, 168)</dd>
<dd>B=(0, 107.8, 320)</dd>
<dd>C=(0, 104.15, 545)</dd>
<dd>D=(0, 35, 601)</dd>
<dd>E=(0, 35, 770)</dd>
<dd>F=(0, 35, 835).</dd></dl>
<p>Să luăm un exemplu în 4 axe întere ELBOW și FOREARM, situat la D=(xd, yd, zd). Ancora pentru axa FreeCAD este
<code>
</code></p><code><pre>"DEF FREECAD_AXIS4 Transform { rotation 0 1 0 0 children ["
</pre></code><code></code><p><code></code>
</p>
<div class="mw-translate-fuzzy">
<p>Aceasta corespunde unei rotații în jurul axei y. În modelul CAD, rotația este în jurul axei z. Astfel, avem nevoie de o rotație în jurul axei x a &lt;math&gt; \ pi &lt;/ math&gt; înaintea definiției axei FreeCAD și a &lt;math&gt; - \ pi &lt;/ math&gt; după aceasta. De asemenea, este necesară o translație (-xd, -yd, -zd) chiar înainte ca grupul care corespunde definiției FOREARM să o exprime în cadrul de referință relativ centrat(D) Asata înseamnă că o translație (xd,yd,zd)trebuie să fie introduse înainte de prima rotație.
La final, fișierul vrml de la definiția ELBOW la definiția FOREARM arată astfel:
</p>
</div>
<p><code>
</code></p><code><pre>      # ELBOW
      Group {
        … here comes the unmodified definition of ELBOW
  
      },
        
      Transform {
        translation 0 35 601
        rotation 1 0 0 1.5707963
        children
          DEF FREECAD_AXIS4 Transform { rotation 0 1 0 0 children
            Transform {
              rotation 1 0 0 -1.5707963
              children
                Transform {
                  translation 0 -35 -601
                  children [
      # FOREARM  
      Group {
        ... here comes the unmodified definition of FOREARM
  
      },
</pre></code><code></code><p><code></code>
</p><p>La sfârșitul documentului, trebuie introduse parantezele de închidere corespunzătoare: <code>  ]}}}},</code>  
Pentru fiecare din cele 6 axe. În cele din urmă, documentul arată astfel (nu știu dacă poate fi conectat fișierul aici din cauza drepturilor de autor):
<code>
</code></p><code><pre>#VRML V2.0 utf8
  
  
Group {
  children
  Group {
    children [ 
      # HORIZONTAL BASE CABLE OUTLET 
      Group {
          ... here comes the unmodified definition of HORIZONTAL BASE CABLE OUTLET
   
      },
        
      Transform {
        translation 0 0 168
        rotation 1 0 0 1.5707963
        children
          DEF FREECAD_AXIS1 Transform { rotation 0 1 0 0 children
            Transform {
              rotation 1 0 0 -1.5707963
              children
                Transform {
                  translation 0 0 -168
                  children [
      # SHOULDER
      Group {
          ... here comes the unmodified definition of SHOULDER 
  
      },
        
      Transform {
        translation 0 107.8 320
        #rotation 0 0 1 0
        children
          DEF FREECAD_AXIS2 Transform { rotation 0 1 0 0 children
            Transform {
              #rotation 0 0 1 0
              children
                Transform {
                  translation 0 -107.8 -320
                  children [
      # ARM  
      Group {
          ... here comes the unmodified definition of ARM 
  
      },
        
      Transform {
        translation 0 104.15 545
        #rotation 0 0 1 0
        children
          DEF FREECAD_AXIS3 Transform { rotation 0 1 0 0 children
            Transform {
              #rotation 0 0 1 0
              children
                Transform {
                  translation 0 -104.15 -545
                  children [
      # ELBOW
      Group {
          ... here comes the unmodified definition of ELBOW
  
      },
        
      Transform {
        translation 0 35 601
        rotation 1 0 0 1.5707963
        children
          DEF FREECAD_AXIS4 Transform { rotation 0 1 0 0 children
            Transform {
              rotation 1 0 0 -1.5707963
              children
                Transform {
                  translation 0 -35 -601
                  children [
      # FOREARM  
      Group {
          ... here comes the unmodified definition of FOREARM
  
      },
        
      Transform {
        translation 0 35 770
        #rotation 0 0 1 0
        children
          DEF FREECAD_AXIS5 Transform { rotation 0 1 0 0 children
            Transform {
              #rotation 0 0 1 0
              children
                Transform {
                  translation 0 -35 -770
                  children [
      # WRIST
      Group {
          ... here comes the unmodified definition of WRIST
  
      },
        
      Transform {
        translation 0 35 835
        rotation 1 0 0 1.5707963
        children
          DEF FREECAD_AXIS6 Transform { rotation 0 1 0 0 children
            Transform {
              rotation 1 0 0 -1.5707963
              children
                Transform {
                  translation 0 -35 -835
                  children [
      # TOOL FLANGE
      Group {
          ... here comes the unmodified definition of TOOL FRAME
  
      },
        
      Group {
          ... here comes the unmodified definition of TX40_HB007
  
      } # "]" was deleted from this line
    ]}}}},
    ]}}}},
    ]}}}},
    ]}}}},
    ]}}}},
    ]}}}},
    ] # this is the "]" deleted from the line above
  }
}
</pre></code><code></code><p><code></code>
</p>
<div class="mw-translate-fuzzy">
<p>Iată un patch pentru a obține fișierul vrml potrivit pentru simularea robotului:
</p>
</div>
<p><code>
</code></p><code><pre>7a8
&gt;         # HORIZONTAL BASE CABLE OUTLET 
95968a95970,95981
&gt;         Transform {
&gt;           translation 0 0 168
&gt;           rotation 1 0 0 1.5707963
&gt;           children
&gt;             DEF FREECAD_AXIS1 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 rotation 1 0 0 -1.5707963
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 0 -168
&gt;                     children [
&gt;         # SHOULDER
128428a128442,128453
&gt;         Transform {
&gt;           translation 0 107.8 320
&gt;           #rotation 0 0 1 0
&gt;           children
&gt;             DEF FREECAD_AXIS2 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 #rotation 0 0 1 0
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 -107.8 -320
&gt;                     children [
&gt;         # ARM  
206503a206529,206540
&gt;         Transform {
&gt;           translation 0 104.15 545
&gt;           #rotation 0 0 1 0
&gt;           children
&gt;             DEF FREECAD_AXIS3 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 #rotation 0 0 1 0
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 -104.15 -545
&gt;                     children [
&gt;         # ELBOW
267111a267149,267160
&gt;         Transform {
&gt;           translation 0 35 601
&gt;           rotation 1 0 0 1.5707963
&gt;           children
&gt;             DEF FREECAD_AXIS4 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 rotation 1 0 0 -1.5707963
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 -35 -601
&gt;                     children [
&gt;         # FOREARM  
417854a417904,417915
&gt;         Transform {
&gt;           translation 0 35 770
&gt;           #rotation 0 0 1 0
&gt;           children
&gt;             DEF FREECAD_AXIS5 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 #rotation 0 0 1 0
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 -35 -770
&gt;                     children [
&gt;         # WRIST
422053a422115,422126
&gt;         Transform {
&gt;           translation 0 35 835
&gt;           rotation 1 0 0 1.5707963
&gt;           children
&gt;             DEF FREECAD_AXIS6 Transform { rotation 0 1 0 0 children
&gt;               Transform {
&gt;                 rotation 1 0 0 -1.5707963
&gt;                 children
&gt;                   Transform {
&gt;                     translation 0 -35 -835
&gt;                     children [
&gt;         # TOOL FLANGE
435627c435700,435707
&lt;         } ]
---
&gt;         } 
&gt;       ]}}}},
&gt;       ]}}}},
&gt;       ]}}}},
&gt;       ]}}}},
&gt;       ]}}}},
&gt;       ]}}}},
&gt;       ]
</pre></code><code></code><p><code></code>
</p>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20241214203049
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.066 seconds
Real time usage: 0.111 seconds
Preprocessor visited node count: 64/1000000
Post‐expand include size: 1029/2097152 bytes
Template argument size: 163/2097152 bytes
Highest expansion depth: 3/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 2373/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    7.689      1 -total
 67.50%    5.190      1 Template:TutorialInfo/ro
 16.26%    1.250      1 Template:VeryImportantMessage
 13.71%    1.054      1 Template:Clear
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:100877-0!canonical and timestamp 20241214203049 and revision id 633037. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
