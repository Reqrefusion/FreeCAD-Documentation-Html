<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Manual:Creating parametric objects/it</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../de\Manual;Creating_parametric_objects.html" lang="de" title="Handbuch:Erstellung parametrischer Objekte (8% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Manual;Creating_parametric_objects.html" lang="en" title="Manual:Creating parametric objects (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="../fr\Manual;Creating_parametric_objects.html" lang="fr" title="Manuel : Création d'objets paramétriques (41% translated)">français</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" dir="ltr" lang="it">italiano</span></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../pl\Manual;Creating_parametric_objects.html" lang="pl" title="Podręcznik:Tworzenie obiektów parametrycznych (32% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../ro\Manual;Creating_parametric_objects.html" lang="ro" title="Manual:Crearea de obiecte parametrice (35% translated)">română</a></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../ru\Manual;Creating_parametric_objects.html" lang="ru" title="Создание параметрических объектов (27% translated)">русский</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../it\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/it">Creare e manipolare la geometria</a></div>
<div style="margin: 4px 0; float: right;"><a href="../it\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/it">Creare interfacce di strumenti</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../it\Manual;Introduction.html" title="Manual:Introduction/it">Pagina iniziale del manuale</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="manualtoc" id="toc" style="float:right; margin:10px 0px 10px 10px;">
<ul><li><a href="../it\Manual;Introduction.html" title="Manual:Introduction/it">Introduzione</a></li>
<li>Scoprire FreeCAD
<ul><li><a href="../it\Manual;What_is_FreeCAD.html" title="Manual:What is FreeCAD/it">Che cosa è FreeCAD?</a></li>
<li><a href="../it\Manual;Installing.html" title="Manual:Installing/it">Installazione</a>
<ul><li><a href="../it\Manual;Installing.html#Installazione_in_Windows" title="Manual:Installing/it">Installazione in Windows</a></li>
<li><a href="../it\Manual;Installing.html#Installazione_in_Linux" title="Manual:Installing/it">Installazione in Linux</a></li>
<li><a href="../it\Manual;Installing.html#Installazione_in_Mac_OS" title="Manual:Installing/it">Installazione in Mac OS</a></li>
<li><a href="../it\Manual;Installing.html#Disinstallazione" title="Manual:Installing/it">Disinstallazione</a></li>
<li><a href="../it\Manual;Installing.html#Impostare_le_preferenze_di_base" title="Manual:Installing/it">Impostare le preferenze di base</a></li>
<li><a href="../it\Manual;Installing.html#Installare_dei_contenuti_aggiuntivi" title="Manual:Installing/it">Installare dei contenuti aggiuntivi</a></li></ul></li>
<li><a href="../it\Manual;The_FreeCAD_Interface.html" title="Manual:The FreeCAD Interface/it">Interfaccia di FreeCAD</a>
<ul><li><a href="../it\Manual;The_FreeCAD_Interface.html#Gli_ambienti_di_lavoro" title="Manual:The FreeCAD Interface/it">Gli ambienti di lavoro</a></li>
<li><a href="../it\Manual;The_FreeCAD_Interface.html#L'interfaccia" title="Manual:The FreeCAD Interface/it">L'interfaccia</a></li>
<li><a href="../it\Manual;The_FreeCAD_Interface.html#Personalizzare_l'interfaccia" title="Manual:The FreeCAD Interface/it">Personalizzare l'interfaccia</a></li></ul></li>
<li><a href="../it\Manual;Navigating_in_the_3D_view.html" title="Manual:Navigating in the 3D view/it">Navigare nella vista 3D</a>
<ul><li><a href="../it\Manual;Navigating_in_the_3D_view.html#Alcune_parole_sullo_spazio_3D" title="Manual:Navigating in the 3D view/it">Alcune parole sullo spazio 3D</a></li>
<li><a href="../it\Manual;Navigating_in_the_3D_view.html#La_vista_3D_di_FreeCAD" title="Manual:Navigating in the 3D view/it">La vista 3D di FreeCAD</a></li>
<li><a href="../it\Manual;Navigating_in_the_3D_view.html#Selezionare_gli_oggetti" title="Manual:Navigating in the 3D view/it">Selezionare gli oggetti</a></li></ul></li>
<li><a href="../it\Manual;The_FreeCAD_document.html" title="Manual:The FreeCAD document/it">I documenti di FreeCAD</a></li>
<li><a href="../it\Manual;Parametric_objects.html" title="Manual:Parametric objects/it">Gli oggetti parametrici</a></li>
<li><a href="../it\Manual;Import_and_export_to_other_filetypes.html" title="Manual:Import and export to other filetypes/it">Importare ed esportare altri tipi di file</a></li></ul></li>
<li>Lavorare con FreeCAD
<ul><li><a href="../it\Manual;All_workbenches_at_a_glance.html" title="Manual:All workbenches at a glance/it">Panoramica sugli ambienti di lavoro</a></li>
<li><a href="../it\Manual;Traditional_modeling,_the_CSG_way.html" title="Manual:Traditional modeling, the CSG way/it">Modellazione tradizionale, <br/> il metodo CSG</a></li>
<li><a href="../it\Manual;Traditional_2D_drafting.html" title="Manual:Traditional 2D drafting/it">Disegno 2D tradizionale</a></li>
<li><a href="../it\Manual;Modeling_for_product_design.html" title="Manual:Modeling for product design/it">Modellazione per la progettazione <br/> del prodotto </a></li>
<li><a href="../it\Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing/it">Preparare i modelli per la stampa 3D</a>
<ul><li><a href="../it\Manual;Preparing_models_for_3D_printing.html#Esportare_nello_slicer" title="Manual:Preparing models for 3D printing/it">Esportare nello slicer</a></li>
<li><a href="../it\Manual;Preparing_models_for_3D_printing.html#Convertire_gli_oggetti_in_mesh" title="Manual:Preparing models for 3D printing/it">Convertire gli oggetti in mesh</a></li>
<li><a href="../it\Manual;Preparing_models_for_3D_printing.html#Utilizzare_Slic3r" title="Manual:Preparing models for 3D printing/it">Utilizzare Slic3r</a></li>
<li><a href="../it\Manual;Preparing_models_for_3D_printing.html#Utilizzare_l'addon_Cura" title="Manual:Preparing models for 3D printing/it">Utilizzare l'addon Cura</a></li>
<li><a href="../it\Manual;Preparing_models_for_3D_printing.html#Generare_il_G-code" title="Manual:Preparing models for 3D printing/it">Generare il G-code</a></li></ul></li>
<li><a href="../it\Manual;Generating_2D_drawings.html" title="Manual:Generating 2D drawings/it">Generare disegni 2D</a></li>
<li><a href="../it\Manual;BIM_modeling.html" title="Manual:BIM modeling/it">Modellazione BIM</a></li>
<li><a href="../it\Manual;Using_spreadsheets.html" title="Manual:Using spreadsheets/it">Usare i fogli di calcolo</a>
<ul><li><a href="../it\Manual;Using_spreadsheets.html#Leggere_le_proprietà" title="Manual:Using spreadsheets/it">Leggere le proprietà</a></li>
<li><a href="../it\Manual;Using_spreadsheets.html#Scrivere_le_proprietà" title="Manual:Using spreadsheets/it">Scrivere le proprietà</a></li></ul></li>
<li><a href="../it\Manual;Creating_FEM_analyses.html" title="Manual:Creating FEM analyses/it">Creare analisi FEM</a></li>
<li><a href="../it\Manual;Creating_renderings.html" title="Manual:Creating renderings/it">Creare rendering</a></li></ul></li>
<li>Script Python
<ul><li><a href="../it\Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/it">Una breve introduzione</a>
<ul><li><a href="../it\Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/it">Scrivere del codice Python</a></li>
<li><a href="../it\Manual;A_gentle_introduction.html#Manipolare_gli_oggetti_di_FreeCAD" title="Manual:A gentle introduction/it">Manipolare gli oggetti di FreeCAD</a></li>
<li><a href="../it\Manual;A_gentle_introduction.html#Vettori_e_Posizionamento" title="Manual:A gentle introduction/it">Vettori e Posizionamento</a></li></ul></li>
<li><a href="../it\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/it">Creare e manipolare la geometria</a></li>
<li><a class="mw-selflink selflink">Creare oggetti parametrici</a></li>
<li><a href="../it\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/it">Creare interfacce di strumenti</a></li></ul></li>
<li><a href="../it\Manual;The_Community.html" title="Manual:The Community/it">La Comunità</a></li></ul></div>
<div class="mw-translate-fuzzy">
<p>Nel <a href="../it\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/it">precedente capitolo</a>, abbiamo visto come creare una geometria Parte, e come visualizzarla sullo schermo, collegandola ad un document object "muto" (non parametrico).  Questo è noioso quando vogliamo cambiare la forma di tale oggetto. Dovremmo creare una nuova forma, poi attribuirla di nuovo al nostro oggetto.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Ma, in tutti i capitoli precedenti di questo manuale abbiamo visto anche quanto sono potenti gli oggetti parametrici. Basta cambiare una loro proprietà, e la forma viene ricalcolata al volo.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Internamente, gli oggetti parametrici non fanno nulla di diverso da quello che abbiamo appena fatto: essi ricalcolano i contenuti delle loro proprietà Shape, più e più volte, ogni volta che viene cambiata una proprietà.
</p>
</div>
<ul><li>Declares the necessary properties for the object.</li>
<li>Defines the behavior when any of these properties are modified.</li></ul>
<p>The structure of such parametric object is as simple as this:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">myParametricObject</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"MyLength"</span><span class="p">)</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"Recalculating the shape..."</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"The value of MyLength is:"</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">MyLength</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>FreeCAD fornisce un sistema molto vantaggioso per costruire questi oggetti parametrici completamente in Python. Esso consiste in una semplice classe Python, che definisce tutte le proprietà di cui l'oggetto ha bisogno, e che cosa succede quando una di queste proprietà cambia. La struttura di questo oggetto parametrico è semplice come questa:
</p>
</div>
<ul><li>Store the class itself in the <b>Proxy</b> attribute of the FreeCAD document object:</li></ul>
<p>By assigning <b>self</b> to the <b>Proxy</b> attribute of the FreeCAD document object, we link the logic of our Python class to the FreeCAD object. This means the document object will "carry" the Python class code inside itself, allowing it to behave according to the logic defined in the class. This connection enables FreeCAD to know how to interact with and recalculate the parametric object.
</p>
<ul><li>Create all the properties the object needs:</li></ul>
<p>Using the <b>addProperty</b> method, we define the custom properties required by the object. Properties act as parameters or variables for the object and can be accessed, modified, and displayed in FreeCAD's property editor. In the example, we add a floating-point property named <b>MyLength</b>. This property will later influence the shape or behavior of the object.
</p><p>class myParametricObject:
</p>
<pre>  def __init__(self,obj):
    obj.Proxy = self
    obj.addProperty("App::PropertyFloat","MyLength")
    ...
       
  def execute(self,obj):
    print ("Recalculating the shape...")
    print ("The value of MyLength is:")
    print (obj.MyLength)
    ...
</pre>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"dummy"</span><span class="p">)</span><span class="o">.</span><span class="n">supportedProperties</span><span class="p">()</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Tutte le classi Python di solito hanno un metodo __init__. Ciò che è all'interno di tale metodo viene eseguito quando tale classe viene istanziata (il che significa, in gergo di programmazione, che da quella classe è stato creato un Object Python. Pensate a una classe come a un "modello" per creare copie dal vivo di esso). Nella nostra funzione  __init__  qui facciamo due cose importanti: 1- memorizzare la nostra classe stessa nell'attributo "Proxy" del nostro oggetto del documento di FreeCAD, vale a dire, l'oggetto documento FreeCAD conterrà questo codice al suo interno, and 2- creare tutte le proprietà necessarie all'oggetto. Sono disponibili molti tipi di proprietà, è possibile ottenere l'elenco completo digitando questo codice:
</p>
</div>
<p>FreeCAD.ActiveDocument.addObject("Part::FeaturePython","dummy").supportedProperties()
</p>
<ul><li>The <b>execute</b> method is called whenever the object needs to be updated.</li>
<li>It is responsible for recalculating the shape and assigning it to the object's <b>Shape</b> attribute.</li>
<li>The <b>obj</b> argument gives access to the FreeCAD document object, enabling you to make changes programmatically.</li></ul>
<p>With this system, FreeCAD handles the rest—ensuring that the object is properly updated in the document and displayed correctly in the graphical interface.
</p>
<div class="mw-translate-fuzzy">
<p>Quindi, la seconda parte importante è il metodo execute. Tutto il codice contenuto in questo metodo viene eseguito quando l'oggetto viene contrassegnato per il ricalcolo, il che avviene quando si modifica una proprietà. Questo è tutto quello che c'è da fare. All'interno di execute, è necessario fare tutto ciò che deve essere fatto, vale a dire, calcolare una nuova forma e attribuirla all'oggetto stesso con qualcosa di simile a obj.Shape = myNewShape. Ecco perché il metodo execute prende un argomento "obj", che sarà il FreeCAD document object stesso, e in questo modo possiamo manipolarlo all'interno del nostro codice Python.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Un'ultima cosa importante da ricordare: se si creano questi oggetti parametrici in un documento di FreeCAD, quando si salva il file, il codice Python di cui sopra non viene memorizzato nel file. Questo viene fatto per motivi di sicurezza. Se un file di FreeCAD contenesse del codice, sarebbe possibile che qualcuno distribuisca dei file di FreeCAD contenenti del codice dannoso che potrebbe danneggiare i computer di altri. Quindi, se si distribuisce un file che contiene degli oggetti realizzati con il codice di cui sopra, tale codice deve essere presente anche sul computer che apre il file. Il modo più semplice per raggiungere questo obiettivo è di solito quello di salvare il codice di cui sopra in una macro, e poi distribuire la macro insieme con il file FreeCAD o condividere la macro nel <a href="../it\Macros_recipes.html" title="Macros recipes/it">FreeCAD macros repository</a>  dove chiunque può scaricarlo.
</p>
</div>
<p>Ora faremo un piccolo esercizio, costruiremo un oggetto parametrico composto da una semplice faccia rettangolare parametrica. Esempi più complessi sono disponibili negli <a href="../it\Scripted_objects.html" title="Scripted objects/it">esempi di oggetti parametrici</a> e nello  stesso <a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">codice sorgente di FreeCAD </a>.
</p><p>Diamo al nostro oggetto due proprietà: Length e Width, che useremo per costruire un rettangolo. Poi, dato che l'oggetto ha già una proprietà Placement pre-costruita (tutti gli oggetti geometrici ne hanno una di default, quindi non è necessario aggiungerla), collochiamo il rettangolo nella posizione e rotazione impostata in Placement, per fare in modo che l'utente possa poi essere in grado di spostare il rettangolo ovunque desideri modificando solo la proprietà Placement.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">ParametricRectangle</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Width"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="c1"># We need to import the FreeCAD module here too, because we might be running out of the Console</span>
        <span class="c1"># (in a macro, for example) where the FreeCAD module has not been imported automatically:</span>
        <span class="kn">import</span> <span class="nn">FreeCAD</span>
        <span class="kn">import</span> <span class="nn">Part</span>

        <span class="c1"># First we need to make sure the values of Length and Width are not 0</span>
        <span class="c1"># otherwise Part.LineSegment will complain that both points are equal:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># If yes, exit this method without doing anything:</span>
            <span class="k">return</span>

        <span class="c1"># We create 4 points for the 4 corners:</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># We create 4 edges:</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e2</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e3</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e4</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>

        <span class="c1"># We create a wire:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Wire</span><span class="p">([</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">,</span> <span class="n">e4</span><span class="p">])</span>

        <span class="c1"># We create a face:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Face</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># All shapes have a Placement too. We give our shape the value of the placement</span>
        <span class="c1"># set by the user. This will move/rotate the face automatically.</span>
        <span class="n">f</span><span class="o">.</span><span class="n">Placement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Placement</span>

        <span class="c1"># All done, we can attribute our shape to the object!</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">f</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Invece di incollare il codice precedente nella console Python, è meglio salvarlo da qualche parte, in modo da poterlo riutilizzare e modificare in un secondo tempo. Per esempio in una nuova macro (menu Strumenti -&gt; Macro -&gt; Crea). Dargli un nome, ad esempio, "ParamRectangle". Le macro FreeCAD vengono salvate con estensione .FCMacro, che però Python non riconosce quando si utilizza l'importazione. Quindi, prima di utilizzare il codice di cui sopra, bisogna rinominare il file ParamRectangle.FCMacro in ParamRectangle.py. Questo può essere fatto semplicemente, navigando con il file explorer nella cartella delle macro indicata nel menu Strumenti -&gt; Macro.
</p>
</div>
<p>Dopo, nella console Python possiamo fare questo:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">ParamRectangle</span>
</pre></div>
<p>Esplorando i contenuti di ParamRectangle, possiamo verificare che contenga la nostra classe ParamRectangle.
</p>
<div class="mw-translate-fuzzy">
<p>Per creare un nuovo oggetto parametrico utilizzando la nostra classe ParametricRectangle, usiamo il seguente codice. Notare che usiamo Part::FeaturePython invece di Part::Feature che abbiamo usato nei capitoli precedenti (The Python version allows to define our own parametric behaviour):
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">myObj</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"Rectangle"</span><span class="p">)</span>
<span class="n">ParamRectangle</span><span class="o">.</span><span class="n">ParametricRectangle</span><span class="p">(</span><span class="n">myObj</span><span class="p">)</span>
<span class="n">myObj</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># This is mandatory unless we code the ViewProvider too.</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython","Rectangle")
</p>
<pre>ParamRectangle.ParametricRectangle(myObj)
myObj.ViewObject.Proxy = 0 # this is mandatory unless we code the ViewProvider too
FreeCAD.ActiveDocument.recompute()
</pre>
<ul><li><b>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython", "Rectangle")</b>: Creates a new <b>Part::FeaturePython</b> object named <b>Rectangle</b> in the active FreeCAD document. This object is specifically designed for custom parametric behavior, allowing Python-defined logic to manage its properties and behavior.</li></ul>
<ul><li><b>ParamRectangle.ParametricRectangle(myObj)</b>: Initializes the object by associating it with the <b>ParametricRectangle</b> class from the <b>ParamRectangle</b> module or script. This links the custom Python-defined logic to the object, enabling it to act as a parametric object.</li></ul>
<ul><li><b>myObj.ViewObject.Proxy = 0</b>: Resets the <b>ViewObject.Proxy</b> attribute to 0, ensuring that the object uses FreeCAD’s default view handling. This step is required unless you define a custom ViewProvider to manage the visual representation of the object.</li></ul>
<ul><li><b>FreeCAD.ActiveDocument.recompute()</b>: Recomputes the document to update the geometry and reflect changes in the FreeCAD graphical interface, making the new object fully visible and functional</li></ul>
<div class="mw-translate-fuzzy">
<p>Sullo schermo non appare ancora nulla perché le proprietà lunghezza e larghezza sono 0, e questo attiva la condizione "do-nothing" (non fare nulla) dentro execute. Basta cambiare i valori di lunghezza e larghezza, e magicamente appare il nostro oggetto ricalcolato al-volo.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Naturalmente è noioso dover digitare queste 4 righe di codice Python ogni volta che si vuole creare un nuovo rettangolo parametrico. Un modo molto semplice per risolvere questo consiste nel mettere le 4 righe di cui sopra all'interno del file ParamRectangle.py, alla fine, dopo la fine della classe ParametricRectange (Possiamo farlo dall'editor delle Macro).
</p>
</div>
<p>Ora, quando si digita import ParamRectangle, viene automaticamente creato un nuovo rettangolo parametrico. Ancora meglio, siamo in grado di aggiungere un pulsante della barra degli strumenti che faccia proprio questo:
</p>
<div class="mw-translate-fuzzy">
<ul><li>Aprire il menu <b>Strumenti -&gt; Personalizza</b></li>
<li>Nella scheda "Macro", selezionare la macro ParamRectangle.py, compilare la descrizione come si desidera, e premere "Aggiungi":</li></ul>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_04.jpg"><img decoding="async" height="501" src="../File/Exercise_python_04.jpg" width="752"/></a></span>
</p>
</div>
<ul><li>Nella scheda Barra degli strumenti, creare una nuova barra degli strumenti personalizzata in un ambiente a scelta (o in quello globale), selezionare la macro e aggiungerla alla barra degli strumenti:</li></ul>
<div class="mw-translate-fuzzy">
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_05.jpg"><img decoding="async" height="501" src="../File/Exercise_python_05.jpg" width="752"/></a></span>
</p>
</div>
<ul><li>Questo è tutto, ora nella barra degli strumenti abbiamo un nuovo pulsante che, se cliccato, crea un rettangolo parametrico.</li></ul>
<div class="mw-translate-fuzzy">
<p>Ricordare che se si desidera distribuire a terzi i file creati con questo nuovo strumento, i riceventi devono anche avere la macro ParamRectangle.py installata sul proprio computer.
</p>
</div>
<p><b>Approfondimenti</b>
</p>
<ul><li><a href="../it\Macros_recipes.html" title="Macros recipes/it">Il repositorio delle macro di FreeCAD</a></li>
<li><a href="../it\Scripted_objects.html" title="Scripted objects/it">Esempi di oggetti parametrici</a></li>
<li><a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">Altri esempi nel codice di FreeCAD</a></li></ul>
<p><br/>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../it\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/it">Creare e manipolare la geometria</a></div>
<div style="margin: 4px 0; float: right;"><a href="../it\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/it">Creare interfacce di strumenti</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../it\Manual;Introduction.html" title="Manual:Introduction/it">Pagina iniziale del manuale</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/Power_user_hub.png"><img decoding="async" height="24" src="../File/Power_user_hub.png" width="24"/></a></span> <a href="../it\Power_users_hub.html" title="Power users hub/it">Power user documentation</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>FreeCAD scripting:</b> <a href="../it\Python.html" title="Python/it">Python</a>, <a href="../it\Introduction_to_Python.html" title="Introduction to Python/it">Introduction to Python</a>, <a href="../it\Python_scripting_tutorial.html" title="Python scripting tutorial/it">Python scripting tutorial</a>, <a href="../it\FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/it">FreeCAD Scripting Basics</a></li></ul>
<hr/>
<ul><li><b>Modules:</b> <a href="../it\Builtin_modules.html" title="Builtin modules/it">Builtin modules</a>, <a href="../it\Units.html" title="Units/it">Units</a>, <a href="../it\Quantity.html" title="Quantity/it">Quantity</a></li>
<li><b>Workbenches:</b> <a href="../it\Workbench_creation.html" title="Workbench creation/it">Workbench creation</a>, <a href="../it\Gui_Command.html" title="Gui Command/it">Gui Commands</a>, <a href="../it\Command.html" title="Command/it">Commands</a>, <a href="../it\Installing_more_workbenches.html" title="Installing more workbenches/it">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="../it\Mesh_Scripting.html" title="Mesh Scripting/it">Mesh Scripting</a>, <a href="../it\Topological_data_scripting.html" title="Topological data scripting/it">Topological data scripting</a>, <a href="../it\Mesh_to_Part.html" title="Mesh to Part/it">Mesh to Part</a>, <a href="../it\PythonOCC.html" title="PythonOCC/it">PythonOCC</a></li></ul>
<hr/>
<ul><li><b>Parametric objects:</b> <a href="../it\Scripted_objects.html" title="Scripted objects/it">Scripted objects</a>, <a href="../it\Viewprovider.html" title="Viewprovider/it">Viewproviders</a> <small>(<a href="../it\Custom_icon_in_tree_view.html" title="Custom icon in tree view/it">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="../it\Scenegraph.html" title="Scenegraph/it">Coin (Inventor) scenegraph</a>, <a href="../it\Pivy.html" title="Pivy/it">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="../it\Interface_creation.html" title="Interface creation/it">Interface creation</a>, <a href="../it\Dialog_creation.html" title="Dialog creation/it">Interface creation completely in Python</a> <small>(<a href="../it\Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/it">1</a>, <a href="../it\Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/it">2</a>, <a href="../it\Dialog_creation_setting_colors.html" title="Dialog creation setting colors/it">3</a>, <a href="../it\Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/it">4</a>, <a href="../it\PySide_usage_snippets.html" title="PySide usage snippets/it">5</a>)</small>, <a href="../it\PySide.html" title="PySide/it">PySide</a>, PySide examples <a href="../it\PySide_Beginner_Examples.html" title="PySide Beginner Examples/it">beginner</a>, <a href="../it\PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/it">intermediate</a>, <a href="../it\PySide_Advanced_Examples.html" title="PySide Advanced Examples/it">advanced</a></li>
<li><b>Macros:</b> <a href="../it\Macros.html" title="Macros/it">Macros</a>, <a href="../it\How_to_install_macros.html" title="How to install macros/it">How to install macros</a></li>
<li><b>Embedding:</b> <a href="../it\Embedding_FreeCAD.html" title="Embedding FreeCAD/it">Embedding FreeCAD</a>, <a href="../it\Embedding_FreeCADGui.html" title="Embedding FreeCADGui/it">Embedding FreeCADGui</a></li></ul>
<hr/>
<ul><li><b>Other:</b> <a href="../it\Expressions.html" title="Expressions/it">Expressions</a>, <a href="../it\Code_snippets.html" title="Code snippets/it">Code snippets</a>, <a href="../it\Line_drawing_function.html" title="Line drawing function/it">Line drawing function</a>, <a href="../it\FreeCAD_vector_math_library.html" title="FreeCAD vector math library/it">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr/>
<ul><li><b>Hubs:</b> <a href="../it\User_hub.html" title="User hub/it">User hub</a>, <a href="../it\Power_users_hub.html" title="Power users hub/it">Power users hub</a>, <a href="../it\Developer_hub.html" title="Developer hub/it">Developer hub</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241214202930
Cache expiry: 86400
Reduced expiry: false
Complications: [no‐toc‐conversion]
CPU time usage: 0.081 seconds
Real time usage: 0.088 seconds
Preprocessor visited node count: 208/1000000
Post‐expand include size: 16148/2097152 bytes
Template argument size: 5344/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 11788/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    9.576      1 -total
 32.19%    3.082      1 Template:Powerdocnavi/it
 23.78%    2.277      1 Template:Manual:TOC
 21.70%    2.078      5 Template:Code
 16.68%    1.597      1 Manual:Summary/it
 14.49%    1.387      2 Template:Docnav/it
 14.46%    1.385      1 Template:Navigation_menu_2
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:74475-0!canonical and timestamp 20241214202930 and revision id 1517199. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
