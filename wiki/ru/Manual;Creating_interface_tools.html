<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Manual:Creating interface tools/ru</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--high" dir="ltr" href="../de\Manual;Creating_interface_tools.html" lang="de" title="Handbuch:Erstellen von Oberflächenwerkzeugen (66% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Manual;Creating_interface_tools.html" lang="en" title="Manual:Creating interface tools (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--high" dir="ltr" href="../fr\Manual;Creating_interface_tools.html" lang="fr" title="Manuel : Création d'outils d'interface (66% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--high" dir="ltr" href="../it\Manual;Creating_interface_tools.html" lang="it" title="Manuale:Creare interfacce di strumenti (66% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\Manual;Creating_interface_tools.html" lang="pl" title="Podręcznik:Tworzenie narzędzi interfejsu (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="../ro\Manual;Creating_interface_tools.html" lang="ro" title="Manual:Crearea de instrumente de interfață (54% translated)">română</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" dir="ltr" lang="ru">русский</span></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../ru\Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/ru">Creating parametric objects</a></div>
<div style="margin: 4px 0; float: right;"><a href="../ru\Manual;The_Community.html" title="Manual:The Community/ru">The Community</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../ru\Manual;Introduction.html" title="Manual:Introduction/ru">Manual start</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="manualtoc" id="toc" style="float:right; margin:10px 0px 10px 10px;">
<ul><li><a href="../ru\Manual;Introduction.html" title="Manual:Introduction/ru">Введение</a></li>
<li>Открываем для себя FreeCAD
<ul><li><a href="../ru\Manual;What_is_FreeCAD.html" title="Manual:What is FreeCAD/ru">Что такое FreeCAD?</a></li>
<li><a href="../ru\Manual;Installing.html" title="Manual:Installing/ru">Установка</a>
<ul><li><a href="../ru\Manual;Installing.html#Установка_под_Windows" title="Manual:Installing/ru">Установка под Windows</a></li>
<li><a href="../ru\Manual;Installing.html#Установка_в_Linux" title="Manual:Installing/ru">Установка в Linux</a></li>
<li><a href="../ru\Manual;Installing.html#Установка_в_Mac_OS" title="Manual:Installing/ru">Установка в Mac OS</a></li>
<li><a href="../ru\Manual;Installing.html#Деинсталляция" title="Manual:Installing/ru">Деинсталляция</a></li>
<li><a href="../ru\Manual;Installing.html#Установка_базовых_параметров" title="Manual:Installing/ru">Установка базовых параметров</a></li>
<li><a href="../ru\Manual;Installing.html#Установка_дополнительного_содержимого" title="Manual:Installing/ru">Установка дополнительного содержимого</a></li></ul></li>
<li><a href="../ru\Manual;The_FreeCAD_Interface.html" title="Manual:The FreeCAD Interface/ru">Интерфейс FreeCAD</a>
<ul><li><a href="../ru\Manual;The_FreeCAD_Interface.html#Верстаки" title="Manual:The FreeCAD Interface/ru">Верстаки</a></li>
<li><a href="../ru\Manual;The_FreeCAD_Interface.html#Интерфейс" title="Manual:The FreeCAD Interface/ru">Интерфейс</a></li>
<li><a href="../ru\Manual;The_FreeCAD_Interface.html#Настройка_интерфейса" title="Manual:The FreeCAD Interface/ru">Настройка интерфейса</a></li></ul></li>
<li><a href="../ru\Manual;Navigating_in_the_3D_view.html" title="Manual:Navigating in the 3D view/ru">Навигация в окне трёхмерного вида</a>
<ul><li><a href="../ru\Manual;Navigating_in_the_3D_view.html#Несколько_слов_о_трёхмерном_пространстве" title="Manual:Navigating in the 3D view/ru">Несколько слов о трёхмерном пространстве</a></li>
<li><a href="../ru\Manual;Navigating_in_the_3D_view.html#Окно_трёхмерного_вида_FreeCAD" title="Manual:Navigating in the 3D view/ru">Окно трёхмерного вида FreeCAD</a></li>
<li><a href="../ru\Manual;Navigating_in_the_3D_view.html#Выбор_объектов" title="Manual:Navigating in the 3D view/ru">Выбор объектов</a></li></ul></li>
<li><a href="../ru\Manual;The_FreeCAD_document.html" title="Manual:The FreeCAD document/ru">Документ FreeCAD</a></li>
<li><a href="../ru\Manual;Parametric_objects.html" title="Manual:Parametric objects/ru">Параметрические объекты</a></li>
<li><a href="../ru\Manual;Import_and_export_to_other_filetypes.html" title="Manual:Import and export to other filetypes/ru">Импорт и экспорт в другие типы файлов</a></li></ul></li>
<li>Работа с FreeCAD
<ul><li><a href="../ru\Manual;All_workbenches_at_a_glance.html" title="Manual:All workbenches at a glance/ru">Все верстаки одним взглядом</a></li>
<li><a href="../ru\Manual;Traditional_modeling,_the_CSG_way.html" title="Manual:Traditional modeling, the CSG way/ru">Традиционное моделирование методом КБГ</a></li>
<li><a href="../ru\Manual;Traditional_2D_drafting.html" title="Manual:Traditional 2D drafting/ru">Традиционное двумерное черчение</a></li>
<li><a href="../ru\Manual;Modeling_for_product_design.html" title="Manual:Modeling for product design/ru">Моделирование для проектирования продукта</a></li>
<li><a href="../ru\Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing/ru">Подготовка для объёмной печати</a>
<ul><li><a href="../ru\Manual;Preparing_models_for_3D_printing.html#Экспорт_в_слайсеры" title="Manual:Preparing models for 3D printing/ru">Экспорт в слайсеры</a></li>
<li><a href="../ru\Manual;Preparing_models_for_3D_printing.html#Преобразование_объектов_в_сетки" title="Manual:Preparing models for 3D printing/ru">Преобразование объектов в сетки</a></li>
<li><a href="../ru\Manual;Preparing_models_for_3D_printing.html#Использование_Slic3r" title="Manual:Preparing models for 3D printing/ru">Использование Slic3r</a></li>
<li><a href="../ru\Manual;Preparing_models_for_3D_printing.html#Использование_плагина_Cura" title="Manual:Preparing models for 3D printing/ru">Использование плагина Cura</a></li>
<li><a href="../ru\Manual;Preparing_models_for_3D_printing.html#Генерация_G-кода" title="Manual:Preparing models for 3D printing/ru">Генерация G-кода</a></li></ul></li>
<li><a href="../ru\Manual;Generating_2D_drawings.html" title="Manual:Generating 2D drawings/ru">Создание двумерных чертежей</a></li>
<li><a href="../ru\Manual;BIM_modeling.html" title="Manual:BIM modeling/ru">Моделирование BIM</a></li>
<li><a href="../ru\Manual;Using_spreadsheets.html" title="Manual:Using spreadsheets/ru">Использование электронных таблиц</a>
<ul><li><a href="../ru\Manual;Using_spreadsheets.html#Чтение_свойств" title="Manual:Using spreadsheets/ru">Чтение свойств</a></li>
<li><a href="../ru\Manual;Using_spreadsheets.html#Запись_свойств" title="Manual:Using spreadsheets/ru">Запись свойств</a></li></ul></li>
<li><a href="../ru\Manual;Creating_FEM_analyses.html" title="Manual:Creating FEM analyses/ru">Создание анализа методом конечных элементов</a></li>
<li><a href="../ru\Manual;Creating_renderings.html" title="Manual:Creating renderings/ru">Визуализация проекта</a></li></ul></li>
<li>Написание скриптов на Python
<ul><li><a href="../ru\Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/ru">Простое введение</a>
<ul><li><a href="../ru\Manual;A_gentle_introduction.html#Написание_кода_на_Python" title="Manual:A gentle introduction/ru">Написание кода на Python</a></li>
<li><a href="../ru\Manual;A_gentle_introduction.html#Манипуляция_объектами_FreeCAD" title="Manual:A gentle introduction/ru">Манипуляция объектами FreeCAD</a></li>
<li><a href="../ru\Manual;A_gentle_introduction.html#Векторы_и_места_размещения" title="Manual:A gentle introduction/ru">Векторы и места размещения</a></li></ul></li>
<li><a href="../ru\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/ru">Создание и манипуляция геометрией</a></li>
<li><a href="../ru\Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/ru">Создание параметрических объектов</a></li>
<li><a class="mw-selflink selflink">Создание инструментов интерфейса</a></li></ul></li>
<li><a href="../ru\Manual;The_Community.html" title="Manual:The Community/ru">Сообщество</a></li></ul></div>
<p>В последних двух главах мы видели как <a href="../ru\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/ru">создать геометрию Part</a> и <a href="../ru\Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/ru">создавать параметрический объекты</a>. Чтобы получить полный контроль за FreeCAD, осталось одно: создание инструментов, взаимодействующими с пользователем.
</p><p>В большинстве случаев не стоит подвергать пользователя испытанию, когда объект конструируется с нулевыми значениями, как мы делали с прямоугольником в предыдущей главе, и затем спрашивать пользователя заполнить значения Height и Width в панели Properties. Это работает для очень малого числа объектов, но становится утомительным когда надо создать их во множестве. Лучше иметь возможность задавать Height и Width при создании прямоугольника.
</p><p>Python предоставляет базовые инструменты для ввода пользовательского текста на экране:
</p>
<pre>text = raw_input("Height of the rectangle?")
print("The entered height is ",text)
</pre>
<p>Тем не менее, для этого нужна запущенная консоль Python, и при запуске нашего кода как макроса мы не всегда уверены, что консоль Python работает на пользовательской машине.
</p>
<div class="mw-translate-fuzzy">
<p><a class="external text" href="https://ru.wikipedia.org/wiki/Графический_интерфейс_пользователя" rel="nofollow">Графический интерфейс пользователя</a>, или ГИП, GUI, то есть все части FreeCAD, отображаемые на экране (меню, панели инструментов, окно трёхмерного вида и так далее) как раз для этого: взаимодействия с пользователем. Интерфейс FreeCAD построен на <a class="external text" href="https://ru.wikipedia.org/wiki/Qt" rel="nofollow">Qt</a>, широко распространённая библиотека ГИП, предоставляющая широкий набор инструментов вроде диалоговых боксов, кнопок, панелей, меток, полей ввода, или ниспадающих меню. В целом они все называются "виджетами".
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Инструменты Qt очень легко использовать из Python, благодаря модулю Python, называемому <a class="external text" href="https://ru.wikipedia.org/wiki/PySide" rel="nofollow">Pyside</a> (есть и другие модули Python для взаимодействия с Qt из Python). Этот модуль обеспечивает создание и взаимодействовать с виджетами, считывать что пользователи делают с ними (что вписывают в текстовые боксы) или делать что-то когда, например, нажимается кнопка.
</p>
</div>
<p>One of the key advantages of Qt is its cross-platform compatibility, enabling FreeCAD to run seamlessly on different operating systems like Windows, macOS, and Linux. Additionally, Qt’s flexibility makes it easy for developers to extend or customize FreeCAD’s interface, either by creating new toolbars and menus or by building entirely new modules that integrate into the software. This adaptability ensures that FreeCAD remains both user-friendly and highly extensible.
</p><p>For users interested in scripting or developing new tools, FreeCAD's Python API also provides access to many Qt features. This means you can not only automate tasks but also create custom widgets or dialogs that integrate directly into the FreeCAD environment.
</p><p>The Qt tools are very easy to use from Python, thanks to a Python module called <a class="external text" href="https://en.wikipedia.org/wiki/PySide" rel="nofollow">PySide</a>. PySide is the official Python binding for the Qt library, providing a seamless way to create and interact with widgets programmatically. It allows developers to design interfaces, manage user inputs (such as reading text from input boxes), and define actions based on user interactions, such as responding to a button press. Using PySide, you can build custom dialog boxes, menus, and toolbars directly within FreeCAD, extending its functionality in a way that integrates smoothly with its existing interface.
</p><p>PySide makes it easy to connect user actions to specific functions in your code. For example, you can set up a button so that when it’s pressed, it triggers a script to execute a command or modify an object in the 3D view. This interactive capability opens up endless possibilities for customizing workflows and automating repetitive tasks.
</p><p>В Qt так же есть другой интересный инструмент, называемый <a class="external text" href="http://doc.qt.io/qt-4.8/designer-manual.html" rel="nofollow">Qt Designer</a>, полностью встроенный в большое приложение <a class="external text" href="https://en.wikipedia.org/wiki/Qt_Creator" rel="nofollow">Qt Creator</a>. Он позволяет проектировать диалоговые боксы и интерфейсные панели графически, вместо того чтобы делать это вручную. В этой главе мы будем использовать Qt Creator для проектирование панельного виджета, который использует панель <b>Task</b> FreeCAD. Так что Вам надо скачать и установить Qt Creator с их <a class="external text" href="https://www.qt.io/ide/" rel="nofollow">официальной страницы</a>, если Вы на Windows или Mac (в Linux он обычно доступен из менеджера приложений).
</p><p>В следующем примере мы сначала с помощью Qt Creator создадим панель, которая будет запрашивать длину, ширину и высоту, затем создадим вокруг неё класс Python, который читает введённые значения, и создадим куб с данными размерами. Класс Python затем будет использоваться FreeCAD для показа и управления панели задач:
</p><p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_07.jpg"><img decoding="async" height="112" src="../File/Exercise_python_07.jpg" width="181"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<p>Начнём с создания виджета. Запустите Qt Creator, затем меню <b>File → New File or Project → Files and Classes → Qt → Qt Designer Form → Dialog without buttons</b>. Кликните <b>Next</b>, задайте имя файла для сохранения, кликните <b>Next</b>, оставьте все поля проекта со значениями по умолчанию ("&lt;none&gt;"), затем <b>Create</b>. Система задач FreeCAD автоматически добавит кнопки OK/Cancel, поэтому мы выбрали здесь диалог без кнопок.
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_06.jpg"><img decoding="async" height="877" src="../File/Exercise_python_06.jpg" width="1237"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Найдём в списке на левой панели <b>Label</b>, и перетащим её на полотно нашего виджета. Дважды кликнем размещённую метку, и изменим её текст на <b>Length</b>.</li>
<li>Правым кликом на холсте виджета выберем <b>Lay out→ Lay out in a Grid</b>. Это превратит наш виджет в сетку с пока ещё только одной ячейкой, занятой нашей первой меткой. Мы теперь можем добавить следующий элемент слева, справа, сверху или снизу от нашей первой метки, и сетка автоматически расширится.</li>
<li>Добавим ещё две метки под первой, и изменим их текст на Width и Height:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_08.jpg"><img decoding="async" height="367" src="../File/Exercise_python_08.jpg" width="897"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Теперь поместим 3 виджета <b>Double Spin Box</b> вблизи наших меток Length, Width и Height. Для каждой из них в нижней правой панели, которые показывают доступные установки для выбранных виджетов, найдите <b>Suffix</b> и установите суффикс в <b>mm</b>. У FreeCADа есть более совершенный виджет, который может поддерживать различные единицы, но он не доступен в Qt Creator по умолчанию (но может быть <a class="mw-redirect" href="../ru\Compile_on_Linux_Unix.html#Qt_designer_plugin" title="Compile on Linux/Unix/ru">вкомпилирован</a>), так что теперь мы будем использовать станданртный Double Spin Box, и мы добавим суффикс "mm", чтобы пользователи знали, в каких единицах они работают:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_09.jpg"><img decoding="async" height="609" src="../File/Exercise_python_09.jpg" width="1053"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Теперь наш виджет готов, осталось убедиться в последней вещи. Поскольку FreeCAD должен иметь доступ к нему и читать значения Length, Width и Height, нам надо дать этим виджетам подходящие имена, чтобы мы могли легко получить их из FreeCAD. Кликните каждый из этих полей ввода, и в верхнем правом окне дважды кликните их Object Name, и измените его во что-то лёгкое для запоминания, например: BoxLength, BoxWidth и BoxHeight:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_10.jpg"><img decoding="async" height="513" src="../File/Exercise_python_10.jpg" width="979"/></a></span>
</p>
<ul><li>Сохраните файл, и можете закрыть Qt Creator, остальное будет сделано в Python.</li>
<li>Откройте FreeCAD и создайте новый макрос из меню <b>Макросы → Макрос</b></li>
<li>Вставьте следующий код. Убедитесь, что Вы изменили путь к файлу на тот, где вы сохранили файл .ui, созданный в QtCreator:</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span><span class="nn">FreeCADGui</span><span class="o">,</span><span class="nn">Part</span>
 
<span class="c1"># CHANGE THE LINE BELOW</span>
<span class="n">path_to_ui</span> <span class="o">=</span> <span class="s2">"C:\Users\yorik\Documents\dialog.ui"</span>
 
<span class="k">class</span> <span class="nc">BoxTaskPanel</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="c1"># this will create a Qt widget from our ui file</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">PySideUic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="n">path_to_ui</span><span class="p">)</span>
 
   <span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxLength</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxWidth</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxHeight</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
           <span class="nb">print</span><span class="p">(</span><span class="s2">"Error! None of the values can be 0!"</span><span class="p">)</span>
           <span class="c1"># we bail out without doing anything</span>
           <span class="k">return</span>
       <span class="n">box</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeBox</span><span class="p">(</span><span class="n">length</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span>
       <span class="n">Part</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
       <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">closeDialog</span><span class="p">()</span>
        
<span class="n">panel</span> <span class="o">=</span> <span class="n">BoxTaskPanel</span><span class="p">()</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">showDialog</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>В вышеуказанном коде мы использовали общую функцию (PySideUic.loadUi) из модуля FreeCADGui. Эта функция загружает файл .ui, создаёт из него виджет Qt, и сопоставляет имена, так что мы можем легко добираться до подвиджетов по их именам (пример: self.form.BoxLength).
</p>
</div>
<p>Функция "accept" это так же удобство, предлагаемое Qt. Когда в диалоге есть кнопка "OK" (которая есть по умолчанию при использовании панели задач FreeCAD), любая функция, называемая "accept" автоматически выполняется когда нажата кнопка "OK". Соответственно, Вы можете так же добавить функцию "reject", которая будет исполняться когда будет нажата кнопка "Cancel". В нашем случае мы опустили эту функцию, так что нажатие "Cancel" обрабатывается по умолчанию (ничего не делает и закрывает диалог).
</p><p>Если мы создадим функции accept или reject, их действие по умолчанию (ничего не делать и закрыть) больше не сработает. Так что нам надо закрывать панель Task самостоятельно. Это делается с помощью:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">closeDialog</span><span class="p">()</span>
</pre></div>
<p>Когда у нас есть BoxTaskPanel, в которой: 1- виджет "self.form", и 2- при необходимости функции accept и reject, мы можем открыть с её помощью панель задач, что делается этими двумя последними строчками:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">panel</span> <span class="o">=</span> <span class="n">BoxTaskPanel</span><span class="p">()</span>
 <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">showDialog</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Заметьте, что создаваемый PySideUic.loadUi виджет не специффичен для FreeCAD, это стандартный виджет Qt, который может использоваться в других инструментах Qt. Например, мы можем показывать отдельное диалоговое окно с его помощью. Попробуем это в консоли Python FreeCADа (разумеется, используя правильный путь к вашему файлу .ui):
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">PySide</span> <span class="kn">import</span> <span class="n">QtGui</span>
 <span class="n">w</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">PySideUic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="s2">"C:\Users\yorik\Documents\dialog.ui"</span><span class="p">)</span>
 <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<p>Разумеется, мы не добавляем в наш диалог никакую кнопку "OK" или "Cancel", поскольку сделан для использования из панели Task FreeCADа, которая содержит эти кнопки. Так что этот диалог нельзя закрыть (кроме как нажав кнопку закрытия окна). Но функция show() создаёт немодальный диалог, то есть он не блокирует остальной интерфейс. Поэтому, когда диалог всё ещё открыт, мы можем читать значения полей:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">w</span><span class="o">.</span><span class="n">BoxHeight</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</pre></div>
<p>Это очень полезно для тестирования.
</p><p>В итоге, не забудьте, что в FreeCAD Wiki гораздо больше документации об использовании виджетов Qt, в секции <a href="../ru\Power_users_hub.html" title="Power users hub/ru">Python Scripting</a>, которая содержит <a href="../ru\Dialog_creation.html" title="Dialog creation/ru">руководство по созданию диалогов</a>, специальное <a href="../ru\PySide.html" title="PySide/ru">руководство по PySide</a>, которое шире описывает тему.
</p>
<h2><span id=".D0.A1.D0.B2.D1.8F.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D0.B5_.D1.81.D1.81.D1.8B.D0.BB.D0.BA.D0.B8"></span><span class="mw-headline" id="Связанные_ссылки">Связанные ссылки</span></h2>
<ul><li><a class="external text" href="https://en.wikipedia.org/wiki/Qt_Creator" rel="nofollow">Документация Qt Creator</a></li>
<li><a class="external text" href="https://www.qt.io/ide/" rel="nofollow">Установка Qt Creator</a></li>
<li><a href="../ru\Power_users_hub.html" title="Power users hub/ru">Документация по скриптам на Python в FreeCAD</a></li>
<li><a href="../ru\Dialog_creation.html" title="Dialog creation/ru">Учебник создания диалогов FreeCAD</a></li>
<li><a href="../ru\PySide.html" title="PySide/ru">Учебник PySide для FreeCAD</a></li>
<li><a class="external text" href="http://srinikom.github.io/pyside-docs/index.html" rel="nofollow">Документация PySide</a></li></ul>
<p><br/>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../ru\Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/ru">Creating parametric objects</a></div>
<div style="margin: 4px 0; float: right;"><a href="../ru\Manual;The_Community.html" title="Manual:The Community/ru">The Community</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../ru\Manual;Introduction.html" title="Manual:Introduction/ru">Manual start</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/Power_user_hub.png"><img decoding="async" height="24" src="../File/Power_user_hub.png" width="24"/></a></span> <a href="../ru\Power_users_hub.html" title="Power users hub/ru">Power user documentation</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>FreeCAD scripting:</b> <a href="../ru\Python.html" title="Python/ru">Python</a>, <a href="../ru\Introduction_to_Python.html" title="Introduction to Python/ru">Introduction to Python</a>, <a href="../ru\Python_scripting_tutorial.html" title="Python scripting tutorial/ru">Python scripting tutorial</a>, <a href="../ru\FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/ru">FreeCAD Scripting Basics</a></li></ul>
<hr/>
<ul><li><b>Modules:</b> <a href="../ru\Builtin_modules.html" title="Builtin modules/ru">Builtin modules</a>, <a href="../ru\Units.html" title="Units/ru">Units</a>, <a class="new" href="../index.php?title=Quantity_ru&amp;action=edit&amp;redlink=1.html" title="Quantity/ru (page does not exist)">Quantity</a></li>
<li><b>Workbenches:</b> <a href="../ru\Workbench_creation.html" title="Workbench creation/ru">Workbench creation</a>, <a href="../ru\Gui_Command.html" title="Gui Command/ru">Gui Commands</a>, <a href="../ru\Command.html" title="Command/ru">Commands</a>, <a href="../ru\Installing_more_workbenches.html" title="Installing more workbenches/ru">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="../ru\Mesh_Scripting.html" title="Mesh Scripting/ru">Mesh Scripting</a>, <a href="../ru\Topological_data_scripting.html" title="Topological data scripting/ru">Topological data scripting</a>, <a href="../ru\Mesh_to_Part.html" title="Mesh to Part/ru">Mesh to Part</a>, <a href="../ru\PythonOCC.html" title="PythonOCC/ru">PythonOCC</a></li></ul>
<hr/>
<ul><li><b>Parametric objects:</b> <a href="../ru\Scripted_objects.html" title="Scripted objects/ru">Scripted objects</a>, <a href="../ru\Viewprovider.html" title="Viewprovider/ru">Viewproviders</a> <small>(<a class="new" href="../index.php?title=Custom_icon_in_tree_view_ru&amp;action=edit&amp;redlink=1.html" title="Custom icon in tree view/ru (page does not exist)">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="../ru\Scenegraph.html" title="Scenegraph/ru">Coin (Inventor) scenegraph</a>, <a href="../ru\Pivy.html" title="Pivy/ru">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="../ru\Interface_creation.html" title="Interface creation/ru">Interface creation</a>, <a href="../ru\Dialog_creation.html" title="Dialog creation/ru">Interface creation completely in Python</a> <small>(<a class="new" href="../index.php?title=Dialog_creation_with_various_widgets_ru&amp;action=edit&amp;redlink=1.html" title="Dialog creation with various widgets/ru (page does not exist)">1</a>, <a class="new" href="../index.php?title=Dialog_creation_reading_and_writing_files_ru&amp;action=edit&amp;redlink=1.html" title="Dialog creation reading and writing files/ru (page does not exist)">2</a>, <a class="new" href="../index.php?title=Dialog_creation_setting_colors_ru&amp;action=edit&amp;redlink=1.html" title="Dialog creation setting colors/ru (page does not exist)">3</a>, <a class="new" href="../index.php?title=Dialog_creation_image_and_animated_GIF_ru&amp;action=edit&amp;redlink=1.html" title="Dialog creation image and animated GIF/ru (page does not exist)">4</a>, <a class="new" href="../index.php?title=PySide_usage_snippets_ru&amp;action=edit&amp;redlink=1.html" title="PySide usage snippets/ru (page does not exist)">5</a>)</small>, <a href="../ru\PySide.html" title="PySide/ru">PySide</a>, PySide examples <a href="../ru\PySide_Beginner_Examples.html" title="PySide Beginner Examples/ru">beginner</a>, <a href="../ru\PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/ru">intermediate</a>, <a href="../ru\PySide_Advanced_Examples.html" title="PySide Advanced Examples/ru">advanced</a></li>
<li><b>Macros:</b> <a href="../ru\Macros.html" title="Macros/ru">Macros</a>, <a href="../ru\How_to_install_macros.html" title="How to install macros/ru">How to install macros</a></li>
<li><b>Embedding:</b> <a href="../ru\Embedding_FreeCAD.html" title="Embedding FreeCAD/ru">Embedding FreeCAD</a>, <a href="../ru\Embedding_FreeCADGui.html" title="Embedding FreeCADGui/ru">Embedding FreeCADGui</a></li></ul>
<hr/>
<ul><li><b>Other:</b> <a href="../ru\Expressions.html" title="Expressions/ru">Expressions</a>, <a href="../ru\Code_snippets.html" title="Code snippets/ru">Code snippets</a>, <a href="../ru\Line_drawing_function.html" title="Line drawing function/ru">Line drawing function</a>, <a href="../ru\FreeCAD_vector_math_library.html" title="FreeCAD vector math library/ru">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr/>
<ul><li><b>Hubs:</b> <a href="../ru\User_hub.html" title="User hub/ru">User hub</a>, <a href="../ru\Power_users_hub.html" title="Power users hub/ru">Power users hub</a>, <a href="../ru\Developer_hub.html" title="Developer hub/ru">Developer hub</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241214204149
Cache expiry: 86400
Reduced expiry: false
Complications: [no‐toc‐conversion]
CPU time usage: 0.115 seconds
Real time usage: 0.616 seconds
Preprocessor visited node count: 228/1000000
Post‐expand include size: 18372/2097152 bytes
Template argument size: 3851/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 7190/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  480.057      1 -total
 97.95%  470.197      5 Template:Code
  0.83%    3.990      1 Template:Manual:TOC
  0.69%    3.291      1 Manual:Summary/ru
  0.64%    3.064      1 Template:Powerdocnavi/ru
  0.33%    1.593      2 Template:Docnav/ru
  0.28%    1.365      1 Template:Navigation_menu_2
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:72503-0!canonical and timestamp 20241214204148 and revision id 1517220. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
