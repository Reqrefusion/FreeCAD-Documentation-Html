<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Translating an external workbench/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../de\Translating_an_external_workbench.html" lang="de" title="Übersetzen eines externen Arbeitsbereichs (89% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Translating_an_external_workbench.html" lang="en" title="Translating an external workbench (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../es\Translating_an_external_workbench.html" lang="es" title="Traduciendo un banco de trabajo externo (6% translated)">español</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../it\Translating_an_external_workbench.html" lang="it" title="Traduzione di un ambiente di lavoro esterno (2% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\Translating_an_external_workbench.html" lang="pl" title="Tłumaczenie interfejsu zewnętrznych środowisk pracy (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../pt-br\Translating_an_external_workbench.html" lang="pt-BR" title="Translating an external workbench/pt-br (2% translated)">português do Brasil</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../ru\Translating_an_external_workbench.html" lang="ru" title="Перевод внешних верстаков (14% translated)">русский</a></li></ul></div>
<p>Dans les notes suivantes, <code>"context"</code> doit être le nom de votre extension ou de votre atelier, par exemple, <code>"MySuperAddon"</code> ou <code>"DraftPlus"</code>, ou autre. Les majuscules ont leur importance ici : <code>"Context"</code> n'est pas la même chose que <code>"context"</code> par exemple. Le contexte fait en sorte que toutes les traductions de votre code seront rassemblées sous le même nom, pour être plus facilement identifiées par les traducteurs. En d'autres termes, ils sauront exactement à quelle extension ou atelier appartient une chaîne de caractères particulière.
</p><p><b>Remarque</b> : Voici un script tout-en-un qui automatise la procédure complète mentionnée ci-dessous (il est tout de même conseillé de lire la procédure pour savoir ce que le script doit faire) : <a class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py" rel="nofollow">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>.
</p><p><span id="Preparing_the_sources"></span>
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Préparer_les_sources"><span class="tocnumber">1</span> <span class="toctext">Préparer les sources</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Généralités"><span class="tocnumber">1.1</span> <span class="toctext">Généralités</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Dans_chaque_fichier_Python_.py"><span class="tocnumber">1.2</span> <span class="toctext">Dans chaque fichier Python .py</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Dans_InitGui.py"><span class="tocnumber">1.3</span> <span class="toctext">Dans InitGui.py</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#À_l'intérieur_de_chaque_classe_de_commande_de_FreeCAD"><span class="tocnumber">1.4</span> <span class="toctext">À l'intérieur de chaque classe de commande de FreeCAD</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Rassemblez_toutes_les_chaînes_de_votre_module"><span class="tocnumber">2</span> <span class="toctext">Rassemblez toutes les chaînes de votre module</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Envoyer_le_fichier_.ts_à_une_plateforme_de_traduction"><span class="tocnumber">3</span> <span class="toctext">Envoyer le fichier .ts à une plateforme de traduction</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Fusionner_les_traductions"><span class="tocnumber">4</span> <span class="toctext">Fusionner les traductions</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Compiler_les_traductions"><span class="tocnumber">5</span> <span class="toctext">Compiler les traductions</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Tester_les_traductions"><span class="tocnumber">6</span> <span class="toctext">Tester les traductions</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Remarques_importantes"><span class="tocnumber">6.1</span> <span class="toctext">Remarques importantes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Script_pratique"><span class="tocnumber">7</span> <span class="toctext">Script pratique</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Détails_techniques_et_utilisation_avancée"><span class="tocnumber">8</span> <span class="toctext">Détails techniques et utilisation avancée</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Références_importantes"><span class="tocnumber">9</span> <span class="toctext">Références importantes</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Pages_en_relation"><span class="tocnumber">10</span> <span class="toctext">Pages en relation</span></a></li>
</ul>
</div>
<h2><span id="Pr.C3.A9parer_les_sources"></span><span class="mw-headline" id="Préparer_les_sources">Préparer les sources</span></h2>
<p><span id="General"></span>
</p>
<h3><span id="G.C3.A9n.C3.A9ralit.C3.A9s"></span><span class="mw-headline" id="Généralités">Généralités</span></h3>
<ul><li>Ajouter un dossier <code>translations/</code>. Vous pouvez le nommer autrement, mais ce sera plus facile car c'est la même chose dans FreeCAD. Dans ce dossier, vous placerez les fichiers <code>.ts</code> (les fichiers de traduction "source") et les fichiers <code>.qm</code> (fichiers de traduction compilés).</li>
<li>Seul le texte affiché pour l'utilisateur dans l'interface de FreeCAD doit être traduit. Le texte affiché uniquement dans la console Python ne doit pas être traduit.</li>
<li>Le texte qui s'imprime dans la <code>FreeCAD.Console</code> est affiché dans la "vue rapport" et doit donc être traduit. La "vue rapport" est différente depuis la console Python.</li></ul>
<p><span id="In_every_Python_.py_file"></span>
</p>
<h3><span class="mw-headline" id="Dans_chaque_fichier_Python_.py">Dans chaque fichier Python .py</span></h3>
<ul><li>Dans chaque fichier où vous devez traduire du texte, vous devez définir une fonction <code>translate()</code>. Elle doit être nommée exactement <code>translate</code> : l'extracteur de chaînes de caractères s'appuie sur ce nom exact. Vous pouvez utiliser le nom entièrement qualifié de Qt, mais c'est un peu plus propre à utiliser :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="n">translate</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">translate</span>
</pre></div></dd></dl>
<ul><li>Tout le texte qui doit être traduit doit être traité par la fonction <code>translate()</code> :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"My text"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>devient :</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>Sachez que <code>translate()</code> n'est pas seulement une fonction normale : elle sert également de "balise" (tag) pour l'utilitaire de traitement de texte <code>lupdate</code>, et doit donc être nommée exactement "translate". Le programme <code>lupdate</code> est un simple processeur de texte, il n'exécute pas votre code. Vous devez passer des chaînes de caractères directement à la fonction <code>translate()</code> : vous ne pouvez pas passer de variables, de constantes, etc. Par exemple :</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># This works:</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># This does not, lupdate only sees the word "a_variable", and doesn't know what that is:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="s2">"My text"</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="n">a_variable</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># But this works -- a_variable will contain the translated string:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">a_variable</span>  <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>Ceci peut être utilisé partout : dans <code>print()</code>, dans <code>FreeCAD.Console.PrintMessage()</code>, dans les dialogues Qt, etc. Les fonctions <code>FreeCAD.Console</code> n'ajoutent pas automatiquement le caractère de nouvelle ligne (<code>\n</code>), qui doit donc être ajouté à la fin si vous le souhaitez. Ce caractère n'a pas besoin d'être traduit non plus, il peut donc se trouver en dehors de la fonction de traduction :</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<ul><li>Si vous utilisez des fichiers <code>.ui</code> réalisés avec QtDesigner, vous n'avez rien à faire de spécial avec eux.</li>
<li>Lorsque vous créez de nouveaux objets, ne traduisez pas le "Name" de l'objet. Traduisez plutôt le "Label" de l'objet. La différence est qu'un "Nom" est unique ; il reste le même pendant toute la durée de vie de l'objet ; en revanche, une "Étiquette" peut être modifiée par l'utilisateur comme il le souhaite.</li>
<li>Lorsque vous créez des propriétés pour vos objets, ne traduisez pas le nom de la propriété. Mais placez la description dans <code>QT_TRANSLATE_NOOP</code> :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyBool"</span><span class="p">,</span> <span class="s2">"MyProperty"</span><span class="p">,</span> <span class="s2">"PropertyGroup"</span><span class="p">,</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"App::Property"</span><span class="p">,</span> <span class="s2">"This is what My Property does"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>N'utilisez pas votre propre <code>"context"</code> dans ce cas précis. Gardez <code>"App::Property"</code>.</dd></dl>
<p><span id="In_InitGui.py"></span>
</p>
<h3><span class="mw-headline" id="Dans_InitGui.py">Dans InitGui.py</span></h3>
<ul><li>Ajouter la ligne suivante en haut du fichier :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<dl><dd>La macro <code>QT_TRANSLATE_NOOP</code> ne fait rien, mais elle marque les textes qui seront repris plus tard par l'utilitaire <code>lupdate</code>. Nous ne l'utilisons que dans des cas particuliers où FreeCAD s'occupe lui-même de tout.</dd></dl>
<ul><li>Pour traduire les noms des menus et des barres d'outils, utilisez le mot <code>"Workbench"</code> comme contexte :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My menu"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My toolbar"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div></dd></dl>
<ul><li>Ajoutez le chemin vers votre dossier <code>translations/</code> et mettez à jour la locale dans la fonction Initialized :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="s2">"/path/to/translations"</span><span class="p">)</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<dl><dd>Le fichier <code>InitGui.py</code> n'a pas d'attribut <b>file</b>, il n'est donc pas facile de trouver l'emplacement relatif du dossier des traductions. Une façon simple de contourner ce problème est de faire en sorte qu'il importe un autre fichier du même dossier, et de faire dans ce fichier :</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">"translations"</span><span class="p">))</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<p><span id="Inside_each_FreeCAD_command_class"></span>
</p>
<h3><span id=".C3.80_l.27int.C3.A9rieur_de_chaque_classe_de_commande_de_FreeCAD"></span><span class="mw-headline" id="À_l'intérieur_de_chaque_classe_de_commande_de_FreeCAD">À l'intérieur de chaque classe de commande de FreeCAD</span></h3>
<ul><li>Ajouter la ligne suivante en haut du fichier :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<ul><li>Traduisez les <code>'MenuText'</code> et <code>'Tooltip'</code> de la commande comme ceci :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">),</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div></dd></dl>
<dl><dd>où <code>"CommandName"</code> est le nom de la commande, défini par :</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">'CommandName'</span><span class="p">,</span> <span class="n">My_Command_Class</span><span class="p">())</span>
</pre></div></dd></dl>
<p><span id="Gather_all_the_strings_from_your_module"></span>
</p>
<h2><span id="Rassemblez_toutes_les_cha.C3.AEnes_de_votre_module"></span><span class="mw-headline" id="Rassemblez_toutes_les_chaînes_de_votre_module">Rassemblez toutes les chaînes de votre module</span></h2>
<ul><li>Vous aurez besoin des outils <code>lupdate</code>, <code>lconvert</code>, <code>lrelease</code> et <code>pylupdate</code> installés sur votre système. Dans les distributions Linux, ils sont généralement fournis dans des paquets nommés <code>pyside-tools</code> ou <code>pyside2-tools</code>. Sur certains systèmes, <code>lupdate</code> est nommé <code>lupdate4</code> ou <code>lupdate5</code> ou <code>lupdate-qt4</code> ou similaire. Idem pour les autres outils. Vous pouvez utiliser la version Qt4 ou Qt5 à votre choix. Dans Qt6 il n'y a pas de système de traduction séparé pour les fichiers Python, <code>lupdate</code> est utilisé pour extraire les chaînes de caractères de tous les types de fichiers sources.</li>
<li>Si vous avez des fichiers <code>.ui</code>, vous devez d'abord exécuter <code>lupdate</code> :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<dl><dd>Cette méthode est récursive et trouvera les fichiers <code>.ui</code> dans toute la structure de votre répertoire.</dd></dl>
<ul><li>Si vous avez des fichiers <code>.py</code>, vous devez aussi exécuter <code>pylupdate</code> :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>Si vous avez exécuté les deux opérations, vous devez maintenant unifier ces deux fichiers en un seul :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>Vérifiez le contenu des trois fichiers <code>.ts</code> pour vous assurer qu'ils contiennent les chaînes de caractères, puis vous pouvez supprimer <code>pyfiles.ts</code> et <code>uifiles.ts</code>.</li>
<li>Vous pouvez faire tout cela dans un script bash comme celui-ci :</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<p><span id="Send_the_.ts_file_to_a_translation_platform"></span>
</p>
<h2><span id="Envoyer_le_fichier_.ts_.C3.A0_une_plateforme_de_traduction"></span><span class="mw-headline" id="Envoyer_le_fichier_.ts_à_une_plateforme_de_traduction">Envoyer le fichier .ts à une plateforme de traduction</span></h2>
<p>Il est temps de faire traduire votre fichier <code>.ts</code>. Vous pouvez choisir de créer un compte sur une plateforme de traduction publique telle que <a class="external text" href="https://crowdin.com/" rel="nofollow">Crowdin</a> ou <a class="external text" href="https://www.transifex.com/" rel="nofollow">Transifex</a>, ou vous pouvez bénéficier de notre <a class="external text" href="https://crowdin.com/project/freecad-addons" rel="nofollow">compte FreeCAD existant sur Crowdin</a>, qui compte déjà de nombreux utilisateurs et qui a donc plus de chance de faire traduire votre fichier rapidement par des personnes connaissant FreeCAD.
</p><p>Si vous souhaitez héberger votre fichier sur le compte FreeCAD Crowdin, contactez <a class="external text" href="https://forum.freecadweb.org/memberlist.php?mode=viewprofile&amp;u=68" rel="nofollow">Yorik</a> sur le <a class="external text" href="https://forum.freecadweb.org/" rel="nofollow">forum FreeCAD</a>.
</p><p><i>Note:</i> certaines plates-formes comme Crowdin peuvent s'intégrer à GitHub et effectuer automatiquement tout le processus à partir des points 2, 3 et 4. Pour cela, vous ne pouvez pas utiliser le compte FreeCAD Crowdin ; vous devrez créer votre propre compte.
</p><p><span id="Merge_the_translations"></span>
</p>
<h2><span class="mw-headline" id="Fusionner_les_traductions">Fusionner les traductions</span></h2>
<p>Une fois que votre fichier <code>.ts</code> a été traduit, même partiellement, vous pouvez télécharger les traductions à partir du site :
</p>
<ul><li>Vous téléchargerez généralement un fichier <code>.zip</code> contenant un <code>.ts</code> par langue</li>
<li>Placez tous les fichiers <code>.ts</code> traduits, ainsi que votre fichier <code>.ts</code> de base, dans le dossier <code>translations/</code></li></ul>
<p><span id="Compile_the_translations"></span>
</p>
<h2><span class="mw-headline" id="Compiler_les_traductions">Compiler les traductions</span></h2>
<p>Maintenant, lancez le programme <code>lrelease</code> sur chaque fichier que vous avez:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lrelease</span> <span class="s2">"translations/Draft_de.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_fr.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_pt-BR.ts"</span>
</pre></div>
<p>Vous pouvez automatiser le processus:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">translations</span><span class="o">/*</span><span class="n">_</span><span class="o">*.</span><span class="n">ts</span>
<span class="n">do</span>
    <span class="n">lrelease</span> <span class="s2">"translations/$f"</span>
<span class="n">done</span>
</pre></div>
<p>Vous devriez trouver un fichier <code>.qm</code> pour chaque fichier <code>.ts</code> traduit. Les fichiers <code>.qm</code> sont ceux qui seront utilisés par Qt et FreeCAD au moment de l'exécution.
</p><p>C'est tout ce dont vous avez besoin. Notez que certaines parties de votre atelier ne peuvent pas être traduites à la volée si vous décidez de changer de langue. Si tel est le cas, vous devrez redémarrer FreeCAD pour que la nouvelle langue prenne effet.
</p><p><span id="Testing_translations"></span>
</p>
<h2><span class="mw-headline" id="Tester_les_traductions">Tester les traductions</span></h2>
<ol><li>Basculez FreeCAD vers une langue que vous avez traduite (par exemple l'Allemand)</li>
<li>Chargez la traduction dans FreeCAD, par exemple <code>FreeCADGui.addTranslationPath("/path/to/the/folder/containing/qmfile")</code></li>
<li>Tester quelque chose, par exemple <code>FreeCAD.Qt.translate("your context", "some string")</code></li></ol>
<p>Résultat : Cela devrait vous donner la traduction allemande. Si cela fonctionne bien, alors la configuration de base est correcte. Alors nous pouvons regarder autre chose. Par exemple, les noms des commandes devraient toujours utiliser un contexte spécial qui est le nom de la commande telle qu'elle est enregistrée dans FreeCAD.
</p><p><span id="Important_notes"></span>
</p>
<h3><span class="mw-headline" id="Remarques_importantes">Remarques importantes</span></h3>
<ul><li>Assurez-vous que vous utilisez un *contexte* et une *chaîne* qui se trouvent réellement dans le fichier ts/qm bien sûr.</li></ul>
<p><span id="Convenience_script"></span>
</p>
<h2><span class="mw-headline" id="Script_pratique">Script pratique</span></h2>
<p>Yorik maintient un script pratique pour l'atelier BIM, qui peut rassembler, charger et télécharger des fichiers ts.
Vous pouvez simplement copier et adapter ce script à votre atelier :
</p><p><a class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py" rel="nofollow">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p><p><span id="Technical_details_and_advanced_usage"></span>
</p>
<h2><span id="D.C3.A9tails_techniques_et_utilisation_avanc.C3.A9e"></span><span class="mw-headline" id="Détails_techniques_et_utilisation_avancée">Détails techniques et utilisation avancée</span></h2>
<p>Dans les exemples ci-dessus, deux fonctions distinctes sont utilisées : <code>translate()</code> et <code>QT_TRANSLATE_NOOP</code>. Vous pouvez également rencontrer <code></code> et <code>QT_TR_NOOP</code>, qui fournissent automatiquement l'argument "context" en fonction de l'emplacement de l'appel. Ces deux paires de fonctions sont fondamentalement différentes. 
</p><p><code>translate()</code> et <code>tr()</code> accomplissent deux tâches distinctes : au moment de l'exécution, elles effectuent la traduction réelle de la chaîne qui leur est passée en chaîne traduite finale. Ceci est vrai qu'on leur fournisse une chaîne littérale, une variable ou une constante : la recherche est dynamique et en temps réel pendant l'exécution du code. Toutefois, elles fournissent une fonction supplémentaire hors temps d'exécution : elles sont reconnues par l'utilitaire <code>pylupdate</code>. Si (et seulement si) elles contiennent une chaîne de caractères littérale, cette chaîne est extraite par l'utilitaire. SEULS les chaînes de caractères sont extraites par <code>pylupdate</code>. Si une variable est passée, elle est ignorée par l'utilitaire <code>pylupdate</code>. Qt essaiera de fournir une traduction au moment de l'exécution, mais cela ne fonctionnera que si un autre morceau de code a appelé une des fonctions de traduction avec la chaîne littérale qui doit être traduite, afin que <code>pylupdate</code> puisse l'extraire. Notez que le code contenant la chaîne littérale ne doit jamais être exécuté, il doit simplement exister en tant que ligne de code dans un fichier quelque part : <code>pylupdate</code> n'effectue aucune analyse ou exécution de code, il effectue simplement une recherche et une extraction de chaîne.
</p><p>En revanche, <code>QT_TRANSLATE_NOOP</code> et <code>QT_TR_NOOP</code> ne font rien du tout à l'exécution : ce sont des "no-ops" littérales et sont complètement ignorées par le code en cours d'exécution. Leur seule utilité est de marquer une chaîne littérale pour qu'elle soit extraite par <code>pylupdate</code> : il est inutile de placer une variable dans un appel à l'une de ces fonctions, cela n'aura aucun effet. Elles sont utilisées dans les cas où <code>translate()</code> ou <code>tr()</code> seront appelées avec une variable contenant le texte à traduire. Par exemple, tout code utilisé pour créer une commande ou une propriété utilisera une fonction de type NOOP autour du texte ou de l'info-bulle du menu de la commande, ou de la docstring de la propriété : à l'exécution, lorsque FreeCAD affiche ces éléments à l'utilisateur, il appelle <code>translate()</code> : les chaînes littérales doivent avoir été extraites par <code>pylupdate</code> au moment de la création, par exemple :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div>
<p>Dans cette utilisation, au moment de l'exécution, le dictionnaire renvoyé par cette fonction est littéralement :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span> 
    <span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
    <span class="s1">'MenuText'</span><span class="p">:</span> <span class="s2">"My Command"</span><span class="p">,</span>
    <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="s2">"Describes what the command does"</span><span class="p">,</span>
    <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
<span class="p">}</span>
</pre></div>
<p>Il n'y a aucune référence à un quelconque type d'information de traduction. Lorsque FreeCAD affiche réellement ces informations à l'utilisateur, le pseudo-code est le suivant :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">GetResources</span><span class="p">()</span>
    <span class="n">menu_text</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="s1">'MenuText'</span><span class="p">])</span>
</pre></div>
<p>Dans ce cas, <code>lupdate</code> ne peut pas extraire de chaîne de caractères de l'appel à <code>translate()</code> car il fait référence à une variable. Ainsi, <code>lupdate</code> ignore cet appel, mais au moment de l'exécution, Qt recherche la chaîne qui lui est passée. Tant que quelque part dans le code, il y a un appel à l'une des fonctions de traduction avec une chaîne littérale correspondante (dans ce cas, dans la fonction <code>GetResources()</code>), cet appel de traduction réussira.
</p><p>Pour vérifier que les chaînes de caractères attendues sont extraites, vous pouvez exécuter manuellement la commande <code>pylupdate</code> :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="n">myfile</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">outfile</span><span class="o">.</span><span class="n">ts</span>
</pre></div>
<p>Le fichier <code>outfile.ts</code> contiendra l'ensemble des chaînes de caractères qui sont téléchargées vers CrowdIn pour être traduites.
</p><p><span id="Important_references"></span>
</p>
<h2><span id="R.C3.A9f.C3.A9rences_importantes"></span><span class="mw-headline" id="Références_importantes">Références importantes</span></h2>
<ul><li>Pourquoi et comment traduire les fonctions <code>openCommand()</code> (<a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=10&amp;t=55869" rel="nofollow">fil de discussion</a>)</li></ul>
<p><span id="Related_Pages"></span>
</p>
<h2><span class="mw-headline" id="Pages_en_relation">Pages en relation</span></h2>
<ul><li><a href="../fr\External_workbenches.html" title="External workbenches/fr">Ateliers externes</a></li>
<li><a href="../fr\Localisation.html" title="Localisation/fr">Localisation</a></li>
<li>Pour plus d'informations faites vos demandes ici sur le forum : <a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=10&amp;t=36413" rel="nofollow">Translating external workbenches</a>.</li></ul>
<p><br/>
</p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/User_hub.png"><img decoding="async" height="24" src="../File/User_hub.png" width="24"/></a></span> <a href="../fr\User_hub.html" title="User hub/fr">Hub utilisateurs</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b><a href="../fr\Getting_started.html" title="Getting started/fr">Démarrer avec FreeCAD</a></b></li>
<li><b>Installation :</b> <a href="../fr\Download.html" title="Download/fr">Téléchargements</a>, <a href="../fr\Installing_on_Windows.html" title="Installing on Windows/fr">Windows</a>, <a href="../fr\Installing_on_Linux.html" title="Installing on Linux/fr">Linux</a>, <a href="../fr\Installing_on_Mac.html" title="Installing on Mac/fr">Mac</a>, <a href="../fr\Installing_additional_components.html" title="Installing additional components/fr">Logiciels supplémentaires</a>, <a href="../fr\Compile_on_Docker.html" title="Compile on Docker/fr">Docker</a>, <a href="../fr\AppImage.html" title="AppImage/fr">AppImage</a>, <a href="../fr\Ubuntu_Snap.html" title="Ubuntu Snap/fr">Ubuntu Snap</a></li>
<li><b>Bases :</b> <a href="../fr\About_FreeCAD.html" title="About FreeCAD/fr">À propos de FreeCAD</a>, <a href="../fr\Interface.html" title="Interface/fr">Interface</a>, <a href="../fr\Mouse_navigation.html" title="Mouse navigation/fr">Navigation par la souris</a>, <a href="../fr\Selection_methods.html" title="Selection methods/fr">Méthodes de sélection</a>, <a href="../fr\Object_name.html" title="Object name/fr">Objet name</a>, <a href="../fr\Preferences_Editor.html" title="Preferences Editor/fr">Préférences</a>, <a href="../fr\Workbenches.html" title="Workbenches/fr">Ateliers</a>, <a href="../fr\Document_structure.html" title="Document structure/fr">Structure du document</a>, <a href="../fr\Property.html" title="Property/fr">Propriétés</a>, <a href="../fr\Help_FreeCAD.html" title="Help FreeCAD/fr">Contribuer à FreeCAD</a>, <a href="../fr\Donate.html" title="Donate/fr">Faire un don</a></li></ul>
<hr/>
<ul><li><b>Aide :</b> <a href="../fr\Tutorials.html" title="Tutorials/fr">Tutoriels</a>, <a href="../fr\Video_tutorials.html" title="Video tutorials/fr">Tutoriels vidéo</a></li>
<li><b><a href="../fr\Workbenches.html" title="Workbenches/fr">Ateliers</a> :</b> <a href="../fr\Std_Base.html" title="Std Base/fr">Std Base</a>, <a href="../fr\Arch_Workbench.html" title="Arch Workbench/fr">Arch</a>, <a href="../fr\Assembly_Workbench.html" title="Assembly Workbench/fr">Assembly</a>, <a href="../fr\CAM_Workbench.html" title="CAM Workbench/fr">CAM</a>, <a href="../fr\Draft_Workbench.html" title="Draft Workbench/fr">Draft</a>, <a href="../fr\FEM_Workbench.html" title="FEM Workbench/fr">FEM</a>, <a href="../fr\Inspection_Workbench.html" title="Inspection Workbench/fr">Inspection</a>, <a href="../fr\Mesh_Workbench.html" title="Mesh Workbench/fr">Mesh</a>, <a href="../fr\OpenSCAD_Workbench.html" title="OpenSCAD Workbench/fr">OpenSCAD</a>, <a href="../fr\Part_Workbench.html" title="Part Workbench/fr">Part</a>, <a href="../fr\PartDesign_Workbench.html" title="PartDesign Workbench/fr">PartDesign</a>, <a href="../fr\Points_Workbench.html" title="Points Workbench/fr">Points</a>, <a href="../fr\Reverse_Engineering_Workbench.html" title="Reverse Engineering Workbench/fr">Reverse Engineering</a>, <a href="../fr\Robot_Workbench.html" title="Robot Workbench/fr">Robot</a>, <a href="../fr\Sketcher_Workbench.html" title="Sketcher Workbench/fr">Sketcher</a>, <a href="../fr\Spreadsheet_Workbench.html" title="Spreadsheet Workbench/fr">Spreadsheet</a>, <a href="../fr\Surface_Workbench.html" title="Surface Workbench/fr">Surface</a>, <a href="../fr\TechDraw_Workbench.html" title="TechDraw Workbench/fr">TechDraw</a>, <a href="../fr\Testing.html" title="Testing/fr">Test</a></li></ul>
<hr/>
<ul><li><b><a href="../fr\Addon.html" title="Addon/fr">Addons</a> :</b> <a href="../fr\Std_AddonMgr.html" title="Std AddonMgr/fr">Gestionnaire d'Addons</a>, <a href="../fr\External_workbenches.html" title="External workbenches/fr">Ateliers externes</a>, <a href="../fr\Scripting_and_macros.html" title="Scripting and macros/fr">Scripts et macros</a></li></ul>
<hr/>
<ul><li><b>Hubs :</b> <a href="../fr\User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr\Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs expérimentés</a>, <a href="../fr\Developer_hub.html" title="Developer hub/fr">Hub Développeurs</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241214203835
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.086 seconds
Real time usage: 0.118 seconds
Preprocessor visited node count: 919/1000000
Post‐expand include size: 9426/2097152 bytes
Template argument size: 5527/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 23/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 18458/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   15.620      1 -total
 34.76%    5.430     23 Template:Code
 17.55%    2.742     89 Template:Incode
 10.16%    1.587      1 Template:Userdocnavi/fr
  4.44%    0.693      1 Template:Emphasis
  4.32%    0.675      1 Template:Navigation_menu_2
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:150031-0!canonical and timestamp 20241214203835 and revision id 1367490. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
