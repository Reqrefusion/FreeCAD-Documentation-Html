<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Macro Zoom1 1/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="Macro_Zoom1_1.html" lang="en" title="Macro Zoom1 1 (100% translated)">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="Macro_Zoom1_1.html" lang="pl" title="Makrodefinicja: Zoom1 1 (7% translated)">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="float: right; width: 230px; margin-left: 10px;" width="100%">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a class="mw-file-description" href="../File/Zoom1_1.svg"><img decoding="async" height="32" src="../File/Zoom1_1.svg" width="32"/></a></span><span> </span>
Zoom 1:1
</p>
</td></tr>
<tr>
<th class="ctOdd">Description
</th></tr>
<tr>
<td class="ctEven left macro-description">Zoom 1:1 pour que les objets apparaissent à leur taille réelle sur l'écran.<br/><br/>Version macro : 1.0<br/>Date dernière modification : 2021-11-9<br/>Version FreeCAD : Python3+<br/>Téléchargement : <a class="external text" href="https://wiki.freecadweb.org/File:Zoom1_1.svg" rel="nofollow">Icône de la barre d'outils</a><br/>Auteur: TheMarkster<br/>
</td></tr>
<tr>
<th class="ctOdd">Auteur
</th></tr>
<tr>
<td class="ctEven macro-author"><a class="new" href="index.php?title=User;TheMarkster&amp;action=edit&amp;redlink=1.html" title="User:TheMarkster (page does not exist)">TheMarkster</a>
</td></tr>
<tr>
<th class="ctOdd">Téléchargement
</th></tr>
<tr>
<td class="ctEven macro-download"><a class="external text" href="https://wiki.freecadweb.org/File:Zoom1_1.svg" rel="nofollow">Icône de la barre d'outils</a>
</td></tr>
<tr>
<th class="ctOdd">Liens
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="Macros_recipes.html" title="Macros recipes/fr">Page des macros</a><br/><a href="How_to_install_macros.html" title="How to install macros/fr">Comment installer une macro</a><br/><a href="Customize_Toolbars.html" title="Customize Toolbars/fr">Comment créer une barre d'outils</a>
</td></tr>
<tr>
<th class="ctOdd">Version Macro
</th></tr>
<tr>
<td class="ctEven macro-version">1.0
</td></tr>
<tr>
<th class="ctOdd">Dernière modification
</th></tr>
<tr>
<td class="ctEven macro-date">2021-11-9
</td></tr>
<tr>
<th class="ctOdd">Version(s) FreeCAD
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">Python3+
</td></tr>
<tr>
<th class="ctOdd">Raccourci clavier
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">Voir aussi
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br/><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Utilisation"><span class="tocnumber">2</span> <span class="toctext">Utilisation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Fonctionnement"><span class="tocnumber">3</span> <span class="toctext">Fonctionnement</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Limitations"><span class="tocnumber">4</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Précautions"><span class="tocnumber">5</span> <span class="toctext">Précautions</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Script"><span class="tocnumber">6</span> <span class="toctext">Script</span></a></li>
</ul>
</div>
</td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Effectue un zoom pour que les objets apparaissent à leur taille réelle sur votre écran. Par exemple, vous devriez être en mesure de mesurer un cube de 100 mm à l'aide d'une règle tenue devant votre écran.
</p><p><span id="How_To_Use"></span>
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<p>Exécutez la macro pour zoomer à la taille réelle de vos objets. Parfois, en raison des limitations de Qt, les informations matérielles fournies à la macro peuvent être incorrectes, par exemple la largeur de l'écran, en millimètres, peut être incorrecte. Dans ce cas, il existe une boîte de dialogue de calibrage. Pour faire apparaître cette fenêtre de dialogue, appuyez sur la touche Ctrl pendant l'exécution de la macro. Un cube temporaire de 100 mm est créé. Mesurez le cube qui apparaît à l'écran avec une règle ou un pied à coulisse et saisissez vos mesures (en MM) dans la fenêtre de dialogue. Celle-ci calculera le paramètre d'ajustement approprié à utiliser pour votre matériel.
</p><p>Ce paramètre d'ajustement est stocké dans les paramètres utilisateur à Plugins/Zoom1_1_Macro/Tweak.
</p><p><span id="How_it_works"></span>
</p>
<h2><span class="mw-headline" id="Fonctionnement">Fonctionnement</span></h2>
<p>La taille de l'écran (de la vue MDI, c'est-à-dire la vue 3D) est récupérée de Qt en MM. La hauteur de la caméra est alors fixée au plus petit de la largeur ou de la hauteur de l'écran. Par exemple, si la largeur/hauteur de l'écran est de 800, 600, la hauteur de la caméra est fixée à 600 au-dessus de la scène.
</p>
<h2><span class="mw-headline" id="Limitations">Limitations</span></h2>
<ol><li>Parfois, pour diverses raisons, les informations fournies à la macro par Qt concernant les dimensions du matériel peuvent être incorrectes, auquel cas le paramètre Tweak est nécessaire via la boîte de dialogue de calibrage intégrée.</li>
<li>Ne fonctionne qu'avec les modes de caméra orthographique.</li>
<li>Évidemment, il y a une gamme limitée de tailles où cela peut être utilisé.</li></ol>
<p><span id="Precautions"></span>
</p>
<h2><span id="Pr.C3.A9cautions"></span><span class="mw-headline" id="Précautions">Précautions</span></h2>
<p>Il faut faire attention lorsque l'on tient des objets ou que l'on tente de mesurer des choses sur l'écran, afin d'éviter de rayer l'écran.
</p>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<p>L'icône de la macro
<span typeof="mw:File"><a class="mw-file-description" href="../File/Zoom1_1.svg"><img decoding="async" height="48" src="../File/Zoom1_1.svg" width="48"/></a></span>
</p><p><b>Zoom1_1.FCMacro</b>
</p>
<pre># -*- coding: utf-8 -*-
#Zoom 1:1 macro
#2021, by &lt;TheMarkster&gt;, based on work of kisolre
#Attempts to zoom 3D view such that objects on the screen
#appear to be their actual size
#For example, a 100mm cube should measure 100mm on your screen
#This relies on information provided by Qt about the underlying
#hardware, which Qt admits is not always reliable
#Thus we have a Tweak parameter to workaround such cases.
#Press Ctrl key while executing the macro to bring up the
#calibration dialog and set the tweak for your hardware.


import FreeCAD, FreeCADGui
from PySide import QtGui, QtCore

__version__ = "1.0"

def zoomActual(tweak=1.0):
    gv = av.graphicsView()
    height = gv.heightMM()
    width = gv.widthMM()
    node = av.getCameraNode()
    node.height.setValue(tweak*min(width,height))

doc = FreeCAD.ActiveDocument
if not doc:
    doc = FreeCAD.newDocument()
    FreeCAD.Console.PrintMessage("No document, creating one.\n")
av = FreeCADGui.activeView()
pg = FreeCAD.ParamGet("User parameter:Plugins/Zoom1_1_Macro")
tweak = pg.GetFloat("Tweak",1.0)
if hasattr(av,"graphicsView") and hasattr(av.getCameraNode(),"height"):
    zoomActual(tweak)
    modifiers = QtGui.QApplication.keyboardModifiers()
    if modifiers == QtCore.Qt.ControlModifier:
        visible = [obj for obj in doc.Objects if hasattr(obj,"ViewObject") and obj.ViewObject.Visibility == True]
        for obj in doc.Objects:
            if hasattr(obj,"ViewObject"):
                obj.ViewObject.Visibility = False
        cube = doc.addObject("Part::Box","TemporaryCalibrationCube")
        cube.Length = cube.Height = cube.Width = 100
        cube.ViewObject.DisplayMode = "Shaded"
        av.viewFront()
        doc.recompute()
        zoomActual(1.0)
        text = "\
Calibration dialog\n\
\n\
A temporary 100x100x100 mm cube has been created for this\n\
calibration. Measure this cube and enter your measurements.\n\
A tweak value will be calculated based on what you enter and \n\
will be stored in user parameters / Plugins / Zoom1_1_Macro\n\
\n\
You can move this dialog if necessary, but be sure not to zoom\n\
in or out before measuring the cube. If the cube does not fit\n\
cancel this dialog, resize the 3D view, and try again.\n\
\n\
Enter measured Cube Width or Height (in MM):\n"
        win = FreeCADGui.getMainWindow()
        title = "Zoom1_1 macro v"+__version__
        dlg = QtGui.QInputDialog()
        usertweak,ok = dlg.getDouble(win,title,text,100.0)
        doc.removeObject(cube.Name)
        for obj in visible:
            obj.ViewObject.Visibility = True
        if not ok:
            FreeCAD.Console.PrintMessage("Canceled, keeping current tweak value\n")
        else:
            tweak = usertweak/100.0
            pg.SetFloat("Tweak", tweak)
            zoomActual(tweak)
    FreeCAD.Console.PrintMessage("Zoom 1:1 macro -- Ctrl + execute to calibrate, if necessary\n")
    FreeCAD.Console.PrintMessage("Tweak = "+str(tweak)+"\n")
elif not hasattr(av.getCameraNode(),"height"):
    FreeCAD.Console.PrintError("Error: Only orthographic camera types are supported.\n")
else:
    FreeCAD.Console.PrintError("Error acquiring QGraphicsView. You might need to update your version of FreeCAD.\n")</pre>
<!-- 
NewPP limit report
Cached time: 20241129211630
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.043 seconds
Real time usage: 0.079 seconds
Preprocessor visited node count: 95/1000000
Post‐expand include size: 2000/2097152 bytes
Template argument size: 3642/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3840/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.294      1 -total
 55.95%    1.843      1 Template:MacroCode
 41.35%    1.362      1 Template:Macro/fr
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:272604-0!canonical and timestamp 20241129211630 and revision id 1495543. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
