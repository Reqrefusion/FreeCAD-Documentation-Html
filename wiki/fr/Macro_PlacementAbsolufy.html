<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Macro PlacementAbsolufy/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Macro_PlacementAbsolufy.html" lang="en" title="Macro PlacementAbsolufy (100% translated)">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../it\Macro_PlacementAbsolufy.html" lang="it" title="Macro PlacementAbsolufy (100% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../pl\Macro_PlacementAbsolufy.html" lang="pl" title="Makrodefinicja: PlacementAbsolufy (6% translated)">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="float: right; width: 230px; margin-left: 10px;" width="100%">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a class="mw-file-description" href="../File/Macro_PlacementAbsolufy.png"><img decoding="async" height="32" src="../File/Macro_PlacementAbsolufy.png" width="32"/></a></span><span> </span>
PlacementAbsolufy
</p>
</td></tr>
<tr>
<th class="ctOdd">Description
</th></tr>
<tr>
<td class="ctEven left macro-description">Cette macro réinitialise la position de tous les conteneurs de pièces pour documenter l'origine tout en conservant les positions absolues des objets.<br/>Cette macro a été écrite principalement pour contourner l'implémentation inachevée du conteneur de pièces qui peut entraîner un changement de position absolue, principalement lors de l'exportation de pièces. Cela est dû au fait que les conteneurs de pièces créent un système de coordonnées local qui peut être déplacé du système global. Ce référentiel local est ensuite utilisé par les objets suivants mais n'est pas correctement géré par plusieurs fonctions (par exemple, l'exportation).<br/><br/>Macro version: 0.2<br/>Last modified: 2019-06-10<br/>FreeCAD version: 0.17+<br/>Download: <a class="external text" href="https://www.freecadweb.org/wiki/images/9/92/Macro_PlacementAbsolufy.png" rel="nofollow">ToolBar Icon</a><br/>Author: OpenBrain<br/>
</td></tr>
<tr>
<th class="ctOdd">Author
</th></tr>
<tr>
<td class="ctEven macro-author"><a class="new" href="../index.php?title=User;OpenBrain&amp;action=edit&amp;redlink=1.html" title="User:OpenBrain (page does not exist)">OpenBrain</a>
</td></tr>
<tr>
<th class="ctOdd">Download
</th></tr>
<tr>
<td class="ctEven macro-download"><a class="external text" href="https://www.freecadweb.org/wiki/images/9/92/Macro_PlacementAbsolufy.png" rel="nofollow">ToolBar Icon</a>
</td></tr>
<tr>
<th class="ctOdd">Links
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="../Macros_recipes.html" title="Macros recipes">Macros recipes</a><br/><a href="../How_to_install_macros.html" title="How to install macros">How to install macros</a><br/><a href="../Customize_Toolbars.html" title="Customize Toolbars">How to customize toolbars</a>
</td></tr>
<tr>
<th class="ctOdd">Macro Version
</th></tr>
<tr>
<td class="ctEven macro-version">0.2
</td></tr>
<tr>
<th class="ctOdd">Date last modified
</th></tr>
<tr>
<td class="ctEven macro-date">2019-06-10
</td></tr>
<tr>
<th class="ctOdd">FreeCAD Version(s)
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">0.17+
</td></tr>
<tr>
<th class="ctOdd">Default shortcut
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><a href="../fr\Macro_StraightenObject.html" title="Macro StraightenObject/fr">Macro StraightenObject</a> <span typeof="mw:File"><a class="mw-file-description" href="../File/Macro_StraightenObject.png"><img decoding="async" height="24" src="../File/Macro_StraightenObject.png" width="24"/></a></span>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br/><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Contexte"><span class="tocnumber">1.1</span> <span class="toctext">Contexte</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Utilisation"><span class="tocnumber">2</span> <span class="toctext">Utilisation</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Script"><span class="tocnumber">4</span> <span class="toctext">Script</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Limitations"><span class="tocnumber">5</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Forum_discussion"><span class="tocnumber">6</span> <span class="toctext">Forum discussion</span></a></li>
</ul>
</div>
</td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<h3><span class="mw-headline" id="Contexte">Contexte</span></h3>
<p>Cette macro a été écrite principalement pour contourner l'implémentation de conteneur de pièces inachevée qui peut entraîner un changement de position absolu, principalement lors de l'exportation de pièces. Cela est dû au fait que les conteneurs de pièces créent un système de coordonnées local qui peut être déplacé du système global. Ce référentiel local est ensuite utilisé par les objets suivants mais n'est pas correctement géré par plusieurs fonctions (par exemple, l'exportation).
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<p>Fonctionnellement, la macro réinitialisera le placement des conteneurs de pièces à l'origine globale tout en préservant la position absolue des objets.
Notez que la macro PlacementAbsolufy s'applique à l'ensemble du document actif.
</p><p>Pour utiliser la macro, il suffit de l'exécuter lorsque le document sur lequel elle doit être appliquée est ouvert.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>La macro est disponible via le <a href="../fr\Std_AddonMgr.html" title="Std AddonMgr/fr">gestionnaire des extensions</a>. Le code est fourni sur cette page pour plus de commodité au cas où le système utilisateur n'aurait pas git-python. Bien qu'elle soit à jour, la dernière version est toujours disponible sur <a class="external text" href="https://github.com/FreeCAD/FreeCAD-macros/blob/master/Utility/PlacementAbsolufy.FCMacro" rel="nofollow">FreeCAD-macro repository</a>
</p><p>Pour des explications plus détaillées, consultez la page <a href="../fr\How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a>.
</p>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<p>ToolBar Icon <span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Macro_PlacementAbsolufy.png"><img decoding="async" height="64" src="../File/Macro_PlacementAbsolufy.png" width="64"/></a></span>
</p><p><b>Macro_PlacementAbsolufy.FCMacro</b>
</p>
<pre>#!/usr/bin/python
#####################################
# Copyright (c) openBrain 2019
# Licensed under LGPL v2
#
# This macro will reset position of all part containers to document origin while keeping the absolute object positions
#
# Version history :
# *0.2 : some typo improvement + commenting for official PR
# *0.1 : alpha release, almost no test performed
#
#####################################

__Name__ = 'PlacementAbsolufy'
__Comment__ = 'Reset part containers to global origin while keeping object positions'
__Author__ = 'openBrain'
__Version__ = '0.2'
__Date__ = '2019-06-10'
__License__ = 'LGPL v2'
__Web__ = 'https://www.freecadweb.org/wiki/Macro_PlacementAbsolufy'
__Wiki__ = 'https://www.freecadweb.org/wiki/Macro_PlacementAbsolufy'
__Icon__ = ''
__Help__ = 'Run the macro with model active in the GUI'
__Status__ = 'Alpha'
__Requires__ = 'FreeCAD &gt;= 0.17'
__Communication__ = 'https://forum.freecadweb.org/viewtopic.php?f=3&amp;t=36869'
__Files__ = ''

currState = {} #initialize a dictionary to store current object placements

for obj in App.ActiveDocument.Objects: #going through active document objects
    if "Placement" in obj.PropertiesList: #if object has a Placement property
        currState[obj] = obj.getGlobalPlacement() #store the object pointer with its global placement

App.ActiveDocument.openTransaction("Absolufy") #open a transaction for undo management

for obj, plac in currState.items(): #going through all moveable objects
    if obj.isDerivedFrom("App::Part"): #if object is a part container
        obj.Placement = App.Placement(App.Vector(0,0,0),App.Rotation(0,0,0)) #reset its placement to global document origin
    elif obj.TypeId[:5] == "App::": #if object is another App type (typically an origin axis or plane)
        None #do nothing
    else: #for all other objects
        obj.Placement = plac #replace them at their global (absolute) placement

App.ActiveDocument.commitTransaction() #commit transaction</pre>
<h2><span class="mw-headline" id="Limitations">Limitations</span></h2>
<ul><li>Traite le document ouvert</li></ul>
<h2><span class="mw-headline" id="Forum_discussion">Forum discussion</span></h2>
<p>Pour tout commentaire (bogue, demande de fonctionnalité, commentaires, ...), veuillez utiliser ce fil de discussion: <a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=3&amp;t=36869" rel="nofollow">Preserving global position of Parts during export</a>
</p>
<!-- 
NewPP limit report
Cached time: 20241214203316
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.047 seconds
Real time usage: 0.098 seconds
Preprocessor visited node count: 105/1000000
Post‐expand include size: 2677/2097152 bytes
Template argument size: 3137/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 2805/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.536      1 -total
 51.95%    2.876      1 Template:MacroCode
 46.01%    2.547      1 Template:Macro
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:176882-0!canonical and timestamp 20241214203316 and revision id 1210587. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
