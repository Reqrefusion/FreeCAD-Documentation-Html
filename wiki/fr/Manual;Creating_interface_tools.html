<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Manual:Creating interface tools/fr</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="wiki/de//Manual;Creating_interface_tools.html" class="mw-pt-progress mw-pt-progress--high" title="Handbuch:Erstellen von Oberfl&auml;chenwerkzeugen (66% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="wiki//Manual;Creating_interface_tools.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Manual:Creating interface tools (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--high" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="wiki/it//Manual;Creating_interface_tools.html" class="mw-pt-progress mw-pt-progress--high" title="Manuale:Creare interfacce di strumenti (66% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="wiki/pl//Manual;Creating_interface_tools.html" class="mw-pt-progress mw-pt-progress--high" title="Podr&#281;cznik:Tworzenie narz&#281;dzi interfejsu (66% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="wiki/ro//Manual;Creating_interface_tools.html" class="mw-pt-progress mw-pt-progress--med" title="Manual:Crearea de instrumente de interfa&#539;&#259; (54% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="wiki/ru//Manual;Creating_interface_tools.html" class="mw-pt-progress mw-pt-progress--med" title="&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1084;&#1077;&#1085;&#1090;&#1086;&#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089;&#1072; (49% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="wiki/fr//Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/fr">Cr&eacute;ation d'objets param&eacute;triques</a></div>
    <div style="margin: 4px 0; float: right;"><a href="wiki/fr//Manual;The_Community.html" title="Manual:The Community/fr">La communaut&eacute;</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="wiki/fr//Manual;Introduction.html" title="Manual:Introduction/fr">D&eacute;but du manuel</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Crystal_Clear_manual.png" decoding="async" width="24" height="24"></span></span></div>
</div>
<div id="toc" class="manualtoc" style="float:right; margin:10px 0px 10px 10px;">
<ul><li><a href="wiki/fr//Manual;Introduction.html" title="Manual:Introduction/fr">Introduction</a></li>
<li>D&eacute;couvrir FreeCAD
<ul><li><a href="wiki/fr//Manual;What_is_FreeCAD.html" title="Manual:What is FreeCAD/fr">Qu'est-ce que FreeCAD&nbsp;?</a></li>
<li><a href="wiki/fr//Manual;Installing.html" title="Manual:Installing/fr">Installation</a>
<ul><li><a href="wiki/fr//Manual;Installing.html#Installation_sur_Windows" title="Manual:Installing/fr">Installation sur Windows</a></li>
<li><a href="wiki/fr//Manual;Installing.html#Installation_sur_Linux" title="Manual:Installing/fr">Installation sur Linux</a></li>
<li><a href="wiki/fr//Manual;Installing.html#Installation_sur_Mac_OS" title="Manual:Installing/fr">Installation sur Mac OS</a></li>
<li><a href="wiki/fr//Manual;Installing.html#D%C3%A9sinstallation" title="Manual:Installing/fr">D&eacute;sinstallation</a></li>
<li><a href="wiki/fr//Manual;Installing.html#D%C3%A9finir_les_pr%C3%A9f%C3%A9rences_de_base" title="Manual:Installing/fr">D&eacute;finir les pr&eacute;f&eacute;rences de base</a></li>
<li><a href="wiki/fr//Manual;Installing.html#Installation_de_contenu_suppl%C3%A9mentaire" title="Manual:Installing/fr">Installation de contenu suppl&eacute;mentaire</a></li></ul></li>
<li><a href="wiki/fr//Manual;The_FreeCAD_Interface.html" title="Manual:The FreeCAD Interface/fr">L'interface FreeCAD</a>
<ul><li><a href="wiki/fr//Manual;The_FreeCAD_Interface.html#Les_ateliers" title="Manual:The FreeCAD Interface/fr">Les ateliers</a></li>
<li><a href="wiki/fr//Manual;The_FreeCAD_Interface.html#L.27interface" title="Manual:The FreeCAD Interface/fr">L'interface</a></li>
<li><a href="wiki/fr//Manual;The_FreeCAD_Interface.html#Personnalisation_de_l.27interface" title="Manual:The FreeCAD Interface/fr">Personnalisation de l'interface</a></li></ul></li>
<li><a href="wiki/fr//Manual;Navigating_in_the_3D_view.html" title="Manual:Navigating in the 3D view/fr">Navigation dans la vue 3D</a>
<ul><li><a href="wiki/fr//Manual;Navigating_in_the_3D_view.html#Un_mot_sur_l.27espace_3D" title="Manual:Navigating in the 3D view/fr">Un mot sur l'espace 3D</a></li>
<li><a href="wiki/fr//Manual;Navigating_in_the_3D_view.html#La_vue_3D_FreeCAD" title="Manual:Navigating in the 3D view/fr">La vue 3D FreeCAD</a></li>
<li><a href="wiki/fr//Manual;Navigating_in_the_3D_view.html#S.C3.A9lection_d.27objets" title="Manual:Navigating in the 3D view/fr">S&eacute;lection d'objets</a></li></ul></li>
<li><a href="wiki/fr//Manual;The_FreeCAD_document.html" title="Manual:The FreeCAD document/fr">Le document FreeCAD</a></li>
<li><a href="wiki/fr//Manual;Parametric_objects.html" title="Manual:Parametric objects/fr">Objets param&eacute;triques</a></li>
<li><a href="wiki/fr//Manual;Import_and_export_to_other_filetypes.html" title="Manual:Import and export to other filetypes/fr">Importer et exporter vers d'autres types de fichiers</a></li></ul></li>
<li>Travailler avec FreeCAD
<ul><li><a href="wiki/fr//Manual;All_workbenches_at_a_glance.html" title="Manual:All workbenches at a glance/fr">Tous les ateliers en un coup d'&oelig;il</a></li>
<li><a href="wiki/fr//Manual;Traditional_modeling,_the_CSG_way.html" title="Manual:Traditional modeling, the CSG way/fr">Mod&eacute;lisation traditionnelle, mode CSG</a></li>
<li><a href="wiki/fr//Manual;Traditional_2D_drafting.html" title="Manual:Traditional 2D drafting/fr">Dessin 2D traditionnel</a></li>
<li><a href="wiki/fr//Manual;Modeling_for_product_design.html" title="Manual:Modeling for product design/fr">Mod&eacute;lisation pour la conception de produits</a></li>
<li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing/fr">Pr&eacute;paration de mod&egrave;les pour l'impression 3D</a>
<ul><li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html#Exportation_vers_des_trancheuses" title="Manual:Preparing models for 3D printing/fr">Exportation vers des trancheuses</a></li>
<li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html#Conversion_d.27objets_en_mailles" title="Manual:Preparing models for 3D printing/fr">Conversion d'objets en mailles</a></li>
<li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html#Utilisation_de_Slic3r" title="Manual:Preparing models for 3D printing/fr">Utilisation de Slic3r</a></li>
<li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html#Utilisation_du_greffon_.28addon.29_Cura" title="Manual:Preparing models for 3D printing/fr">Utilisation de l'extension Cura</a></li>
<li><a href="wiki/fr//Manual;Preparing_models_for_3D_printing.html#G.C3.A9n.C3.A9ration_du_G-code" title="Manual:Preparing models for 3D printing/fr">G&eacute;n&eacute;ration du G-code</a></li></ul></li>
<li><a href="wiki/fr//Manual;Generating_2D_drawings.html" title="Manual:Generating 2D drawings/fr">G&eacute;n&eacute;ration de dessins 2D</a></li>
<li><a href="wiki/fr//Manual;BIM_modeling.html" title="Manual:BIM modeling/fr">Mod&eacute;lisation BIM</a></li>
<li><a href="wiki/fr//Manual;Using_spreadsheets.html" title="Manual:Using spreadsheets/fr">Utilisation de feuilles de calcul</a>
<ul><li><a href="wiki/fr//Manual;Using_spreadsheets.html#Lecture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">Lecture de propri&eacute;t&eacute;s</a></li>
<li><a href="wiki/fr//Manual;Using_spreadsheets.html#Ecriture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">&Eacute;criture de propri&eacute;t&eacute;s</a></li></ul></li>
<li><a href="wiki/fr//Manual;Creating_FEM_analyses.html" title="Manual:Creating FEM analyses/fr">Cr&eacute;ation d'analyses FEM</a></li>
<li><a href="wiki/fr//Manual;Creating_renderings.html" title="Manual:Creating renderings/fr">Cr&eacute;ation de rendus r&eacute;alistes</a></li></ul></li>
<li>Programmation Python
<ul><li><a href="wiki/fr//Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/fr">Introduction &agrave; Python</a>
<ul><li><a href="wiki/fr//Manual;A_gentle_introduction.html#Ecrire_du_code_python" title="Manual:A gentle introduction/fr">&Eacute;crire du code Python</a></li>
<li><a href="wiki/fr//Manual;A_gentle_introduction.html#Manipuler_des_objets_FreeCAD" title="Manual:A gentle introduction/fr">Manipuler des objets FreeCAD</a></li>
<li><a href="wiki/fr//Manual;A_gentle_introduction.html#Vecteurs_et_emplacements" title="Manual:A gentle introduction/fr">Vecteurs et emplacements</a></li></ul></li>
<li><a href="wiki/fr//Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Cr&eacute;ation et manipulation de la g&eacute;om&eacute;trie</a></li>
<li><a href="wiki/fr//Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/fr">Cr&eacute;ation d'objets param&eacute;triques</a></li>
<li><a class="mw-selflink selflink">Cr&eacute;ation d'outils d'interface</a></li></ul></li>
<li><a href="wiki/fr//Manual;The_Community.html" title="Manual:The Community/fr">La communaut&eacute;</a></li></ul></div>
<p>Dans les deux derniers chapitres, nous avons vu comment cr&eacute;er la g&eacute;om&eacute;trie Part (<a href="wiki/fr//Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Cr&eacute;ation et manipulation de la g&eacute;om&eacute;trie</a>) et cr&eacute;er des objets param&eacute;triques (<a href="wiki/fr//Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/fr">Cr&eacute;ation d'objets param&eacute;triques</a>). Une derni&egrave;re pi&egrave;ce manque pour avoir un contr&ocirc;le total sur FreeCAD: cr&eacute;er des outils qui interagiront avec l'utilisateur.
</p><p>Dans de nombreuses situations, il n'est pas tr&egrave;s convivial de construire un objet avec des valeurs nulles, comme nous avons fait avec le rectangle dans le chapitre pr&eacute;c&eacute;dent, puis de demander &agrave; l'utilisateur de remplir la hauteur et la largeur dans le panneau Propri&eacute;t&eacute;s. Cela fonctionne pour un tr&egrave;s petit nombre d'objets, mais devient tr&egrave;s fastidieux si vous avez beaucoup de rectangles &agrave; r&eacute;aliser. Une meilleure fa&ccedil;on serait d'&ecirc;tre capable de donner d&eacute;j&agrave; la hauteur et la largeur lors de la cr&eacute;ation du rectangle.
</p><p>Python offre un outil de base permettant &agrave; l'utilisateur de saisir du texte &agrave; l'&eacute;cran&nbsp;:
</p>
<pre>text = raw_input("Height of the rectangle?")
print("The entered height is ",text)
</pre>
<p>Cependant, cela n&eacute;cessite une console Python en cours d'ex&eacute;cution et, lors de l'ex&eacute;cution de notre code &agrave; partir d'une macro, nous ne sommes pas toujours s&ucirc;rs que la console Python sera activ&eacute;e sur la machine de l'utilisateur.
</p>
<div class="mw-translate-fuzzy">
<p>L'<a rel="nofollow" class="external text" href="https://fr.wikipedia.org/wiki/Interface_graphiquel">interface utilisateur graphique</a>, ou GUI en anglais, c'est-&agrave;-dire toute la partie de FreeCAD qui s'affiche sur votre &eacute;cran (le menu, les barres d'outils, la vue 3D, etc.) a pour seul objet: interagir avec l&rsquo;utilisateur. L'interface de FreeCAD est construite avec <a rel="nofollow" class="external text" href="https://fr.wikipedia.org/wiki/Qt">Qt</a>, une trousse d'outils GUI open source tr&egrave;s commune qui offre une large gamme d'outils tels que des bo&icirc;tes de dialogue, des boutons, des &eacute;tiquettes, des bo&icirc;tes de saisie de texte ou des menus d&eacute;roulants (tout cela est g&eacute;n&eacute;ralement appel&eacute; "widgets").
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Les outils Qt sont tr&egrave;s faciles &agrave; utiliser depuis Python, gr&acirc;ce &agrave; un module Python appel&eacute; <a rel="nofollow" class="external text" href="https://fr.wikipedia.org/wiki/PySide">Pyside</a> (Il existe aussi plusieurs autres modules Python pour communiquer avec Qt depuis Python). Ce module vous permet de cr&eacute;er et d'interagir avec des widgets, lire ce que l'utilisateur a fait avec eux (ce qui a &eacute;t&eacute; rempli dans des zones de texte) ou faire des choses quand, par exemple, un bouton a &eacute;t&eacute; press&eacute;.
</p>
</div>
<p>One of the key advantages of Qt is its cross-platform compatibility, enabling FreeCAD to run seamlessly on different operating systems like Windows, macOS, and Linux. Additionally, Qt&rsquo;s flexibility makes it easy for developers to extend or customize FreeCAD&rsquo;s interface, either by creating new toolbars and menus or by building entirely new modules that integrate into the software. This adaptability ensures that FreeCAD remains both user-friendly and highly extensible.
</p><p>For users interested in scripting or developing new tools, FreeCAD's Python API also provides access to many Qt features. This means you can not only automate tasks but also create custom widgets or dialogs that integrate directly into the FreeCAD environment.
</p><p>The Qt tools are very easy to use from Python, thanks to a Python module called <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/PySide">PySide</a>. PySide is the official Python binding for the Qt library, providing a seamless way to create and interact with widgets programmatically. It allows developers to design interfaces, manage user inputs (such as reading text from input boxes), and define actions based on user interactions, such as responding to a button press. Using PySide, you can build custom dialog boxes, menus, and toolbars directly within FreeCAD, extending its functionality in a way that integrates smoothly with its existing interface.
</p><p>PySide makes it easy to connect user actions to specific functions in your code. For example, you can set up a button so that when it&rsquo;s pressed, it triggers a script to execute a command or modify an object in the 3D view. This interactive capability opens up endless possibilities for customizing workflows and automating repetitive tasks.
</p><p>Qt fournit &eacute;galement un autre outil int&eacute;ressant appel&eacute; <a rel="nofollow" class="external text" href="http://doc.qt.io/qt-4.8/designer-manual.html">Qt Designer</a>, aujourd'hui incorpor&eacute; &agrave; l'int&eacute;rieur d&rsquo;une plus grande application appel&eacute;e <a rel="nofollow" class="external text" href="https://fr.wikipedia.org/wiki/Qt_Creator">Qt Creator</a>. Il permet de concevoir des bo&icirc;tes de dialogue et des panneaux d'interface graphiquement au lieu d'avoir &agrave; les coder manuellement. Dans ce chapitre, nous utiliserons Qt Creator pour dessiner un widget de panneau que nous utiliserons dans le <b>panneau des t&acirc;ches</b> de FreeCAD. Vous devrez t&eacute;l&eacute;charger et installer Qt Creator &agrave; partir de sa page officielle (<a rel="nofollow" class="external text" href="https://www.qt.io/ide/">official page</a>) si vous &ecirc;tes sur Windows ou Mac. Sur Linux, il est g&eacute;n&eacute;ralement disponible aupr&egrave;s de votre application de gestionnaire de logiciels.
</p><p>Dans l'exercice suivant, nous allons d'abord cr&eacute;er un panneau avec Qt Creator qui demande les valeurs de longueur, de largeur et de hauteur, alors nous allons cr&eacute;er une classe Python autour de lui, qui lira les valeurs entr&eacute;es par l'utilisateur &agrave; partir du panneau, et cr&eacute;er une bo&icirc;te avec les dimensions donn&eacute;es. Cette classe Python sera ensuite utilis&eacute;e par FreeCAD pour afficher et contr&ocirc;ler le panneau des t&acirc;ches&nbsp;:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_07.jpg" class="mw-file-description"><img src="../File/Exercise_python_07.jpg" decoding="async" width="181" height="112"></a></span>
</p>
<div class="mw-translate-fuzzy">
<p>Commen&ccedil;ons par cr&eacute;er le widget. D&eacute;marrez Qt Creator, puis menu <b>Fichier &rarr; Nouveau fichier ou projet &rarr; Fichiers et classes &rarr; Qt &rarr; Formulaire Qt Designer &rarr; Bo&icirc;te de dialogue sans boutons</b>. Cliquez sur <b>Suivant</b>, donnez lui un nom de fichier pour l&rsquo;enregistrer, cliquez sur <b>Suivant</b>, laissez tous les champs de projet &agrave; leur valeur par d&eacute;faut ("&lt;none&gt;") et <b>Cr&eacute;er</b>. Le syst&egrave;me de t&acirc;ches de FreeCAD ajoutera automatiquement les boutons OK / Annuler, c'est pourquoi nous avons choisi ici une bo&icirc;te de dialogue sans boutons.
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_06.jpg" class="mw-file-description"><img src="../File/Exercise_python_06.jpg" decoding="async" width="1237" height="877"></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Trouvez le <b>Label</b> (&eacute;tiquette) dans la liste du panneau de gauche et faites-le glisser sur le canevas de notre widget. Double-cliquez sur l'&eacute;tiquette r&eacute;cemment plac&eacute;e, et modifiez son texte en <b>Longueur</b>.</li>
<li>Cliquez avec le bouton droit de la souris sur la toile du widget, puis choisissez <b>Lay out &rarr; Lay out in a Grid</b>. Cela mettra notre widget dans une grille avec actuellement une seule cellule, occup&eacute;e par notre premi&egrave;re &eacute;tiquette. Nous pouvons maintenant ajouter les &eacute;l&eacute;ments suivants &agrave; gauche, &agrave; droite, en haut ou en bas de notre premi&egrave;re &eacute;tiquette, et la grille s&rsquo;&eacute;tendra automatiquement.</li>
<li>Ajoutez deux autres &eacute;tiquettes en dessous de la premi&egrave;re et modifiez leur texte en <b>Largeur</b> et <b>Hauteur</b>&nbsp;:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_08.jpg" class="mw-file-description"><img src="../File/Exercise_python_08.jpg" decoding="async" width="897" height="367"></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Maintenant, placez 3 widgets <b>Double Spin Box</b> &agrave; c&ocirc;t&eacute; de nos &eacute;tiquettes Longueur, Largeur et Hauteur. Pour chacun d'entre eux, dans le panneau inf&eacute;rieur droit qui affiche tous les param&egrave;tres disponibles pour le Widget s&eacute;lectionn&eacute;, localisez <b>Suffix</b> et d&eacute;finissez leur suffixe en <b>mm</b>. FreeCAD a un widget plus avanc&eacute; qui peut g&eacute;rer diff&eacute;rentes unit&eacute;s mais cela n'est pas disponible dans Qt Creator par d&eacute;faut (n&eacute;anmoins il peut &ecirc;tre (<a href="wiki/fr//Compile_on_Linux.html#Plugin_Qt_designer" title="Compile on Linux/fr">compil&eacute;</a>)), alors, pour l'instant, nous utiliserons une Double Spin Box standard et nous ajouterons le suffixe "mm" pour nous assurer que l'utilisateur sait dans quelle unit&eacute; ils fonctionnent&nbsp;:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_09.jpg" class="mw-file-description"><img src="../File/Exercise_python_09.jpg" decoding="async" width="1053" height="609"></a></span>
</p>
<div class="mw-translate-fuzzy">
<ul><li>Maintenant, notre widget est termin&eacute;, il suffit de nous assurer d'une derni&egrave;re chose. &Eacute;tant donn&eacute; que FreeCAD devra acc&eacute;der &agrave; ce widget et lire les valeurs Longueur, Largeur et Hauteur, nous devons donner les noms appropri&eacute;s &agrave; ces widgets, afin que nous puissions les r&eacute;cup&eacute;rer facilement dans FreeCAD. Cliquez sur chacune des bo&icirc;tes Double Spin, et dans la fen&ecirc;tre sup&eacute;rieure droite, double-cliquez sur leur nom d'objet, et modifiez-les par quelque chose de facile &agrave; retenir, par exemple&nbsp;: BoxLength, BoxWidth et BoxHeight&nbsp;:</li></ul>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_10.jpg" class="mw-file-description"><img src="../File/Exercise_python_10.jpg" decoding="async" width="979" height="513"></a></span>
</p>
<ul><li>Enregistrez le fichier, vous pouvez maintenant fermer Qt Creator, le reste se fera dans Python.</li>
<li>Ouvrez FreeCAD et cr&eacute;ez une nouvelle macro dans le menu <b>Macro &rarr; Macros &rarr; Cr&eacute;er</b></li>
<li>Collez le code suivant. Assurez-vous de modifier le chemin du fichier pour correspondre &agrave; l'endroit o&ugrave; vous avez enregistr&eacute; le fichier .ui cr&eacute;&eacute; dans QtCreator&nbsp;:</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span><span class="nn">FreeCADGui</span><span class="o">,</span><span class="nn">Part</span>
 
<span class="c1"># CHANGE THE LINE BELOW</span>
<span class="n">path_to_ui</span> <span class="o">=</span> <span class="s2">"C:\Users\yorik\Documents\dialog.ui"</span>
 
<span class="k">class</span> <span class="nc">BoxTaskPanel</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="c1"># this will create a Qt widget from our ui file</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">PySideUic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="n">path_to_ui</span><span class="p">)</span>
 
   <span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxLength</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxWidth</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">BoxHeight</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
           <span class="nb">print</span><span class="p">(</span><span class="s2">"Error! None of the values can be 0!"</span><span class="p">)</span>
           <span class="c1"># we bail out without doing anything</span>
           <span class="k">return</span>
       <span class="n">box</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeBox</span><span class="p">(</span><span class="n">length</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span>
       <span class="n">Part</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
       <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">closeDialog</span><span class="p">()</span>
        
<span class="n">panel</span> <span class="o">=</span> <span class="n">BoxTaskPanel</span><span class="p">()</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">showDialog</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Dans le code ci-dessus, nous avons utilis&eacute; une fonction commode (PySideUic.loadUi) &agrave; partir du module FreeCADGui. Cette fonction charge un fichier .ui, cr&eacute;e un widget Qt &agrave; partir de celui-ci et &eacute;crit les noms, afin que nous puissions acc&eacute;der facilement au sous-espace par leurs noms (ex: self.form.BoxLength).
</p>
</div>
<p>La fonction "accept" est &eacute;galement une commodit&eacute; offerte par Qt. Lorsqu'il existe un bouton "OK" dans une bo&icirc;te de dialogue (ce qui est le cas par d&eacute;faut lors de l'utilisation du panneau des T&acirc;ches FreeCAD), toute fonction appel&eacute;e "accept" sera automatiquement ex&eacute;cut&eacute;e lorsque vous appuyez sur le bouton "OK". De m&ecirc;me, vous pouvez &eacute;galement ajouter une fonction de "reject" qui s'ex&eacute;cute lorsque vous appuyez sur le bouton "Annuler". Dans notre cas, nous avons supprim&eacute; cette fonction, alors appuyer sur "Annuler" provoquera le comportement par d&eacute;faut (ne rien faire et fermer la bo&icirc;te de dialogue).
</p><p>Si nous impl&eacute;mentons une des fonctions d'acceptation ou de rejet, leur comportement par d&eacute;faut (ne rien faire et fermer) ne se produira plus. Nous devons donc fermer le panneau de t&acirc;ches nous-m&ecirc;mes. Cela se fait avec&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">closeDialog</span><span class="p">()</span>
</pre></div>
<p>Une fois que nous avons notre BoxTaskPanel qui a 1- un widget appel&eacute; "self.form" et 2- si n&eacute;cessaire, les fonctions Accepter et Rejeter, nous pouvons ouvrir le panneau de t&acirc;ches avec lui, ce qui est fait avec ces deux derni&egrave;res lignes&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">panel</span> <span class="o">=</span> <span class="n">BoxTaskPanel</span><span class="p">()</span>
 <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">Control</span><span class="o">.</span><span class="n">showDialog</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Notez que le widget cr&eacute;&eacute; par PySideUic.loadUi n'est pas sp&eacute;cifique &agrave; FreeCAD, c'est un widget Qt standard qui peut &ecirc;tre utilis&eacute; avec d'autres outils Qt. Par exemple, nous aurions pu afficher une bo&icirc;te de dialogue distincte. Essayez ceci dans la console Python de FreeCAD (en utilisant le chemin correct pour votre fichier .ui bien s&ucirc;r)&nbsp;:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">PySide</span> <span class="kn">import</span> <span class="n">QtGui</span>
 <span class="n">w</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">PySideUic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="s2">"C:\Users\yorik\Documents\dialog.ui"</span><span class="p">)</span>
 <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<p>Bien s&ucirc;r, nous n'avons ajout&eacute; aucun bouton "OK" ou "Annuler" &agrave; notre fen&ecirc;tre de dialogue, car il a &eacute;t&eacute; fait pour &ecirc;tre utilis&eacute; &agrave; partir du panneau de t&acirc;ches FreeCAD, qui fournit d&eacute;j&agrave; de tels boutons. Il n'y a donc aucun moyen de fermer la fen&ecirc;tre de dialogue (autrement que de presser son bouton Fermer la fen&ecirc;tre). Mais la fonction show () cr&eacute;e une fen&ecirc;tre de dialogue non modale, ce qui signifie qu'elle ne bloque pas le reste de l'interface. Ainsi, alors que notre fen&ecirc;tre de dialogue est toujours ouverte, nous pouvons lire les valeurs des champs&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">w</span><span class="o">.</span><span class="n">BoxHeight</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</pre></div>
<p>Ceci est tr&egrave;s utile pour les tests.
</p><p>Enfin, n'oubliez pas qu'il existe beaucoup plus de documentation sur l'utilisation des widgets Qt dans le Wiki FreeCAD, dans la section <a href="wiki//Power_users_hub.html" title="Power users hub">Python Scripting</a>, qui contient un didacticiel de cr&eacute;ation de dialogue (<a href="wiki//Dialog_creation.html" title="Dialog creation">dialog creation tutorial</a>), un tutoriel sp&eacute;cial en 3 parties de PySide (<a href="wiki//PySide.html" title="PySide">PySide tutorial</a>) qui couvre le sujet en profondeur.
</p>
<h2><span class="mw-headline" id="Liens_pertinents">Liens pertinents</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://fr.wikipedia.org/wiki/Qt_Creator">Qt Creator Documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://www.qt.io/qt-features-libraries-apis-tools-and-ide/">Installing Qt Creator</a></li>
<li><a href="wiki/fr//Power_users_hub.html" title="Power users hub/fr">Documentation pour utilisateurs avanc&eacute;s</a></li>
<li><a href="wiki/fr//Dialog_creation.html" title="Dialog creation/fr">Cr&eacute;ation de dialogue</a></li>
<li><a href="wiki/fr//PySide.html" title="PySide/fr">PySide</a></li>
<li><a rel="nofollow" class="external text" href="http://srinikom.github.io/pyside-docs/index.html">Documentation PySide</a></li></ul>
<p><br>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="wiki/fr//Manual;Creating_parametric_objects.html" title="Manual:Creating parametric objects/fr">Cr&eacute;ation d'objets param&eacute;triques</a></div>
    <div style="margin: 4px 0; float: right;"><a href="wiki/fr//Manual;The_Community.html" title="Manual:The Community/fr">La communaut&eacute;</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="wiki/fr//Manual;Introduction.html" title="Manual:Introduction/fr">D&eacute;but du manuel</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Crystal_Clear_manual.png" decoding="async" width="24" height="24"></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../File/Power_user_hub.png" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24"></a></span> <a href="wiki/fr//Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>Scripts FreeCAD&nbsp;:</b> <a href="wiki/fr//Python.html" title="Python/fr">Python</a>, <a href="wiki/fr//Introduction_to_Python.html" title="Introduction to Python/fr">Introduction &agrave; Python</a>, <a href="wiki/fr//Python_scripting_tutorial.html" title="Python scripting tutorial/fr">Tutoriel sur les scripts Python</a>, <a href="wiki/fr//FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/fr">D&eacute;buter avec les scripts</a></li></ul>
<hr>
<ul><li><b>Modules&nbsp;:</b> <a href="wiki/fr//Builtin_modules.html" title="Builtin modules/fr">Modules int&eacute;gr&eacute;s</a>, <a href="wiki/fr//Units.html" title="Units/fr">Unit&eacute;s</a>, <a href="wiki/fr//Quantity.html" title="Quantity/fr">Quantity</a></li>
<li><b>Ateliers&nbsp;:</b> <a href="wiki/fr//Workbench_creation.html" title="Workbench creation/fr">Cr&eacute;ation d'atelier</a>, <a href="wiki/fr//Gui_Command.html" title="Gui Command/fr">Commands Gui</a>, <a href="wiki/fr//Command.html" title="Command/fr">Les commandes</a>, <a href="wiki/fr//Installing_more_workbenches.html" title="Installing more workbenches/fr">Installer des ateliers suppl&eacute;mentaires</a></li>
<li><b>Maillages et objets Parts&nbsp;:</b> <a href="wiki/fr//Mesh_Scripting.html" title="Mesh Scripting/fr">Scripts Mesh</a>, <a href="wiki/fr//Topological_data_scripting.html" title="Topological data scripting/fr">Script de donn&eacute;es topologiques</a>, <a href="wiki/fr//Mesh_to_Part.html" title="Mesh to Part/fr">Conversion objet Mesh en Part</a>, <a href="wiki/fr//PythonOCC.html" title="PythonOCC/fr">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Objets param&eacute;triques&nbsp;:</b> <a href="wiki/fr//Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a>, <a href="wiki/fr//Viewprovider.html" title="Viewprovider/fr">Viewproviders</a> <small>(<a href="wiki/fr//Custom_icon_in_tree_view.html" title="Custom icon in tree view/fr">Ic&ocirc;ne personnalis&eacute;e dans l'arborescence</a>)</small></li>
<li><b>Sc&eacute;nographie&nbsp;:</b> <a href="wiki/fr//Scenegraph.html" title="Scenegraph/fr">Graphe de sc&egrave;ne Coin (Inventor)</a>, <a href="wiki/fr//Pivy.html" title="Pivy/fr">Pivy</a></li>
<li><b>Interface graphique&nbsp;:</b> <a href="wiki/fr//Interface_creation.html" title="Interface creation/fr">Cr&eacute;ation d'interface</a>, <a href="wiki/fr//Dialog_creation.html" title="Dialog creation/fr">Cr&eacute;ation d'une boite de dialogue</a> <small>(<a href="wiki/fr//Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/fr">1</a>, <a href="wiki/fr//Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/fr">2</a>, <a href="wiki/fr//Dialog_creation_setting_colors.html" title="Dialog creation setting colors/fr">3</a>, <a href="wiki/fr//Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/fr">4</a>, <a href="wiki/fr//PySide_usage_snippets.html" title="PySide usage snippets/fr">5</a>)</small>, <a href="wiki/fr//PySide.html" title="PySide/fr">PySide</a>, Exemples PySide <a href="wiki/fr//PySide_Beginner_Examples.html" title="PySide Beginner Examples/fr">d&eacute;butant</a>, <a href="wiki/fr//PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/fr">interm&eacute;diaire</a>, <a href="wiki/fr//PySide_Advanced_Examples.html" title="PySide Advanced Examples/fr">exp&eacute;riment&eacute;</a></li>
<li><b>Macros&nbsp;:</b> <a href="wiki/fr//Macros.html" title="Macros/fr">Macros</a>, <a href="wiki/fr//How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a></li>
<li><b>Int&eacute;gration&nbsp;:</b> <a href="wiki/fr//Embedding_FreeCAD.html" title="Embedding FreeCAD/fr">Int&eacute;grer FreeCAD</a>, <a href="wiki/fr//Embedding_FreeCADGui.html" title="Embedding FreeCADGui/fr">Int&eacute;gration de FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Autre&nbsp;:</b> <a href="wiki/fr//Expressions.html" title="Expressions/fr">Expressions</a>, <a href="wiki/fr//Code_snippets.html" title="Code snippets/fr">Extraits de codes</a>, <a href="wiki/fr//Line_drawing_function.html" title="Line drawing function/fr">Fonction - tracer une ligne</a>, <a href="wiki/fr//FreeCAD_vector_math_library.html" title="FreeCAD vector math library/fr">Biblioth&egrave;que math&eacute;matique vectorielle de FreeCAD</a> <small>(d&eacute;pr&eacute;ci&eacute;)</small></li></ul>
<hr>
<ul><li><b>Hubs&nbsp;:</b> <a href="wiki/fr//User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="wiki/fr//Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>, <a href="wiki/fr//Developer_hub.html" title="Developer hub/fr">Hub d&eacute;veloppeurs</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20241213100804
Cache expiry: 86400
Reduced expiry: false
Complications: [no&#8208;toc&#8208;conversion]
CPU time usage: 0.085 seconds
Real time usage: 0.090 seconds
Preprocessor visited node count: 228/1000000
Post&#8208;expand include size: 16556/2097152 bytes
Template argument size: 4088/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 7198/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    8.087      1 -total
 27.54%    2.227      1 Template:Powerdocnavi/fr
 27.10%    2.192      1 Template:Manual:TOC
 21.96%    1.776      5 Template:Code
 18.46%    1.493      1 Manual:Summary/fr
 16.42%    1.328      1 Template:Navigation_menu_2
 15.70%    1.270      2 Template:Docnav/fr
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:81410-0!canonical and timestamp 20241213100804 and revision id 1517218. Rendering was triggered because: api-parse
 -->
</div>
</div><script src="../site.js"></script>