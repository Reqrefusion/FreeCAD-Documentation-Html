<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">WikiRobots/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../de\WikiRobots.html" lang="de" title="WikiRoboter (100% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../WikiRobots.html" lang="en" title="WikiRobots (100% translated)">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../it\WikiRobots.html" lang="it" title="WikiRobots (100% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\WikiRobots.html" lang="pl" title="Robot Wiki (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../ru\WikiRobots.html" lang="ru" title="WikiRobots (16% translated)">русский</a></li></ul></div>
<div id="itsfree" style="text-align:center;color:black;background:#FDE0A8;margin:1em 7em;padding:0.5em 2em;border:2px solid #FF5706;">Les robots sont intrinsèquement dangereux car ils peuvent automatiquement faire beaucoup de dégâts. Utilisez-les avec une extrême prudence!</div>
<p><span id="Overview"></span>
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Présentation"><span class="tocnumber">1</span> <span class="toctext">Présentation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Utilisation"><span class="tocnumber">4</span> <span class="toctext">Utilisation</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Exemples"><span class="tocnumber">5</span> <span class="toctext">Exemples</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Commandes_liées_au_Wiki_FreeCAD"><span class="tocnumber">6</span> <span class="toctext">Commandes liées au Wiki FreeCAD</span></a></li>
</ul>
</div>
<h2><span id="Pr.C3.A9sentation"></span><span class="mw-headline" id="Présentation">Présentation</span></h2>
<p>Les tâches répétitives peuvent être automatisées à l'aide de robots ou de bots, c'est-à-dire de programmes logiciels fonctionnant seuls sur le wiki.
</p><p>Les robots classiques et les plus utilisés pour les sites wiki sont fournis par MediaWiki, sous le nom de paquet Pywikibot. Voir <a class="external text" href="https://www.mediawiki.org/wiki/Manual:Pywikibot/fr">Manuel:Pywikibot</a> pour des informations complètes.
</p><p>En un mot, Pywikibot est une collection de scripts Python capables d'utiliser l'API wiki native pour agir sur les sites wiki. Pour voir la liste des API pour le wiki de FreeCAD, visitez <a class="external free" href="http://www.freecadweb.org/wiki/api.php" rel="nofollow">http://www.freecadweb.org/wiki/api.php</a>.
</p><p>Pour utiliser Pywikibot, vous devez :
</p>
<ol><li>installer le package Pywikibot</li>
<li>configurez Pywikibot pour qu'il fonctionne sur le Wiki FreeCAD.</li>
<li>lancez les scripts dont vous avez besoin pour la tâche à accomplir.</li></ol>
<p>Il existe une multitude d'informations sur la façon d'installer, de configurer et d'utiliser Pywikibot. Cependant, soyez conscient que ces informations, bien qu'utiles, peuvent être trompeuses, car elles mélangent des instructions relatives à deux bases de code Pywikibot différentes et différentes versions de la collection de scripts Pywikibot.
</p><p>Dans ce qui suit, vous trouverez les instructions de base pour configurer et utiliser Pywikibot sur le wiki FreeCAD. Cela vous permettra d'effectuer les tâches les plus courantes. Pour une utilisation avancée, référez-vous au <a class="external text" href="https://www.mediawiki.org/wiki/Manual:Pywikibot/fr">Manuel:Pywikibot</a> et au code source Python.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Allez sur <a class="external free" href="http://tools.wmflabs.org/pywikibot/" rel="nofollow">http://tools.wmflabs.org/pywikibot/</a> et téléchargez <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span>. (le projet est aussi sous github, gerrit, etc... mais c'est un moyen simple d'obtenir un paquet complet et autonome).
</p><p>Décompressez le contenu dans le répertoire de votre choix.
</p><p>À moins que vous ne vouliez installer les bibliothèques dans vos librairies Python, vous avez terminé (si vous voulez toujours les installer, vérifiez le fichier <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">INSTALL</span> dans le répertoire de base).
</p><p>Pywikibot fonctionne avec Python 2.6 et 2.7 sans problème. Python 3 <s>n'a pas été testé jusqu'à présent avec FreeCAD wiki</s> fonctionne également.
</p><p><span id="Configuration"></span>
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Vous devez enregistrer le code Python suivant dans un fichier portant le nom <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py</span> dans le répertoire de base où vous avez décompressé <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span>. (pour être clair, dans le même répertoire où vous trouvez déjà un fichier appelé <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py.sample</span>).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: cp437  -*-</span>
<span class="n">family</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>
<span class="n">mylang</span> <span class="o">=</span> <span class="s1">'en'</span>
<span class="n">usernames</span><span class="p">[</span><span class="s1">'freecadwiki'</span><span class="p">][</span><span class="s1">'en'</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="c1">#usernames['freecadwiki']['freecadwiki'] = u'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="n">console_encoding</span> <span class="o">=</span> <span class="s1">'cp437'</span>
</pre></div>
<p>Dans le code ci-dessus :
</p>
<ul><li>remplacez <i>&lt;&lt;yourWikiUserName&gt;&gt;</i> par votre nom d'utilisateur Wiki</li>
<li>remplacer <i>cp437</i> par votre <i>console_encoding</i>. Pour connaître l'encodage de votre console, pour Windows et Linux, lancez l'interpréteur Python, entrez <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">import sys</span> suivi de <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">print sys.stdout.encoding</span>. Python écrira votre <span style="font-weight:normal; font-family:monospace, Consolas, Courier New, Courier; border: 1px solid #d8d8d8; padding: 2px 5px 2px 5px;">console_encoding</span> à l'écran.</li></ul>
<p><br/>
Vous devez ensuite enregistrer le code Python suivant dans un fichier portant le nom <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">freecadwiki_family.py</span> dans le sous-répertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/pywikibot/families</span>. (avec les autres fichiers <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">family_xxx.py</span>).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8  -*-</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s1">'$Id: 7f3891c3bbbfbd69c0b005de953514803d783d92 $'</span>

<span class="kn">from</span> <span class="nn">pywikibot</span> <span class="kn">import</span> <span class="n">family</span>


<span class="c1"># The MediaWiki family</span>
<span class="c1"># user-config.py: usernames['mediawiki']['mediawiki'] = 'User name'</span>
<span class="k">class</span> <span class="nc">Family</span><span class="p">(</span><span class="n">family</span><span class="o">.</span><span class="n">WikimediaFamily</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Family</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">langs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'en'</span><span class="p">:</span> <span class="s1">'www.freecadweb.org'</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">scriptpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'wiki'</span>

    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/index.php'</span> <span class="c1">#The path of index.php, look at your wiki address. </span>
	 
    <span class="k">def</span> <span class="nf">apipath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/api.php'</span> <span class="c1">#The path of api.php</span>

    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="c1"># Replace with the actual version being run on your wiki</span>
        <span class="k">return</span> <span class="s1">'1.20.3'</span>

    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Can be overridden to return 'https'. Other protocols are not supported.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">'http'</span>
        <span class="c1">#return 'https' # My server uses https</span>
</pre></div>
<p><span id="Usage"></span>
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<p>Vous êtes maintenant prêt à lancer les scripts de Pywikibot. Les scripts eux-mêmes sont contenus dans le sous-répertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span>, dont vous pouvez connaître les noms.
</p><p>Pour lancer les scripts, ouvrez un terminal et allez dans le répertoire de base (celui de l'installation, PAS le sous-répertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span>), et écrivez
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py &lt;&lt;scriptname&gt;&gt;.py -&lt;&lt;parameter&gt;&gt;</span>
</p><p>où bien sûr vous remplacez <i>&lt;&lt;scriptname&gt;&gt;</i> par le nom du script qui vous intéresse, et <i>&lt;&lt;parameter&gt;&gt;</i> par le ou les paramètres requis pour le script donné.
</p><p>Pour obtenir une description de l'utilisation et des paramètres d'un script, il suffit d'utiliser le paramètre <i>-help</i>. Par exemple, pour obtenir une description du script <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">replace.py</span> (l'un des plus utiles), tapez
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py replace.py -help</span>
</p><p>Il existe un autre paramètre très utile, valable pour tous les scripts, appelé <i>-simulate</i>, qui vous permet de tester les commandes sans endommager le Wiki. Utilisez-le avant de passer en mode 'live'.
</p><p><span id="Examples"></span>
</p>
<h2><span class="mw-headline" id="Exemples">Exemples</span></h2>
<p>Cette commande permet de se connecter au wiki
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py login.py</span>
</p><p><br/>
Cette commande imprimera une liste de toutes les pages contenant un lien vers SourceForge
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -weblink:sourceforge.net</span>
</p><p><br/>
Cette commande remplacera tous les liens vers l'ancien forum SourceForge par un lien vers le nouveau forum hébergé par freecad.org.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -weblink:sourceforge.net/apps/phpbb/free-cad "sourceforge.net/apps/phpbb/free-cad" "forum.freecad.org"</span>
</p><p><br/>
Cette commande imprimera une liste de toutes les pages contenant le mot 'PartDesign', en commençant par la page intitulée "2d Drafting Module" et en poursuivant par ordre alphabétique.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -start:"2d Drafting Module" -grep:PartDesign</span>
</p><p><br/>
Cette commande remplacera tous les liens sécurisés vers l'ancien forum SourceForge par un lien vers le nouveau forum hébergé par freecad.org dans les pages traduites.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -start:Translations:! "<a class="external free" href="https://sourceforge.net/apps/phpbb/free-cad" rel="nofollow">https://sourceforge.net/apps/phpbb/free-cad</a>" "<a class="external free" href="http://forum.freecad.org" rel="nofollow">http://forum.freecad.org</a>"</span>
</p>
<h2><span id="Commandes_li.C3.A9es_au_Wiki_FreeCAD"></span><span class="mw-headline" id="Commandes_liées_au_Wiki_FreeCAD">Commandes liées au Wiki FreeCAD</span></h2>
<p>Compter toutes les pages dans lesquelles un modèle wiki spécifique est utilisé
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -count GuiCommand</span>
</p><p><br/>
Liste de toutes les pages dans lesquelles un modèle wiki spécifique est utilisé.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -list GuiCommand</span>
</p><p>Remplacer une chaîne dans toutes les pages listées dans la catégorie Arch
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py replace.py -cat:Arch</span>
</p>
<!-- 
NewPP limit report
Cached time: 20241214203411
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.077 seconds
Real time usage: 0.536 seconds
Preprocessor visited node count: 223/1000000
Post‐expand include size: 3557/2097152 bytes
Template argument size: 2125/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 2/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 5564/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  418.570      1 -total
 98.98%  414.289      2 Template:Code
  0.22%    0.916     12 Template:SystemInput
  0.19%    0.785     11 Template:FileName
  0.17%    0.701      1 Template:VeryImportantMessage
  0.14%    0.578      1 Template:SystemOutput
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:243405-0!canonical and timestamp 20241214203411 and revision id 1431296. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
