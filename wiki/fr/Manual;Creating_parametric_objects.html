<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Manual:Creating parametric objects/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="../de\Manual;Creating_parametric_objects.html" lang="de" title="Handbuch:Erstellung parametrischer Objekte (8% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Manual;Creating_parametric_objects.html" lang="en" title="Manual:Creating parametric objects (100% translated)">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="../it\Manual;Creating_parametric_objects.html" lang="it" title="Manuale:Creare oggetti parametrici (41% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../pl\Manual;Creating_parametric_objects.html" lang="pl" title="Podręcznik:Tworzenie obiektów parametrycznych (32% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../ro\Manual;Creating_parametric_objects.html" lang="ro" title="Manual:Crearea de obiecte parametrice (35% translated)">română</a></li>
<li><a class="mw-pt-progress mw-pt-progress--low" dir="ltr" href="../ru\Manual;Creating_parametric_objects.html" lang="ru" title="Создание параметрических объектов (27% translated)">русский</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../fr\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Création et manipulation de la géométrie</a></div>
<div style="margin: 4px 0; float: right;"><a href="../fr\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Création d'outils d'interface</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../fr\Manual;Introduction.html" title="Manual:Introduction/fr">Début du manuel</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="manualtoc" id="toc" style="float:right; margin:10px 0px 10px 10px;">
<ul><li><a href="../fr\Manual;Introduction.html" title="Manual:Introduction/fr">Introduction</a></li>
<li>Découvrir FreeCAD
<ul><li><a href="../fr\Manual;What_is_FreeCAD.html" title="Manual:What is FreeCAD/fr">Qu'est-ce que FreeCAD ?</a></li>
<li><a href="../fr\Manual;Installing.html" title="Manual:Installing/fr">Installation</a>
<ul><li><a href="../fr\Manual;Installing.html#Installation_sur_Windows" title="Manual:Installing/fr">Installation sur Windows</a></li>
<li><a href="../fr\Manual;Installing.html#Installation_sur_Linux" title="Manual:Installing/fr">Installation sur Linux</a></li>
<li><a href="../fr\Manual;Installing.html#Installation_sur_Mac_OS" title="Manual:Installing/fr">Installation sur Mac OS</a></li>
<li><a href="../fr\Manual;Installing.html#Désinstallation" title="Manual:Installing/fr">Désinstallation</a></li>
<li><a href="../fr\Manual;Installing.html#Définir_les_préférences_de_base" title="Manual:Installing/fr">Définir les préférences de base</a></li>
<li><a href="../fr\Manual;Installing.html#Installation_de_contenu_supplémentaire" title="Manual:Installing/fr">Installation de contenu supplémentaire</a></li></ul></li>
<li><a href="../fr\Manual;The_FreeCAD_Interface.html" title="Manual:The FreeCAD Interface/fr">L'interface FreeCAD</a>
<ul><li><a href="../fr\Manual;The_FreeCAD_Interface.html#Les_ateliers" title="Manual:The FreeCAD Interface/fr">Les ateliers</a></li>
<li><a href="../fr\Manual;The_FreeCAD_Interface.html#L.27interface" title="Manual:The FreeCAD Interface/fr">L'interface</a></li>
<li><a href="../fr\Manual;The_FreeCAD_Interface.html#Personnalisation_de_l.27interface" title="Manual:The FreeCAD Interface/fr">Personnalisation de l'interface</a></li></ul></li>
<li><a href="../fr\Manual;Navigating_in_the_3D_view.html" title="Manual:Navigating in the 3D view/fr">Navigation dans la vue 3D</a>
<ul><li><a href="../fr\Manual;Navigating_in_the_3D_view.html#Un_mot_sur_l.27espace_3D" title="Manual:Navigating in the 3D view/fr">Un mot sur l'espace 3D</a></li>
<li><a href="../fr\Manual;Navigating_in_the_3D_view.html#La_vue_3D_FreeCAD" title="Manual:Navigating in the 3D view/fr">La vue 3D FreeCAD</a></li>
<li><a href="../fr\Manual;Navigating_in_the_3D_view.html#S.C3.A9lection_d.27objets" title="Manual:Navigating in the 3D view/fr">Sélection d'objets</a></li></ul></li>
<li><a href="../fr\Manual;The_FreeCAD_document.html" title="Manual:The FreeCAD document/fr">Le document FreeCAD</a></li>
<li><a href="../fr\Manual;Parametric_objects.html" title="Manual:Parametric objects/fr">Objets paramétriques</a></li>
<li><a href="../fr\Manual;Import_and_export_to_other_filetypes.html" title="Manual:Import and export to other filetypes/fr">Importer et exporter vers d'autres types de fichiers</a></li></ul></li>
<li>Travailler avec FreeCAD
<ul><li><a href="../fr\Manual;All_workbenches_at_a_glance.html" title="Manual:All workbenches at a glance/fr">Tous les ateliers en un coup d'œil</a></li>
<li><a href="../fr\Manual;Traditional_modeling,_the_CSG_way.html" title="Manual:Traditional modeling, the CSG way/fr">Modélisation traditionnelle, mode CSG</a></li>
<li><a href="../fr\Manual;Traditional_2D_drafting.html" title="Manual:Traditional 2D drafting/fr">Dessin 2D traditionnel</a></li>
<li><a href="../fr\Manual;Modeling_for_product_design.html" title="Manual:Modeling for product design/fr">Modélisation pour la conception de produits</a></li>
<li><a href="../fr\Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing/fr">Préparation de modèles pour l'impression 3D</a>
<ul><li><a href="../fr\Manual;Preparing_models_for_3D_printing.html#Exportation_vers_des_trancheuses" title="Manual:Preparing models for 3D printing/fr">Exportation vers des trancheuses</a></li>
<li><a href="../fr\Manual;Preparing_models_for_3D_printing.html#Conversion_d.27objets_en_mailles" title="Manual:Preparing models for 3D printing/fr">Conversion d'objets en mailles</a></li>
<li><a href="../fr\Manual;Preparing_models_for_3D_printing.html#Utilisation_de_Slic3r" title="Manual:Preparing models for 3D printing/fr">Utilisation de Slic3r</a></li>
<li><a href="../fr\Manual;Preparing_models_for_3D_printing.html#Utilisation_du_greffon_.28addon.29_Cura" title="Manual:Preparing models for 3D printing/fr">Utilisation de l'extension Cura</a></li>
<li><a href="../fr\Manual;Preparing_models_for_3D_printing.html#G.C3.A9n.C3.A9ration_du_G-code" title="Manual:Preparing models for 3D printing/fr">Génération du G-code</a></li></ul></li>
<li><a href="../fr\Manual;Generating_2D_drawings.html" title="Manual:Generating 2D drawings/fr">Génération de dessins 2D</a></li>
<li><a href="../fr\Manual;BIM_modeling.html" title="Manual:BIM modeling/fr">Modélisation BIM</a></li>
<li><a href="../fr\Manual;Using_spreadsheets.html" title="Manual:Using spreadsheets/fr">Utilisation de feuilles de calcul</a>
<ul><li><a href="../fr\Manual;Using_spreadsheets.html#Lecture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">Lecture de propriétés</a></li>
<li><a href="../fr\Manual;Using_spreadsheets.html#Ecriture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">Écriture de propriétés</a></li></ul></li>
<li><a href="../fr\Manual;Creating_FEM_analyses.html" title="Manual:Creating FEM analyses/fr">Création d'analyses FEM</a></li>
<li><a href="../fr\Manual;Creating_renderings.html" title="Manual:Creating renderings/fr">Création de rendus réalistes</a></li></ul></li>
<li>Programmation Python
<ul><li><a href="../fr\Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/fr">Introduction à Python</a>
<ul><li><a href="../fr\Manual;A_gentle_introduction.html#Ecrire_du_code_python" title="Manual:A gentle introduction/fr">Écrire du code Python</a></li>
<li><a href="../fr\Manual;A_gentle_introduction.html#Manipuler_des_objets_FreeCAD" title="Manual:A gentle introduction/fr">Manipuler des objets FreeCAD</a></li>
<li><a href="../fr\Manual;A_gentle_introduction.html#Vecteurs_et_emplacements" title="Manual:A gentle introduction/fr">Vecteurs et emplacements</a></li></ul></li>
<li><a href="../fr\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Création et manipulation de la géométrie</a></li>
<li><a class="mw-selflink selflink">Création d'objets paramétriques</a></li>
<li><a href="../fr\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Création d'outils d'interface</a></li></ul></li>
<li><a href="../fr\Manual;The_Community.html" title="Manual:The Community/fr">La communauté</a></li></ul></div>
<div class="mw-translate-fuzzy">
<p>Dans le <a href="../Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry">chapitre précédent</a>, nous avons vu comment créer la géométrie Part et comment l'afficher sur l’écran, en l'attachant à un objet de document "dumb" (non paramétrique). C'est fastidieux quand nous voulons changer la forme de cet objet. Nous devrions créer une nouvelle forme, puis l’attribuer à nouveau à notre objet.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Cependant, nous avons également vu dans tous les chapitres précédents de ce manuel comment les objets paramétriques sont puissants. Il suffit de changer une propriété, et la forme est recalculée à la volée.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>En interne, les objets paramétriques ne font rien de différent de ce que nous venons de faire : ils recalculent le contenu de leur propriété Shape, à plusieurs reprises, chaque fois qu'une autre propriété a été modifiée.
</p>
</div>
<ul><li>Declares the necessary properties for the object.</li>
<li>Defines the behavior when any of these properties are modified.</li></ul>
<p>The structure of such parametric object is as simple as this:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">myParametricObject</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"MyLength"</span><span class="p">)</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"Recalculating the shape..."</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"The value of MyLength is:"</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">MyLength</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>FreeCAD fournit un système très pratique pour créer de tels objets paramétriques complètement en Python. Ils consistent en une classe Python simple, qui définit toutes les propriétés dont l'objet a besoin, et ce qui se passera quand une de ces propriétés changera. La structure de l'objet paramétrique est aussi simple que ceci :
</p>
</div>
<ul><li>Store the class itself in the <b>Proxy</b> attribute of the FreeCAD document object:</li></ul>
<p>By assigning <b>self</b> to the <b>Proxy</b> attribute of the FreeCAD document object, we link the logic of our Python class to the FreeCAD object. This means the document object will "carry" the Python class code inside itself, allowing it to behave according to the logic defined in the class. This connection enables FreeCAD to know how to interact with and recalculate the parametric object.
</p>
<ul><li>Create all the properties the object needs:</li></ul>
<p>Using the <b>addProperty</b> method, we define the custom properties required by the object. Properties act as parameters or variables for the object and can be accessed, modified, and displayed in FreeCAD's property editor. In the example, we add a floating-point property named <b>MyLength</b>. This property will later influence the shape or behavior of the object.
</p><p>class myParametricObject:
</p>
<pre>  def __init__(self,obj):
    obj.Proxy = self
    obj.addProperty("App::PropertyFloat","MyLength")
    ...
       
  def execute(self,obj):
    print ("Recalculating the shape...")
    print ("The value of MyLength is:")
    print (obj.MyLength)
    ...
</pre>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"dummy"</span><span class="p">)</span><span class="o">.</span><span class="n">supportedProperties</span><span class="p">()</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Toutes les classes Python ont généralement une méthode d'initialisation (__init__ method). Ce qui est à l'intérieur de cette méthode est exécuté lorsque cette classe est instanciée (ce qui signifie, en argot de programmation, qu'un objet Python est créé à partir de cette classe. Comprenez une classe comme un "modèle" pour en créer des copies en direct). Ici dans notre fonction d'initialisation (__init__ function), nous faisons deux choses importantes : 1- stocker notre classe elle-même dans l'attribut "Proxy" de notre document objet FreeCAD, c'est-à-dire que le document objet de FreeCAD portera ce code en lui-même, et 2- créer toutes les propriétés dont notre objet a besoin. Il existe de nombreux types de propriétés disponibles, vous pouvez obtenir la liste complète en tapant ce code :
</p>
</div>
<p>FreeCAD.ActiveDocument.addObject("Part::FeaturePython","dummy").supportedProperties()
</p>
<ul><li>The <b>execute</b> method is called whenever the object needs to be updated.</li>
<li>It is responsible for recalculating the shape and assigning it to the object's <b>Shape</b> attribute.</li>
<li>The <b>obj</b> argument gives access to the FreeCAD document object, enabling you to make changes programmatically.</li></ul>
<p>With this system, FreeCAD handles the rest—ensuring that the object is properly updated in the document and displayed correctly in the graphical interface.
</p>
<div class="mw-translate-fuzzy">
<p>Ensuite, la deuxième partie importante est la méthode d'exécution. Tout code dans cette méthode sera exécuté lorsque l'objet est marqué pour être recalculé, ce qui se produira lorsqu'une propriété a été modifiée. C'est tout ce qu'il y a à faire. Dans l'exécution, vous devez faire tout ce qui doit être fait, c'est-à-dire calculer une nouvelle forme, et attribuer à l'objet lui-même quelque chose comme obj.Shape = myNewShape. C'est pourquoi la méthode d'exécution prend un argument "obj" qui sera l'objet du document FreeCAD lui-même, afin que nous puissions le manipuler dans notre code python.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Une dernière chose est importante à retenir : lorsque vous créez de tels objets paramétriques dans un document FreeCAD, lorsque vous enregistrez le fichier, le code python ci-dessus n'est pas stocké dans le fichier. C'est pour des raisons de sécurité, si un fichier FreeCAD contenait un code, n’importe qui pourrait distribuer des fichiers FreeCAD contenant des codes malveillants qui pourraient nuire à d'autres personnes les utilisant sur leurs ordinateurs. Donc, si vous distribuez un fichier contenant des objets fabriqués avec ce qui précède, ce code doit également être présent sur l'ordinateur qui ouvrira le fichier. La manière la plus simple de faire est généralement de sauvegarder le code ci-dessus dans une macro et de distribuer la macro avec votre fichier FreeCAD ou de partager votre macro sur le dépôt de macros FreeCAD (<a href="../Macros_recipes.html" title="Macros recipes">FreeCAD macros repository</a>) où n'importe qui peut la télécharger.
</p>
</div>
<p>Ci-dessous, nous ferons un petit exercice, en construisant un objet paramétrique qui est une simple Face rectangulaire paramétrique. Des exemples plus complexes sont disponibles sur Exemple d'objet paramétrique (<a href="../Scripted_objects.html" title="Scripted objects">parametric object example</a>) et dans le code source de FreeCAD lui-même (<a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">FreeCAD source code</a>).
</p><p>Nous allons donner à notre objet deux propriétés : Longueur et Largeur, que nous utiliserons pour construire un rectangle. Puis, puisque notre objet aura déjà une propriété de placement prédéfinie (tout objet géométrique en a une par défaut, il n'est pas nécessaire de l'ajouter nous-mêmes), nous décalerons notre rectangle à l'emplacement / orientation définis dans le Placement, de sorte que l'utilisateur pourra déplacer le rectangle n'importe où en éditant la propriété Placement.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">ParametricRectangle</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Width"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="c1"># We need to import the FreeCAD module here too, because we might be running out of the Console</span>
        <span class="c1"># (in a macro, for example) where the FreeCAD module has not been imported automatically:</span>
        <span class="kn">import</span> <span class="nn">FreeCAD</span>
        <span class="kn">import</span> <span class="nn">Part</span>

        <span class="c1"># First we need to make sure the values of Length and Width are not 0</span>
        <span class="c1"># otherwise Part.LineSegment will complain that both points are equal:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># If yes, exit this method without doing anything:</span>
            <span class="k">return</span>

        <span class="c1"># We create 4 points for the 4 corners:</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># We create 4 edges:</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e2</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e3</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e4</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>

        <span class="c1"># We create a wire:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Wire</span><span class="p">([</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">,</span> <span class="n">e4</span><span class="p">])</span>

        <span class="c1"># We create a face:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Face</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># All shapes have a Placement too. We give our shape the value of the placement</span>
        <span class="c1"># set by the user. This will move/rotate the face automatically.</span>
        <span class="n">f</span><span class="o">.</span><span class="n">Placement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Placement</span>

        <span class="c1"># All done, we can attribute our shape to the object!</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">f</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Au lieu de coller le code ci-dessus dans la console Python, nous devrions plutôt l'enregistrer quelque part, alors nous pourrons le réutiliser et le modifier ultérieurement. Par exemple dans une nouvelle macro (menu Outils -&gt; Macros → Créer). Nommez-le, par exemple, "ParamRectangle". Cependant, les macros FreeCAD sont enregistrées avec une extension .FCMro, que Python ne reconnaît pas lors de l'importation. Donc, avant d’utiliser le code ci-dessus, nous devrons renommer le fichier ParamRectangle.FCMacro en ParamRectangle.py. Cela se fait simplement à partir de votre explorateur de fichiers, en naviguant vers le dossier Macros indiqué dans le menu Outils -&gt; Macros.
</p>
</div>
<p>Une fois cela fait, nous pouvons maintenant l’utiliser dans la console Python :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">ParamRectangle</span>
</pre></div>
<p>En explorant le contenu de ParamRectangle, nous pouvons vérifier qu'il contient notre Classe ParametricRectangle.
</p>
<div class="mw-translate-fuzzy">
<p>Pour créer un nouvel objet paramétrique à l'aide de notre classe ParametricRectangle, nous utiliserons le code suivant. Observez que nous utilisons Part::FeaturePython au lieu de Part::Feature que nous avons utilisé dans les chapitres précédents (la version Python permet de définir notre propre comportement paramétrique):
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">myObj</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"Rectangle"</span><span class="p">)</span>
<span class="n">ParamRectangle</span><span class="o">.</span><span class="n">ParametricRectangle</span><span class="p">(</span><span class="n">myObj</span><span class="p">)</span>
<span class="n">myObj</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># This is mandatory unless we code the ViewProvider too.</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython","Rectangle")
</p>
<pre>ParamRectangle.ParametricRectangle(myObj)
myObj.ViewObject.Proxy = 0 # this is mandatory unless we code the ViewProvider too
FreeCAD.ActiveDocument.recompute()
</pre>
<ul><li><b>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython", "Rectangle")</b>: Creates a new <b>Part::FeaturePython</b> object named <b>Rectangle</b> in the active FreeCAD document. This object is specifically designed for custom parametric behavior, allowing Python-defined logic to manage its properties and behavior.</li></ul>
<ul><li><b>ParamRectangle.ParametricRectangle(myObj)</b>: Initializes the object by associating it with the <b>ParametricRectangle</b> class from the <b>ParamRectangle</b> module or script. This links the custom Python-defined logic to the object, enabling it to act as a parametric object.</li></ul>
<ul><li><b>myObj.ViewObject.Proxy = 0</b>: Resets the <b>ViewObject.Proxy</b> attribute to 0, ensuring that the object uses FreeCAD’s default view handling. This step is required unless you define a custom ViewProvider to manage the visual representation of the object.</li></ul>
<ul><li><b>FreeCAD.ActiveDocument.recompute()</b>: Recomputes the document to update the geometry and reflect changes in the FreeCAD graphical interface, making the new object fully visible and functional</li></ul>
<div class="mw-translate-fuzzy">
<p>Rien ne s'affiche encore à l'écran, car les propriétés Longueur et Largeur sont à 0, ce qui déclenchera notre condition de "ne rien faire" à l'intérieur de l'exécution. Nous devons juste changer les valeurs de Longueur et Largeur, et notre objet apparaîtra magiquement et sera recalculé à la volée.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Bien sûr, il serait fastidieux de devoir taper ces 4 lignes de code Python chaque fois que nous voulons créer un nouveau rectangle paramétrique. Une façon très simple de résoudre ceci est de placer les 4 lignes ci-dessus dans notre fichier ParamRectangle.py, à la fin, après la fin de la classe ParametricRectange (nous pouvons le faire à partir de l'éditeur Macro).
</p>
</div>
<p>Maintenant, lorsque nous tapons import ParamRectangle, un nouveau rectangle paramétrique sera automatiquement créé. Encore mieux, nous pouvons ajouter un bouton de barre d'outils qui fera exactement cela :
</p>
<div class="mw-translate-fuzzy">
<ul><li>Ouvrir le menu <b>Outils -&gt; Personnaliser</b></li>
<li>Sous l'onglet "Macros", sélectionnez notre macro ParamRectangle.py, complétez les détails au fur et à mesure que vous le souhaitez, et appuyez sur "Ajouter":</li></ul>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_04.jpg"><img decoding="async" height="501" src="../File/Exercise_python_04.jpg" width="752"/></a></span>
</p>
</div>
<p>Sous l'onglet Barres d'outils, créez une nouvelle barre d'outils personnalisée dans l'atelier de votre choix (ou globalement), sélectionnez votre macro et ajoutez-la à la barre d'outils :
</p>
<div class="mw-translate-fuzzy">
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/Exercise_python_05.jpg"><img decoding="async" height="501" src="../File/Exercise_python_05.jpg" width="752"/></a></span>
</p>
</div>
<ul><li>Nous avons maintenant un nouveau bouton de barre d'outils qui, lorsqu'il sera cliqué, créera un rectangle paramétrique.</li></ul>
<div class="mw-translate-fuzzy">
<p>Rappelez-vous, si vous souhaitez distribuer des fichiers créés avec ce nouvel outil à d'autres personnes, ils doivent avoir également installé la macro ParamRectangle.py sur leur ordinateur.
</p>
</div>
<p><b>Lire plus d'informations</b>
</p>
<ul><li><a href="../Macros_recipes.html" title="Macros recipes">Le dépôt de macros FreeCAD</a></li>
<li><a href="../Scripted_objects.html" title="Scripted objects">Exemple d'objet paramétrique</a></li>
<li><a class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py" rel="nofollow">Plus d'exemples dans le code FreeCAD</a></li></ul>
<p><br/>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
<div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-left.svg" width="16"/></span></span> <a href="../fr\Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Création et manipulation de la géométrie</a></div>
<div style="margin: 4px 0; float: right;"><a href="../fr\Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Création d'outils d'interface</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="16" src="../File/Arrow-right.svg" width="16"/></span></span></div>
<div style="text-align:center"><a href="../fr\Manual;Introduction.html" title="Manual:Introduction/fr">Début du manuel</a>
<span class="mw-default-size" typeof="mw:File"><span><img decoding="async" height="24" src="../File/Crystal_Clear_manual.png" width="24"/></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/Power_user_hub.png"><img decoding="async" height="24" src="../File/Power_user_hub.png" width="24"/></a></span> <a href="../fr\Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs expérimentés</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>Scripts FreeCAD :</b> <a href="../fr\Python.html" title="Python/fr">Python</a>, <a href="../fr\Introduction_to_Python.html" title="Introduction to Python/fr">Introduction à Python</a>, <a href="../fr\Python_scripting_tutorial.html" title="Python scripting tutorial/fr">Tutoriel sur les scripts Python</a>, <a href="../fr\FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/fr">Débuter avec les scripts</a></li></ul>
<hr/>
<ul><li><b>Modules :</b> <a href="../fr\Builtin_modules.html" title="Builtin modules/fr">Modules intégrés</a>, <a href="../fr\Units.html" title="Units/fr">Unités</a>, <a href="../fr\Quantity.html" title="Quantity/fr">Quantity</a></li>
<li><b>Ateliers :</b> <a href="../fr\Workbench_creation.html" title="Workbench creation/fr">Création d'atelier</a>, <a href="../fr\Gui_Command.html" title="Gui Command/fr">Commands Gui</a>, <a href="../fr\Command.html" title="Command/fr">Les commandes</a>, <a href="../fr\Installing_more_workbenches.html" title="Installing more workbenches/fr">Installer des ateliers supplémentaires</a></li>
<li><b>Maillages et objets Parts :</b> <a href="../fr\Mesh_Scripting.html" title="Mesh Scripting/fr">Scripts Mesh</a>, <a href="../fr\Topological_data_scripting.html" title="Topological data scripting/fr">Script de données topologiques</a>, <a href="../fr\Mesh_to_Part.html" title="Mesh to Part/fr">Conversion objet Mesh en Part</a>, <a href="../fr\PythonOCC.html" title="PythonOCC/fr">PythonOCC</a></li></ul>
<hr/>
<ul><li><b>Objets paramétriques :</b> <a href="../fr\Scripted_objects.html" title="Scripted objects/fr">Objets créés par script</a>, <a href="../fr\Viewprovider.html" title="Viewprovider/fr">Viewproviders</a> <small>(<a href="../fr\Custom_icon_in_tree_view.html" title="Custom icon in tree view/fr">Icône personnalisée dans l'arborescence</a>)</small></li>
<li><b>Scénographie :</b> <a href="../fr\Scenegraph.html" title="Scenegraph/fr">Graphe de scène Coin (Inventor)</a>, <a href="../fr\Pivy.html" title="Pivy/fr">Pivy</a></li>
<li><b>Interface graphique :</b> <a href="../fr\Interface_creation.html" title="Interface creation/fr">Création d'interface</a>, <a href="../fr\Dialog_creation.html" title="Dialog creation/fr">Création d'une boite de dialogue</a> <small>(<a href="../fr\Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/fr">1</a>, <a href="../fr\Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/fr">2</a>, <a href="../fr\Dialog_creation_setting_colors.html" title="Dialog creation setting colors/fr">3</a>, <a href="../fr\Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/fr">4</a>, <a href="../fr\PySide_usage_snippets.html" title="PySide usage snippets/fr">5</a>)</small>, <a href="../fr\PySide.html" title="PySide/fr">PySide</a>, Exemples PySide <a href="../fr\PySide_Beginner_Examples.html" title="PySide Beginner Examples/fr">débutant</a>, <a href="../fr\PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/fr">intermédiaire</a>, <a href="../fr\PySide_Advanced_Examples.html" title="PySide Advanced Examples/fr">expérimenté</a></li>
<li><b>Macros :</b> <a href="../fr\Macros.html" title="Macros/fr">Macros</a>, <a href="../fr\How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a></li>
<li><b>Intégration :</b> <a href="../fr\Embedding_FreeCAD.html" title="Embedding FreeCAD/fr">Intégrer FreeCAD</a>, <a href="../fr\Embedding_FreeCADGui.html" title="Embedding FreeCADGui/fr">Intégration de FreeCADGui</a></li></ul>
<hr/>
<ul><li><b>Autre :</b> <a href="../fr\Expressions.html" title="Expressions/fr">Expressions</a>, <a href="../fr\Code_snippets.html" title="Code snippets/fr">Extraits de codes</a>, <a href="../fr\Line_drawing_function.html" title="Line drawing function/fr">Fonction - tracer une ligne</a>, <a href="../fr\FreeCAD_vector_math_library.html" title="FreeCAD vector math library/fr">Bibliothèque mathématique vectorielle de FreeCAD</a> <small>(déprécié)</small></li></ul>
<hr/>
<ul><li><b>Hubs :</b> <a href="../fr\User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr\Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs expérimentés</a>, <a href="../fr\Developer_hub.html" title="Developer hub/fr">Hub développeurs</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241214202911
Cache expiry: 86400
Reduced expiry: false
Complications: [no‐toc‐conversion]
CPU time usage: 0.098 seconds
Real time usage: 0.126 seconds
Preprocessor visited node count: 206/1000000
Post‐expand include size: 16820/2097152 bytes
Template argument size: 5537/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 11775/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   10.109      1 -total
 26.91%    2.720      1 Template:Powerdocnavi/fr
 25.73%    2.601      1 Template:Manual:TOC
 24.95%    2.522      5 Template:Code
 18.58%    1.878      1 Manual:Summary/fr
 16.70%    1.688      1 Template:Navigation_menu_2
 14.87%    1.503      2 Template:Docnav/fr
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:81379-0!canonical and timestamp 20241214202911 and revision id 1517197. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
