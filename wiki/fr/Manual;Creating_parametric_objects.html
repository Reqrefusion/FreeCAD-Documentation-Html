<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Manual:Creating parametric objects/fr</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../de/Manual;Creating_parametric_objects.html" class="mw-pt-progress mw-pt-progress--low" title="Handbuch:Erstellung parametrischer Objekte (25% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Manual;Creating_parametric_objects.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Manual:Creating parametric objects (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="../it/Manual;Creating_parametric_objects.html" class="mw-pt-progress mw-pt-progress--low" title="Manuale:Creare oggetti parametrici (36% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Manual;Creating_parametric_objects.html" class="mw-pt-progress mw-pt-progress--complete" title="Podr&#281;cznik:Tworzenie obiekt&oacute;w parametrycznych (97% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ro/Manual;Creating_parametric_objects.html" class="mw-pt-progress mw-pt-progress--low" title="Manual:Crearea de obiecte parametrice (31% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="../ru/Manual;Creating_parametric_objects.html" class="mw-pt-progress mw-pt-progress--low" title="&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; (22% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="../fr/Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Cr&eacute;ation et manipulation de la g&eacute;om&eacute;trie</a></div>
    <div style="margin: 4px 0; float: right;"><a href="../fr/Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Cr&eacute;ation d'outils d'interface</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="../fr/Manual;Introduction.html" title="Manual:Introduction/fr">D&eacute;but du manuel</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Crystal_Clear_manual.png" decoding="async" width="24" height="24"></span></span></div>
</div>
<div id="toc" class="manualtoc" style="float:right; margin:10px 0px 10px 10px;">
<ul><li><a href="../fr/Manual;Introduction.html" title="Manual:Introduction/fr">Introduction</a></li>
<li>D&eacute;couvrir FreeCAD
<ul><li><a href="../fr/Manual;What_is_FreeCAD.html" title="Manual:What is FreeCAD/fr">Qu'est-ce que FreeCAD&nbsp;?</a></li>
<li><a href="../fr/Manual;Installing.html" title="Manual:Installing/fr">Installation</a>
<ul><li><a href="../fr/Manual;Installing.html#Installation_sur_Windows" title="Manual:Installing/fr">Installation sur Windows</a></li>
<li><a href="../fr/Manual;Installing.html#Installation_sur_Linux" title="Manual:Installing/fr">Installation sur Linux</a></li>
<li><a href="../fr/Manual;Installing.html#Installation_sur_Mac_OS" title="Manual:Installing/fr">Installation sur Mac OS</a></li>
<li><a href="../fr/Manual;Installing.html#D%C3%A9sinstallation" title="Manual:Installing/fr">D&eacute;sinstallation</a></li>
<li><a href="../fr/Manual;Installing.html#D%C3%A9finir_les_pr%C3%A9f%C3%A9rences_de_base" title="Manual:Installing/fr">D&eacute;finir les pr&eacute;f&eacute;rences de base</a></li>
<li><a href="../fr/Manual;Installing.html#Installation_de_contenu_suppl%C3%A9mentaire" title="Manual:Installing/fr">Installation de contenu suppl&eacute;mentaire</a></li></ul></li>
<li><a href="../fr/Manual;The_FreeCAD_Interface.html" title="Manual:The FreeCAD Interface/fr">L'interface FreeCAD</a>
<ul><li><a href="../fr/Manual;The_FreeCAD_Interface.html#Les_ateliers" title="Manual:The FreeCAD Interface/fr">Les ateliers</a></li>
<li><a href="../fr/Manual;The_FreeCAD_Interface.html#L.27interface" title="Manual:The FreeCAD Interface/fr">L'interface</a></li>
<li><a href="../fr/Manual;The_FreeCAD_Interface.html#Personnalisation_de_l.27interface" title="Manual:The FreeCAD Interface/fr">Personnalisation de l'interface</a></li></ul></li>
<li><a href="../fr/Manual;Navigating_in_the_3D_view.html" title="Manual:Navigating in the 3D view/fr">Navigation dans la vue 3D</a>
<ul><li><a href="../fr/Manual;Navigating_in_the_3D_view.html#Un_mot_sur_l.27espace_3D" title="Manual:Navigating in the 3D view/fr">Un mot sur l'espace 3D</a></li>
<li><a href="../fr/Manual;Navigating_in_the_3D_view.html#La_vue_3D_FreeCAD" title="Manual:Navigating in the 3D view/fr">La vue 3D FreeCAD</a></li>
<li><a href="../fr/Manual;Navigating_in_the_3D_view.html#S.C3.A9lection_d.27objets" title="Manual:Navigating in the 3D view/fr">S&eacute;lection d'objets</a></li></ul></li>
<li><a href="../fr/Manual;The_FreeCAD_document.html" title="Manual:The FreeCAD document/fr">Le document FreeCAD</a></li>
<li><a href="../fr/Manual;Parametric_objects.html" title="Manual:Parametric objects/fr">Objets param&eacute;triques</a></li>
<li><a href="../fr/Manual;Import_and_export_to_other_filetypes.html" title="Manual:Import and export to other filetypes/fr">Importer et exporter vers d'autres types de fichiers</a></li></ul></li>
<li>Travailler avec FreeCAD
<ul><li><a href="../fr/Manual;All_workbenches_at_a_glance.html" title="Manual:All workbenches at a glance/fr">Tous les ateliers en un coup d'&oelig;il</a></li>
<li><a href="../fr/Manual;Traditional_modeling,_the_CSG_way.html" title="Manual:Traditional modeling, the CSG way/fr">Mod&eacute;lisation traditionnelle, mode CSG</a></li>
<li><a href="../fr/Manual;Traditional_2D_drafting.html" title="Manual:Traditional 2D drafting/fr">Dessin 2D traditionnel</a></li>
<li><a href="../fr/Manual;Modeling_for_product_design.html" title="Manual:Modeling for product design/fr">Mod&eacute;lisation pour la conception de produits</a></li>
<li><a href="../fr/Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing/fr">Pr&eacute;paration de mod&egrave;les pour l'impression 3D</a>
<ul><li><a href="../fr/Manual;Preparing_models_for_3D_printing.html#Exportation_vers_des_trancheuses" title="Manual:Preparing models for 3D printing/fr">Exportation vers des trancheuses</a></li>
<li><a href="../fr/Manual;Preparing_models_for_3D_printing.html#Conversion_d.27objets_en_mailles" title="Manual:Preparing models for 3D printing/fr">Conversion d'objets en mailles</a></li>
<li><a href="../fr/Manual;Preparing_models_for_3D_printing.html#Utilisation_de_Slic3r" title="Manual:Preparing models for 3D printing/fr">Utilisation de Slic3r</a></li>
<li><a href="../fr/Manual;Preparing_models_for_3D_printing.html#Utilisation_du_greffon_.28addon.29_Cura" title="Manual:Preparing models for 3D printing/fr">Utilisation de l'extension Cura</a></li>
<li><a href="../fr/Manual;Preparing_models_for_3D_printing.html#G.C3.A9n.C3.A9ration_du_G-code" title="Manual:Preparing models for 3D printing/fr">G&eacute;n&eacute;ration du G-code</a></li></ul></li>
<li><a href="../fr/Manual;Generating_2D_drawings.html" title="Manual:Generating 2D drawings/fr">G&eacute;n&eacute;ration de dessins 2D</a></li>
<li><a href="../fr/Manual;BIM_modeling.html" title="Manual:BIM modeling/fr">Mod&eacute;lisation BIM</a></li>
<li><a href="../fr/Manual;Using_spreadsheets.html" title="Manual:Using spreadsheets/fr">Utilisation de feuilles de calcul</a>
<ul><li><a href="../fr/Manual;Using_spreadsheets.html#Lecture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">Lecture de propri&eacute;t&eacute;s</a></li>
<li><a href="../fr/Manual;Using_spreadsheets.html#Ecriture_de_propri.C3.A9t.C3.A9s" title="Manual:Using spreadsheets/fr">&Eacute;criture de propri&eacute;t&eacute;s</a></li></ul></li>
<li><a href="../fr/Manual;Creating_FEM_analyses.html" title="Manual:Creating FEM analyses/fr">Cr&eacute;ation d'analyses FEM</a></li>
<li><a href="../fr/Manual;Creating_renderings.html" title="Manual:Creating renderings/fr">Cr&eacute;ation de rendus r&eacute;alistes</a></li></ul></li>
<li>Programmation Python
<ul><li><a href="../fr/Manual;A_gentle_introduction.html" title="Manual:A gentle introduction/fr">Introduction &agrave; Python</a>
<ul><li><a href="../fr/Manual;A_gentle_introduction.html#Ecrire_du_code_python" title="Manual:A gentle introduction/fr">&Eacute;crire du code Python</a></li>
<li><a href="../fr/Manual;A_gentle_introduction.html#Manipuler_des_objets_FreeCAD" title="Manual:A gentle introduction/fr">Manipuler des objets FreeCAD</a></li>
<li><a href="../fr/Manual;A_gentle_introduction.html#Vecteurs_et_emplacements" title="Manual:A gentle introduction/fr">Vecteurs et emplacements</a></li></ul></li>
<li><a href="../fr/Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Cr&eacute;ation et manipulation de la g&eacute;om&eacute;trie</a></li>
<li><a class="mw-selflink selflink">Cr&eacute;ation d'objets param&eacute;triques</a></li>
<li><a href="../fr/Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Cr&eacute;ation d'outils d'interface</a></li></ul></li>
<li><a href="../fr/Manual;The_Community.html" title="Manual:The Community/fr">La communaut&eacute;</a></li></ul></div>
<p>Dans le <a href="../Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry">chapitre pr&eacute;c&eacute;dent</a>, nous avons explor&eacute; la mani&egrave;re de cr&eacute;er une g&eacute;om&eacute;trie de <b>Part</b> et de l'afficher &agrave; l'&eacute;cran en l'attachant &agrave; un objet document <b>muet</b> (non param&eacute;trique). Bien qu'efficace, cette approche devient fastidieuse lorsqu'il s'agit de modifier la forme. Chaque modification n&eacute;cessite la cr&eacute;ation d'une nouvelle forme et sa r&eacute;affectation &agrave; l'objet, ce qui entra&icirc;ne des flux de travail r&eacute;p&eacute;titifs et inefficaces.
</p><p>Tout au long de ce manuel, nous avons vu comment les objets param&eacute;triques r&eacute;pondent &agrave; ce probl&egrave;me en permettant des mises &agrave; jour dynamiques. En modifiant une seule propri&eacute;t&eacute;, la forme est recalcul&eacute;e automatiquement, ce qui &eacute;limine le besoin de mises &agrave; jour manuelles. Ce processus de recalcul permet une mod&eacute;lisation plus efficace et introduit une certaine adaptabilit&eacute; dans les conceptions. En interne, les objets param&eacute;triques fonctionnent de mani&egrave;re similaire &agrave; ce que nous avons d&eacute;j&agrave; fait&nbsp;: ils recalculent le contenu de leur propri&eacute;t&eacute; <b>Forme</b> chaque fois qu'une de leurs propri&eacute;t&eacute;s change. Ce processus it&eacute;ratif est transparent et garantit que l'objet reste coh&eacute;rent avec ses param&egrave;tres d&eacute;finis.
</p><p>FreeCAD propose un syst&egrave;me convivial de cr&eacute;ation d'objets param&eacute;triques enti&egrave;rement en Python. Ces objets sont d&eacute;finis &agrave; l'aide d'une classe Python, qui&nbsp;:
</p>
<ul><li>D&eacute;clare les propri&eacute;t&eacute;s n&eacute;cessaires pour l'objet.</li>
<li>D&eacute;finit le comportement en cas de modification de l'une de ces propri&eacute;t&eacute;s.</li></ul>
<p>La structure d'un tel objet param&eacute;trique est aussi simple que cela&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">myParametricObject</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"MyLength"</span><span class="p">)</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"Recalculating the shape..."</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">"The value of MyLength is:"</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">MyLength</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
<p>Toutes les classes Python ont g&eacute;n&eacute;ralement une m&eacute;thode <b>__init__</b>. Cette m&eacute;thode est ex&eacute;cut&eacute;e lorsqu'une classe est instanci&eacute;e, c'est-&agrave;-dire lorsqu'un objet Python est cr&eacute;&eacute; &agrave; partir de la classe. Vous pouvez consid&eacute;rer une classe comme un &laquo;mod&egrave;le&raquo; ou un plan utilis&eacute; pour cr&eacute;er des instances vivantes d'elle-m&ecirc;me. Chaque instance de la classe devient un objet ind&eacute;pendant dot&eacute; de ses propres attributs et m&eacute;thodes. Dans notre m&eacute;thode <b>__init__</b>, nous effectuons deux t&acirc;ches cruciales&nbsp;:
</p>
<ul><li>Enregistrer la classe elle-m&ecirc;me dans l'attribut <b>Proxy</b> de l'objet document FreeCAD&nbsp;:</li></ul>
<p>En assignant <b>self</b> &agrave; l'attribut <b>Proxy</b> de l'objet document FreeCAD, nous lions la logique de notre classe Python &agrave; l'objet FreeCAD. Cela signifie que l'objet document &laquo;&nbsp;portera&nbsp;&raquo; le code de la classe Python &agrave; l'int&eacute;rieur de lui-m&ecirc;me, lui permettant de se comporter selon la logique d&eacute;finie dans la classe. Cette connexion permet &agrave; FreeCAD de savoir comment interagir avec l'objet param&eacute;trique et le recalculer.
</p>
<ul><li>Cr&eacute;er toutes les propri&eacute;t&eacute;s dont l'objet a besoin&nbsp;:</li></ul>
<p>En utilisant la m&eacute;thode <b>addProperty</b>, nous d&eacute;finissons les propri&eacute;t&eacute;s personnalis&eacute;es requises par l'objet. Les propri&eacute;t&eacute;s agissent comme des param&egrave;tres ou des variables pour l'objet et peuvent &ecirc;tre consult&eacute;es, modifi&eacute;es et affich&eacute;es dans l'&eacute;diteur de propri&eacute;t&eacute;s de FreeCAD. Dans l'exemple, nous ajoutons une propri&eacute;t&eacute; &agrave; virgule flottante nomm&eacute;e <b>MyLength</b>. Cette propri&eacute;t&eacute; influencera ult&eacute;rieurement la forme ou le comportement de l'objet.
</p><p>class myParametricObject:
</p>
<pre>  def __init__(self,obj):
    obj.Proxy = self
    obj.addProperty("App::PropertyFloat","MyLength")
    ...
       
  def execute(self,obj):
    print ("Recalculating the shape...")
    print ("The value of MyLength is:")
    print (obj.MyLength)
    ...
</pre>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"dummy"</span><span class="p">)</span><span class="o">.</span><span class="n">supportedProperties</span><span class="p">()</span>
</pre></div>
<p>La deuxi&egrave;me partie cl&eacute; de notre classe est la m&eacute;thode <b>execute</b>. Cette m&eacute;thode est automatiquement d&eacute;clench&eacute;e chaque fois que l'objet est marqu&eacute; pour un nouveau calcul, ce qui se produit lorsque l'une de ses propri&eacute;t&eacute;s est modifi&eacute;e. C'est dans la m&eacute;thode <b>execute</b> que s'effectuent tous les recalculs de l'objet, garantissant que sa forme et son comportement sont mis &agrave; jour pour refl&eacute;ter tout changement. Dans la m&eacute;thode <b>execute</b>, vous effectuez toutes les op&eacute;rations n&eacute;cessaires pour g&eacute;n&eacute;rer la nouvelle g&eacute;om&eacute;trie de votre objet. En r&egrave;gle g&eacute;n&eacute;rale, il s'agit de recalculer la forme en fonction des valeurs en cours de ses propri&eacute;t&eacute;s, puis d'affecter la forme mise &agrave; jour &agrave; l'attribut <b>Shape</b> de l'objet &agrave; l'aide d'une instruction telle que <b>obj.Shape = myNewShape</b>. La m&eacute;thode <b>execute</b> prend un seul argument, <b>obj</b>, qui repr&eacute;sente l'objet document FreeCAD associ&eacute; &agrave; votre objet param&eacute;trique. Cela vous permet de manipuler directement l'objet dans la m&eacute;thode, par exemple en acc&eacute;dant &agrave; ses propri&eacute;t&eacute;s, en mettant &agrave; jour sa g&eacute;om&eacute;trie ou en effectuant d'autres op&eacute;rations.
</p><p>FreeCAD.ActiveDocument.addObject("Part::FeaturePython","dummy").supportedProperties()
</p>
<ul><li>La m&eacute;thode <b>execute</b> est appel&eacute;e chaque fois que l'objet doit &ecirc;tre mis &agrave; jour.</li>
<li>Elle est responsable de recalculer la forme et de l'assigner &agrave; l'attribut <b>Shape</b> de l'objet.</li>
<li>L'argument <b>obj</b> donne acc&egrave;s &agrave; l'objet document de FreeCAD, ce qui permet d'effectuer des modifications par programme.</li></ul>
<p>Avec ce syst&egrave;me, FreeCAD s'occupe du reste en s'assurant que l'objet est correctement mis &agrave; jour dans le document et affich&eacute; correctement dans l'interface graphique.
</p><p>Une chose essentielle &agrave; retenir est que lorsque vous cr&eacute;ez des objets param&eacute;triques dans un document FreeCAD, le code Python utilis&eacute; pour les d&eacute;finir n'est pas sauvegard&eacute; dans le fichier. Il s'agit d'une mesure de s&eacute;curit&eacute; intentionnelle. Si les fichiers FreeCAD &eacute;taient autoris&eacute;s &agrave; stocker du code Python, des acteurs malveillants pourraient distribuer des fichiers contenant des scripts nuisibles susceptibles d'endommager l'ordinateur de quelqu'un. Par cons&eacute;quent, lorsque vous partagez un fichier FreeCAD contenant des objets param&eacute;triques cr&eacute;&eacute;s avec du code Python personnalis&eacute;, le destinataire doit &eacute;galement avoir acc&egrave;s au code utilis&eacute; pour d&eacute;finir ces objets. Sans ce code, FreeCAD ne saura pas comment recalculer ou interagir correctement avec les objets.
</p><p>La fa&ccedil;on la plus simple d'y parvenir est d'enregistrer le code Python dans un fichier macro. Lorsque vous distribuez votre fichier FreeCAD, vous pouvez inclure la macro avec celui-ci. Vous pouvez &eacute;galement partager la macro sur le <a href="../fr/Macros_recipes.html" title="Macros recipes/fr">d&eacute;p&ocirc;t des macros de FreeCAD</a>, ce qui permet aux autres de la t&eacute;l&eacute;charger et de l'utiliser facilement. Cette approche garantit que vos objets param&eacute;triques personnalis&eacute;s restent fonctionnels sur d'autres syst&egrave;mes tout en respectant les meilleures pratiques en mati&egrave;re de s&eacute;curit&eacute;.
</p><p>Ci-dessous, nous ferons un petit exercice, en construisant un objet param&eacute;trique qui est une simple Face rectangulaire param&eacute;trique. Des exemples plus complexes sont disponibles sur Exemple d'objet param&eacute;trique (<a href="../Scripted_objects.html" title="Scripted objects">parametric object example</a>) et dans le code source de FreeCAD lui-m&ecirc;me (<a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py">FreeCAD source code</a>).
</p><p>Nous allons donner &agrave; notre objet deux propri&eacute;t&eacute;s&nbsp;: Longueur et Largeur, que nous utiliserons pour construire un rectangle. Puis, puisque notre objet aura d&eacute;j&agrave; une propri&eacute;t&eacute; de placement pr&eacute;d&eacute;finie (tout objet g&eacute;om&eacute;trique en a une par d&eacute;faut, il n'est pas n&eacute;cessaire de l'ajouter nous-m&ecirc;mes), nous d&eacute;calerons notre rectangle &agrave; l'emplacement / orientation d&eacute;finis dans le Placement, de sorte que l'utilisateur pourra d&eacute;placer le rectangle n'importe o&ugrave; en &eacute;ditant la propri&eacute;t&eacute; Placement.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">ParametricRectangle</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyFloat"</span><span class="p">,</span> <span class="s2">"Width"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="c1"># We need to import the FreeCAD module here too, because we might be running out of the Console</span>
        <span class="c1"># (in a macro, for example) where the FreeCAD module has not been imported automatically:</span>
        <span class="kn">import</span> <span class="nn">FreeCAD</span>
        <span class="kn">import</span> <span class="nn">Part</span>

        <span class="c1"># First we need to make sure the values of Length and Width are not 0</span>
        <span class="c1"># otherwise Part.LineSegment will complain that both points are equal:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># If yes, exit this method without doing anything:</span>
            <span class="k">return</span>

        <span class="c1"># We create 4 points for the 4 corners:</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># We create 4 edges:</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e2</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e3</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
        <span class="n">e4</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span> <span class="n">v1</span><span class="p">)</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>

        <span class="c1"># We create a wire:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Wire</span><span class="p">([</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">,</span> <span class="n">e4</span><span class="p">])</span>

        <span class="c1"># We create a face:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Face</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># All shapes have a Placement too. We give our shape the value of the placement</span>
        <span class="c1"># set by the user. This will move/rotate the face automatically.</span>
        <span class="n">f</span><span class="o">.</span><span class="n">Placement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Placement</span>

        <span class="c1"># All done, we can attribute our shape to the object!</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">f</span>
</pre></div>
<p>Au lieu de coller le code ci-dessus dans la console Python, nous devrions plut&ocirc;t l'enregistrer quelque part, alors nous pourrons le r&eacute;utiliser et le modifier ult&eacute;rieurement. Par exemple dans une nouvelle macro (menu <b>Macro -&gt; Macros &rarr; Cr&eacute;er</b>). Nommez-le, par exemple, "ParamRectangle". Cependant, les macros FreeCAD sont enregistr&eacute;es avec une extension .FCMro, que Python ne reconna&icirc;t pas lors de l'importation. Donc, avant d&rsquo;utiliser le code ci-dessus, nous devrons renommer le fichier ParamRectangle.FCMacro en ParamRectangle.py. Cela se fait simplement &agrave; partir de votre explorateur de fichiers, en naviguant vers le dossier Macros indiqu&eacute; dans le menu Outils -&gt; Macros.
</p><p>Une fois cela fait, nous pouvons maintenant l&rsquo;utiliser dans la console Python&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">ParamRectangle</span>
</pre></div>
<p>En explorant le contenu de ParamRectangle, nous pouvons v&eacute;rifier qu'il contient notre Classe ParametricRectangle.
</p><p>Pour cr&eacute;er un nouvel objet param&eacute;trique &agrave; l'aide de notre classe ParametricRectangle, nous utiliserons le code suivant. Observez que nous utilisons <b>Part::FeaturePython</b> au lieu de <b>Part::Feature</b> que nous avons utilis&eacute; dans les chapitres pr&eacute;c&eacute;dents (la version Python permet de d&eacute;finir notre propre comportement param&eacute;trique):
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">myObj</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"Rectangle"</span><span class="p">)</span>
<span class="n">ParamRectangle</span><span class="o">.</span><span class="n">ParametricRectangle</span><span class="p">(</span><span class="n">myObj</span><span class="p">)</span>
<span class="n">myObj</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># This is mandatory unless we code the ViewProvider too.</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython","Rectangle")
</p>
<pre>ParamRectangle.ParametricRectangle(myObj)
myObj.ViewObject.Proxy = 0 # this is mandatory unless we code the ViewProvider too
FreeCAD.ActiveDocument.recompute()
</pre>
<ul><li><b>myObj = FreeCAD.ActiveDocument.addObject("Part::FeaturePython", "Rectangle")</b>&nbsp;: cr&eacute;e un nouvel objet <b>Part::FeaturePython</b> nomm&eacute; <b>Rectangle</b> dans le document FreeCAD actif. Cet objet est sp&eacute;cifiquement con&ccedil;u pour un comportement param&eacute;trique personnalis&eacute;, permettant &agrave; la logique d&eacute;finie par Python de g&eacute;rer ses propri&eacute;t&eacute;s et son comportement.</li></ul>
<ul><li><b>ParamRectangle.ParametricRectangle(myObj)</b>&nbsp;: initialise l'objet en l'associant &agrave; la classe <b>ParametricRectangle</b> du module ou du script <b>ParamRectangle</b>. Cela permet de lier la logique personnalis&eacute;e d&eacute;finie par Python &agrave; l'objet, ce qui lui permet d'agir comme un objet param&eacute;trique.</li></ul>
<ul><li><b>myObj.ViewObject.Proxy = 0</b>&nbsp;: r&eacute;initialise l'attribut <b>ViewObject.Proxy</b> &agrave; 0, garantissant que l'objet utilise la gestion de la vue par d&eacute;faut de FreeCAD. Cette &eacute;tape est n&eacute;cessaire &agrave; moins que vous ne d&eacute;finissiez un ViewProvider personnalis&eacute; pour g&eacute;rer la repr&eacute;sentation visuelle de l'objet.</li></ul>
<ul><li><b>FreeCAD.ActiveDocument.recompute()</b>&nbsp;: recalcule le document pour mettre &agrave; jour la g&eacute;om&eacute;trie et refl&eacute;ter les changements dans l'interface graphique de FreeCAD, rendant le nouvel objet enti&egrave;rement visible et fonctionnel.</li></ul>
<p>Rien ne s'affiche encore &agrave; l'&eacute;cran, car les propri&eacute;t&eacute;s <b>Length</b> et <b>Width</b> sont &agrave; 0, ce qui d&eacute;clenchera notre condition de "ne rien faire" &agrave; l'int&eacute;rieur de l'ex&eacute;cution. Nous devons juste changer les valeurs de Longueur et Largeur, et notre objet appara&icirc;tra magiquement et sera recalcul&eacute; &agrave; la vol&eacute;e.
</p><p>Bien s&ucirc;r, il serait fastidieux de devoir taper ces 4 lignes de code Python chaque fois que nous voulons cr&eacute;er un nouveau rectangle param&eacute;trique. Une fa&ccedil;on tr&egrave;s simple de r&eacute;soudre ceci est de placer les 4 lignes ci-dessus dans notre fichier <b>ParamRectangle.py</b>, &agrave; la fin, apr&egrave;s la fin de la classe <b>ParametricRectange</b> (nous pouvons le faire &agrave; partir de l'&eacute;diteur Macro).
</p><p>Maintenant, lorsque nous tapons import ParamRectangle, un nouveau rectangle param&eacute;trique sera automatiquement cr&eacute;&eacute;. Encore mieux, nous pouvons ajouter un bouton de barre d'outils qui fera exactement cela&nbsp;:
</p>
<div class="mw-translate-fuzzy">
<ul><li>Ouvrir le menu <b>Outils -&gt; Personnaliser...</b></li>
<li>Sous l'onglet "Macros", s&eacute;lectionnez notre macro ParamRectangle.py, compl&eacute;tez les d&eacute;tails au fur et &agrave; mesure que vous le souhaitez, et appuyez sur "Ajouter"&nbsp;:</li></ul>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/Exercise_python_04.jpg" class="mw-file-description"><img src="../File/Exercise_python_04.jpg" decoding="async" width="752" height="501"></a></span>
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a href="../File/FreeCAD_python_macroRec.png" class="mw-file-description"><img src="../File/FreeCAD_python_macroRec.png" decoding="async" width="697" height="436"></a></span>
</p><p>Sous l'onglet Barres d'outils, cr&eacute;ez une nouvelle barre d'outils personnalis&eacute;e dans l'atelier de votre choix (ou globalement), s&eacute;lectionnez votre macro et ajoutez-la &agrave; la barre d'outils&nbsp;:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="../File/FreeCAD_python_toolbarCus.png" class="mw-file-description"><img src="../File/FreeCAD_python_toolbarCus.png" decoding="async" width="697" height="436"></a></span>
</p>
<ul><li>Nous avons maintenant un nouveau bouton de barre d'outils qui, lorsqu'il sera cliqu&eacute;, cr&eacute;era un rectangle param&eacute;trique.</li></ul>
<p>N'oubliez pas que si vous souhaitez distribuer des fichiers cr&eacute;&eacute;s avec ce nouvel outil &agrave; d'autres personnes, celles-ci doivent &eacute;galement avoir la macro <b>ParamRectangle.py</b> install&eacute;e sur leur ordinateur.
</p><p><b>Lire plus d'informations</b>
</p>
<ul><li><a href="../Macros_recipes.html" title="Macros recipes">Le d&eacute;p&ocirc;t de macros FreeCAD</a></li>
<li><a href="../Scripted_objects.html" title="Scripted objects">Exemple d'objet param&eacute;trique</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py">Plus d'exemples dans le code FreeCAD</a></li></ul>
<p><br>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="../fr/Manual;Creating_and_manipulating_geometry.html" title="Manual:Creating and manipulating geometry/fr">Cr&eacute;ation et manipulation de la g&eacute;om&eacute;trie</a></div>
    <div style="margin: 4px 0; float: right;"><a href="../fr/Manual;Creating_interface_tools.html" title="Manual:Creating interface tools/fr">Cr&eacute;ation d'outils d'interface</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="../fr/Manual;Introduction.html" title="Manual:Introduction/fr">D&eacute;but du manuel</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Crystal_Clear_manual.png" decoding="async" width="24" height="24"></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../File/Power_user_hub.png" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24"></a></span> <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>Scripts FreeCAD&nbsp;:</b> <a href="../fr/Python.html" title="Python/fr">Python</a>, <a href="../fr/Introduction_to_Python.html" title="Introduction to Python/fr">Introduction &agrave; Python</a>, <a href="../fr/Python_scripting_tutorial.html" title="Python scripting tutorial/fr">Tutoriel sur les scripts Python</a>, <a href="../fr/FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/fr">D&eacute;buter avec les scripts</a></li></ul>
<hr>
<ul><li><b>Modules&nbsp;:</b> <a href="../fr/Builtin_modules.html" title="Builtin modules/fr">Modules int&eacute;gr&eacute;s</a>, <a href="../fr/Units.html" title="Units/fr">Unit&eacute;s</a>, <a href="../fr/Quantity.html" title="Quantity/fr">Quantity</a></li>
<li><b>Ateliers&nbsp;:</b> <a href="../fr/Workbench_creation.html" title="Workbench creation/fr">Cr&eacute;ation d'atelier</a>, <a href="../fr/Gui_Command.html" title="Gui Command/fr">Commands Gui</a>, <a href="../fr/Command.html" title="Command/fr">Les commandes</a>, <a href="../fr/Installing_more_workbenches.html" title="Installing more workbenches/fr">Installer des ateliers suppl&eacute;mentaires</a></li>
<li><b>Maillages et objets Parts&nbsp;:</b> <a href="../fr/Mesh_Scripting.html" title="Mesh Scripting/fr">Scripts Mesh</a>, <a href="../fr/Topological_data_scripting.html" title="Topological data scripting/fr">Script de donn&eacute;es topologiques</a>, <a href="../fr/Mesh_to_Part.html" title="Mesh to Part/fr">Conversion objet Mesh en Part</a>, <a href="../fr/PythonOCC.html" title="PythonOCC/fr">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Objets param&eacute;triques&nbsp;:</b> <a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a>, <a href="../fr/Viewprovider.html" title="Viewprovider/fr">Viewproviders</a> <small>(<a href="../fr/Custom_icon_in_tree_view.html" title="Custom icon in tree view/fr">Ic&ocirc;ne personnalis&eacute;e dans l'arborescence</a>)</small></li>
<li><b>Sc&eacute;nographie&nbsp;:</b> <a href="../fr/Scenegraph.html" title="Scenegraph/fr">Graphe de sc&egrave;ne Coin (Inventor)</a>, <a href="../fr/Pivy.html" title="Pivy/fr">Pivy</a></li>
<li><b>Interface graphique&nbsp;:</b> <a href="../fr/Interface_creation.html" title="Interface creation/fr">Cr&eacute;ation d'interface</a>, <a href="../fr/Dialog_creation.html" title="Dialog creation/fr">Cr&eacute;ation d'une boite de dialogue</a> <small>(<a href="../fr/Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/fr">1</a>, <a href="../fr/Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/fr">2</a>, <a href="../fr/Dialog_creation_setting_colors.html" title="Dialog creation setting colors/fr">3</a>, <a href="../fr/Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/fr">4</a>, <a href="../fr/PySide_usage_snippets.html" title="PySide usage snippets/fr">5</a>)</small>, <a href="../fr/PySide.html" title="PySide/fr">PySide</a>, Exemples PySide <a href="../fr/PySide_Beginner_Examples.html" title="PySide Beginner Examples/fr">d&eacute;butant</a>, <a href="../fr/PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/fr">interm&eacute;diaire</a>, <a href="../fr/PySide_Advanced_Examples.html" title="PySide Advanced Examples/fr">exp&eacute;riment&eacute;</a></li>
<li><b>Macros&nbsp;:</b> <a href="../fr/Macros.html" title="Macros/fr">Macros</a>, <a href="../fr/How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a></li>
<li><b>Int&eacute;gration&nbsp;:</b> <a href="../fr/Embedding_FreeCAD.html" title="Embedding FreeCAD/fr">Int&eacute;grer FreeCAD</a>, <a href="../fr/Embedding_FreeCADGui.html" title="Embedding FreeCADGui/fr">Int&eacute;gration de FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Autre&nbsp;:</b> <a href="../fr/Expressions.html" title="Expressions/fr">Expressions</a>, <a href="../fr/Code_snippets.html" title="Code snippets/fr">Extraits de codes</a>, <a href="../fr/Line_drawing_function.html" title="Line drawing function/fr">Fonction - tracer une ligne</a>, <a href="../fr/FreeCAD_vector_math_library.html" title="FreeCAD vector math library/fr">Biblioth&egrave;que math&eacute;matique vectorielle de FreeCAD</a> <small>(d&eacute;pr&eacute;ci&eacute;)</small></li></ul>
<hr>
<ul><li><b>Hubs&nbsp;:</b> <a href="../fr/User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>, <a href="../fr/Developer_hub.html" title="Developer hub/fr">Hub d&eacute;veloppeurs</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20241221180507
Cache expiry: 86400
Reduced expiry: false
Complications: [no&#8208;toc&#8208;conversion]
CPU time usage: 0.057 seconds
Real time usage: 0.071 seconds
Preprocessor visited node count: 193/1000000
Post&#8208;expand include size: 16820/2097152 bytes
Template argument size: 5537/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 11785/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   16.325      1 -total
 40.11%    6.548      1 Template:Powerdocnavi/fr
 30.76%    5.021      1 Template:Manual:TOC
 24.63%    4.021      1 Manual:Summary/fr
 14.36%    2.345      5 Template:Code
 11.91%    1.944      1 Template:Navigation_menu_2
  9.81%    1.601      2 Template:Docnav/fr
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:81379-0!canonical and timestamp 20241221180507 and revision id 1522557. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>