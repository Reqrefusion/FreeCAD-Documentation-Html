<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Add Button to FEM Toolbar Tutorial/fr</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../de\Add_Button_to_FEM_Toolbar_Tutorial.html" lang="de" title="Anleitung Schaltfläche zur FEM-Symbolleiste hinzufügen (100% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../Add_Button_to_FEM_Toolbar_Tutorial.html" lang="en" title="Add Button to FEM Toolbar Tutorial (100% translated)">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="fr">français</span></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../it\Add_Button_to_FEM_Toolbar_Tutorial.html" lang="it" title="Tutorial su come aggiungere un pulsante alla barra strumenti di FEM (100% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="../pl\Add_Button_to_FEM_Toolbar_Tutorial.html" lang="pl" title="Poradnik: Dodaj przycisk do paska narzędzi MES (100% translated)">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="width: 230px; float: right; margin-left: 1em">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;"><span typeof="mw:File"><span><img decoding="async" height="32" src="../File/Freecad.svg" width="32"/></span></span> Tutorial
</td></tr>
<tr>
<th class="ctOdd">Topic
</th></tr>
<tr>
<td class="ctEven">FEM
</td></tr>
<tr>
<th class="ctOdd">Level
</th></tr>
<tr>
<td class="ctEven">Avancé
</td></tr>
<tr>
<th class="ctOdd">Time to complete
</th></tr>
<tr>
<td class="ctEven">60 min
</td></tr>
<tr>
<th class="ctOdd">Authors
</th></tr>
<tr>
<td class="ctEven"><a class="new" href="../index.php?title=User;JohnWang&amp;action=edit&amp;redlink=1.html" title="User:JohnWang (page does not exist)">JohnWang</a>
</td></tr>
<tr>
<th class="ctOdd">FreeCAD version
</th></tr>
<tr>
<td class="ctEven">0.19
</td></tr>
<tr>
<th class="ctOdd">Example files
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<td class="ctToc"><br/><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Créer_un_nouveau_fichier_d'icône"><span class="tocnumber">2</span> <span class="toctext">Créer un nouveau fichier d'icône</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Enregistrer_le_nouveau_fichier_d'icône"><span class="tocnumber">3</span> <span class="toctext">Enregistrer le nouveau fichier d'icône</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Créer_une_nouvelle_classe_de_commande"><span class="tocnumber">4</span> <span class="toctext">Créer une nouvelle classe de commande</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Ajouter_une_nouvelle_commande_à_l'atelier"><span class="tocnumber">5</span> <span class="toctext">Ajouter une nouvelle commande à l'atelier</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#En_relation"><span class="tocnumber">6</span> <span class="toctext">En relation</span></a></li>
</ul>
</div>
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>L'atelier FEM dispose de barres d'outils et de menus. Ce tutoriel montre comment ajouter un bouton de test à une barre d'outils. Il montre également comment ajouter un élément de menu à un menu.
</p><p>La tâche peut être divisée en quatre parties :
</p>
<ul><li><b>Créer un nouveau fichier d'icône</b>.</li>
<li><b>Enregistrer le nouveau fichier d'icône</b>. Modification nécessaire dans <code>src/Mod/Fem//Gui/Resources/Fem.qrc</code></li>
<li><b>Créer une nouvelle classe de commande</b>. Modification nécessaire dans <code>src/Mod/Fem/femcommands/commands.py</code></li>
<li><b>Ajout d'une nouvelle commande à l'atelier</b>. Modification nécessaire dans <code>src/Mod/Fem/Gui/Workbench.cpp</code></li></ul>
<p><span id="Create_a_new_icon_file"></span>
</p>
<h2><span id="Cr.C3.A9er_un_nouveau_fichier_d.27ic.C3.B4ne"></span><span class="mw-headline" id="Créer_un_nouveau_fichier_d'icône">Créer un nouveau fichier d'icône</span></h2>
<p>Pour le bouton, nous avons besoin d'un fichier d'icône. Vous pouvez utiliser n'importe lequel de vos outils préférés pour le créer, mais il doit être au format SVG. Nous utiliserons ici le fichier <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">FEM_testButton.svg</span> comme exemple. 
</p><p>Il doit être placé dans : <code>src/Mod/Fem/Gui/Resources/icons/</code>.
</p><p><span id="Register_the_new_icon_file"></span>
</p>
<h2><span id="Enregistrer_le_nouveau_fichier_d.27ic.C3.B4ne"></span><span class="mw-headline" id="Enregistrer_le_nouveau_fichier_d'icône">Enregistrer le nouveau fichier d'icône</span></h2>
<p>Le nouveau fichier icône SVG doit être enregistré pour le bouton GUI en l'insérant dans <code>src/Mod/Fem/Gui/Resources/Fem.qrc</code> :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="n">icons</span><span class="o">/</span><span class="n">FEM_testButton</span><span class="o">.</span><span class="n">svg</span><span class="o">&lt;/</span><span class="n">file</span><span class="o">&gt;</span>
</pre></div>
<p><span id="Create_a_new_command_class"></span>
</p>
<h2><span id="Cr.C3.A9er_une_nouvelle_classe_de_commande"></span><span class="mw-headline" id="Créer_une_nouvelle_classe_de_commande">Créer une nouvelle classe de commande</span></h2>
<p>Une nouvelle classe de commande doit être ajoutée au module <code>src/Mod/Fem/femcommands/commands.py</code>. 
</p><p>Il suffit de copier/coller une commande existante, puis d'ajuster l'icône, le texte du menu et l'infobulle dans <code>__init__(self)</code> :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">_testButton</span><span class="p">(</span><span class="n">CommandManager</span><span class="p">):</span>
    <span class="s2">"The FEM_testButton command definition"</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_testButton</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menuetext</span> <span class="o">=</span> <span class="s2">"test Button"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tooltip</span> <span class="o">=</span> <span class="s2">"This is a test button"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="s2">"always"</span>
        <span class="c1">#self.do_activated = "add_obj_on_gui_selobj_noset_edit"</span>
</pre></div>
<p>N'oubliez pas d'enregistrer la commande au bas du fichier du module avec la méthode <code>addCommand(...)</code> :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span>
    <span class="s2">"FEM_testButton"</span><span class="p">,</span>
    <span class="n">_testButton</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
<p><b>Remarque</b> : veuillez consulter ce <a class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=18&amp;t=46693&amp;start=10#p402004" rel="nofollow">fil de discussion</a> dans le forum si des icônes sont impliquées.
</p><p><span id="Add_new_command_to_workbench"></span>
</p>
<h2><span id="Ajouter_une_nouvelle_commande_.C3.A0_l.27atelier"></span><span class="mw-headline" id="Ajouter_une_nouvelle_commande_à_l'atelier">Ajouter une nouvelle commande à l'atelier</span></h2>
<p>Nous allons ajouter la nouvelle commande à la fois à la barre d'outils <i>solve</i> et au menu <i>solve</i>. 
</p><p>Recherchez le bout de code suivant dans <code>/Gui/Workbench.cpp</code> et ajoutez la nouvelle commande :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Gui</span><span class="p">::</span><span class="n">ToolBarItem</span><span class="o">*</span> <span class="n">solve</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gui</span><span class="p">::</span><span class="n">ToolBarItem</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
     <span class="n">solve</span><span class="o">-&gt;</span><span class="n">setCommand</span><span class="p">(</span><span class="s2">"Solve"</span><span class="p">);</span>
     <span class="o">*</span><span class="n">solve</span> <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculixCxxtools"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculiX"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverElmer"</span>
<span class="o">+</span>           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_testButton"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"Separator"</span>
</pre></div>
<p>Pour ajouter la commande au menu <b>solve</b> de l'atelier FEM, recherchez le bout de code suivant dans <code>Workbench.cpp</code> :
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Gui</span><span class="p">::</span><span class="n">MenuItem</span><span class="o">*</span> <span class="n">solve</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gui</span><span class="p">::</span><span class="n">MenuItem</span><span class="p">;</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">insertItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">solve</span><span class="p">);</span>
    <span class="n">solve</span><span class="o">-&gt;</span><span class="n">setCommand</span><span class="p">(</span><span class="s2">"&amp;Solve"</span><span class="p">);</span>
    <span class="o">*</span><span class="n">solve</span> <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculixCxxtools"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculiX"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverElmer"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverZ88"</span>
<span class="o">+</span>          <span class="o">&lt;&lt;</span> <span class="s2">"FEM_testButton"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"Separator"</span>
</pre></div>
<p><b>Résultat</b> : vous devriez avoir ajouté avec succès un bouton de test à la barre d'outils et au menu d'un atelier FEM. Maintenant, vous pouvez <a href="../fr\Compiling.html" title="Compiling/fr">compiler FreeCAD</a> et tester votre nouveau bouton.
</p><p><span id="Related"></span>
</p>
<h2><span class="mw-headline" id="En_relation">En relation</span></h2>
<ul><li><a href="../fr\Extend_FEM_Module.html" title="Extend FEM Module/fr">Tutoriel FEM Module d'extension</a></li>
<li><a href="../fr\Onboarding_FEM_Devs.html" title="Onboarding FEM Devs/fr">Page pour développeurs FEM</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20241214204129
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.082 seconds
Real time usage: 0.964 seconds
Preprocessor visited node count: 184/1000000
Post‐expand include size: 1683/2097152 bytes
Template argument size: 1318/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 6186/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  873.184      1 -total
 99.52%  868.963      5 Template:Code
  0.12%    1.055      1 Template:TutorialInfo
  0.12%    1.013     10 Template:Incode
  0.08%    0.738      1 Template:FileName
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:267063-0!canonical and timestamp 20241214204128 and revision id 1354650. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
