<link href="../site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">A2plus Workbench/zh-hans</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a class="mw-pt-progress mw-pt-progress--med" dir="ltr" href="A2plus_Workbench.html" lang="de" title="A2plus Arbeitsbereich (57% translated)">Deutsch</a></li>
<li><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" dir="ltr" href="A2plus_Workbench.html" lang="en" title="A2plus Workbench (100% translated)">English</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="A2plus_Workbench.html" lang="es" title="Ambiente de trabjo A2plus (8% translated)">español</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="A2plus_Workbench.html" lang="fr" title="Atelier A2plus (100% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="A2plus_Workbench.html" lang="it" title="Ambiente A2plus (100% translated)">italiano</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="A2plus_Workbench.html" lang="pl" title="Środowisko pracy A2plus (100% translated)">polski</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="A2plus_Workbench.html" lang="pt-BR" title="Bancada de trabalho A2plus (4% translated)">português do Brasil</a></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="A2plus_Workbench.html" lang="ru" title="Верстак A2plus (97% translated)">русский</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--high" dir="ltr" lang="zh-Hans">中文（简体）</span></li></ul></div>
<figure typeof="mw:File/Thumb"><a class="mw-file-description" href="../File/A2p_workbench.svg"><img decoding="async" height="128" src="../File/A2p_workbench.svg" width="128"/></a><figcaption>A2plus workbench icon</figcaption></figure>
<h2><span id=".E7.AE.80.E4.BB.8B"></span><span class="mw-headline" id="简介">简介</span></h2>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#简介"><span class="tocnumber">1</span> <span class="toctext">简介</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#安装"><span class="tocnumber">2</span> <span class="toctext">安装</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#入门"><span class="tocnumber">3</span> <span class="toctext">入门</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#装配"><span class="tocnumber">4</span> <span class="toctext">装配</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#保持追踪"><span class="tocnumber">4.1</span> <span class="toctext">保持追踪</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#约束"><span class="tocnumber">4.2</span> <span class="toctext">约束</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#点对点"><span class="tocnumber">4.2.1</span> <span class="toctext">点对点</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#点对线"><span class="tocnumber">4.2.2</span> <span class="toctext">点对线</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#点对面"><span class="tocnumber">4.2.3</span> <span class="toctext">点对面</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#球面对球面"><span class="tocnumber">4.2.4</span> <span class="toctext">球面对球面</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#圆边对圆边"><span class="tocnumber">4.2.5</span> <span class="toctext">圆边对圆边</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#轴约束"><span class="tocnumber">4.2.6</span> <span class="toctext">轴约束</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#轴平行"><span class="tocnumber">4.2.7</span> <span class="toctext">轴平行</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#轴对面平行"><span class="tocnumber">4.2.8</span> <span class="toctext">轴对面平行</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#轴对面法线"><span class="tocnumber">4.2.9</span> <span class="toctext">轴对面法线</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Axis_on_Plane_angle"><span class="tocnumber">4.2.10</span> <span class="toctext">Axis on Plane angle</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#面平行"><span class="tocnumber">4.2.11</span> <span class="toctext">面平行</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#面对面"><span class="tocnumber">4.2.12</span> <span class="toctext">面对面</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#斜面"><span class="tocnumber">4.2.13</span> <span class="toctext">斜面</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#重心重合"><span class="tocnumber">4.2.14</span> <span class="toctext">重心重合</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#子部件"><span class="tocnumber">4.3</span> <span class="toctext">子部件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#约束处理"><span class="tocnumber">5</span> <span class="toctext">约束处理</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#零件清单"><span class="tocnumber">6</span> <span class="toctext">零件清单</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#特殊功能"><span class="tocnumber">7</span> <span class="toctext">特殊功能</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#部件结构"><span class="tocnumber">7.1</span> <span class="toctext">部件结构</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#自由度"><span class="tocnumber">7.2</span> <span class="toctext">自由度</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#零件标签"><span class="tocnumber">7.3</span> <span class="toctext">零件标签</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#部件整体形状"><span class="tocnumber">7.4</span> <span class="toctext">部件整体形状</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Convert_absolute_Paths_to_relative_Ones"><span class="tocnumber">7.5</span> <span class="toctext">Convert absolute Paths to relative Ones</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#参考"><span class="tocnumber">8</span> <span class="toctext">参考</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#默认解析方法"><span class="tocnumber">8.1</span> <span class="toctext">默认解析方法</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#默认求解器行为"><span class="tocnumber">8.2</span> <span class="toctext">默认求解器行为</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#更新导入零件时的行为"><span class="tocnumber">8.3</span> <span class="toctext">更新导入零件时的行为</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#用户界面设置"><span class="tocnumber">8.4</span> <span class="toctext">用户界面设置</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#文件存储"><span class="tocnumber">8.5</span> <span class="toctext">文件存储</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#故障排除"><span class="tocnumber">9</span> <span class="toctext">故障排除</span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#Using_the_Conflict_Finder_Tool"><span class="tocnumber">9.1</span> <span class="toctext">Using the Conflict Finder Tool</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Checking_Constraint_Direction"><span class="tocnumber">9.2</span> <span class="toctext">Checking Constraint Direction</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#删除约束"><span class="tocnumber">9.3</span> <span class="toctext">删除约束</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#移动零件"><span class="tocnumber">9.4</span> <span class="toctext">移动零件</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#设置提示属性"><span class="tocnumber">9.5</span> <span class="toctext">设置提示属性</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#修复部件树"><span class="tocnumber">9.6</span> <span class="toctext">修复部件树</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Migrating_old_A2plus_assemblies"><span class="tocnumber">9.7</span> <span class="toctext">Migrating old A2plus assemblies</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#避免使用重音符号"><span class="tocnumber">9.8</span> <span class="toctext">避免使用重音符号</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#固定位置"><span class="tocnumber">9.9</span> <span class="toctext">固定位置</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#旋转零件"><span class="tocnumber">9.10</span> <span class="toctext">旋转零件</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-47"><a href="#动画"><span class="tocnumber">10</span> <span class="toctext">动画</span></a>
<ul>
<li class="toclevel-2 tocsection-48"><a href="#拖动"><span class="tocnumber">10.1</span> <span class="toctext">拖动</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#脚本编写"><span class="tocnumber">10.2</span> <span class="toctext">脚本编写</span></a>
<ul>
<li class="toclevel-3 tocsection-50"><a href="#简单脚本示例"><span class="tocnumber">10.2.1</span> <span class="toctext">简单脚本示例</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="#交互式脚本示例"><span class="tocnumber">10.2.2</span> <span class="toctext">交互式脚本示例</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-52"><a href="#脚本命令"><span class="tocnumber">10.3</span> <span class="toctext">脚本命令</span></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="mw-translate-fuzzy">
<p>A2plus工作台是<a class="new" href="index.php?title=External_workbenches_zh-hans&amp;action=edit&amp;redlink=1.html" title="External workbenches/zh-hans (page does not exist)">外部工作台</a>，用于在FreeCAD中的不同零件组装成一个部件。
</p>
</div>
<div class="mw-translate-fuzzy">
<p>本文档介绍了A2plus 0.4.33或更高版本的使用。
</p>
</div>
<h2><span id=".E5.AE.89.E8.A3.85"></span><span class="mw-headline" id="安装">安装</span></h2>
<p>A2plus工作台是FreeCAD的插件。 可以通过菜单<b>工具→<a href="Std_AddonMgr.html" title="Std AddonMgr">插件管理器</a></b>轻松安装。
A2plus正在积极开发中，并将经常获得新功能。 因此，您还应该使用菜单<b>工具→<a href="Std_AddonMgr.html" title="Std AddonMgr">插件管理器</a></b>定期对其进行更新。
A2plus代码是在GitHub上托管和开发的<a class="external autonumber" href="https://github.com/kbwbe/A2plus" rel="nofollow">[1]</a>，也可以通过将其复制到FreeCAD的MOD目录中进行手动安装。
</p>
<h2><span id=".E5.85.A5.E9.97.A8"></span><span class="mw-headline" id="入门">入门</span></h2>
<p>首先，切换到FreeCAD中的A2plus工具栏。 要创建部件，请在FreeCAD中创建一个新文件。 首先，该文件需要命名后保存才能开展后续工作。 建议（但不是必需）将其保存在要装配的零件的同一文件夹中。
</p>
<div class="mw-translate-fuzzy">
<p>现在，可以使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart.svg" width="24"/></a></span>或<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ShapeReference.svg"><img decoding="async" height="24" src="../File/A2p_ShapeReference.svg" width="24"/></a></span>将零件添加到装配体中。 按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart.svg" width="24"/></a></span>将所选文件中的所有实体作为单个部分添加。 使用按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ShapeReference.svg"><img decoding="async" height="24" src="../File/A2p_ShapeReference.svg" width="24"/></a></span>时，您可以选择将文件的哪个实体作为零件导入。<br/>默认情况下，第一个添加的零件会固定在一个固定位置。(您可以稍后通过零件属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>固定位置</b>对其位置进行改变。)<br/>可以使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DuplicatePart.svg"><img decoding="async" height="24" src="../File/A2p_DuplicatePart.svg" width="24"/></a></span>复制装配中已经存在的零件。 <br/>要编辑部件中的零件，请在模型树中选择它，然后使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>。 这将在FreeCAD中将零件在新选项卡中打开，或者如果文件已经打开，则切换到其选项卡。<br/>要将零件中的更改导入到部件中，请单击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart_Update.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart_Update.svg" width="24"/></a></span>。
</p>
</div>
<p>The first added part gets a fixed position by default. (You can change this later via the part property <span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>.)
</p><p>Parts that are already in the assembly can be cloned with the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DuplicatePart.svg"><img decoding="async" height="24" src="../File/A2p_DuplicatePart.svg" width="24"/></a></span>.
</p><p>To edit a part from the assembly, select it in the model tree and use the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>. This will open the part into a new tab in FreeCAD or switch to its tab if the file is already opened.
</p><p>To update changed parts in assemblies click on the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart_Update.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart_Update.svg" width="24"/></a></span>. The toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_RecursiveUpdate.svg"><img decoding="async" height="24" src="../File/A2p_RecursiveUpdate.svg" width="24"/></a></span> imports parts too but recursively over possible <a href="#Subassemblies">subassemblies</a>. If you select one or some parts in FreeCAD's the tree view, A2plus will ask you to only update the selected parts.
</p><p>导入的零件将保留其外部依赖性，并且可以进行编辑。 但是，对于像螺丝这样定义明确的零件，防止对其进行编辑造成意外修改很有用。 这可以通过工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ConvertPart.svg"><img decoding="async" height="24" src="../File/A2p_ConvertPart.svg" width="24"/></a></span>实现，该按钮可将所选零件转换为原始零件的静态副本。
</p><p>要保存装配体并随后将其关闭，可以使用工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Save_and_exit.svg"><img decoding="async" height="24" src="../File/A2p_Save_and_exit.svg" width="24"/></a></span>。
</p><p>Toggling the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_CD_OneButton.svg"><img decoding="async" height="24" src="../File/A2p_CD_OneButton.svg" width="24"/></a></span> sets the way you can select several several edges, faces etc.: Either with a single click or by <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Ctrl</span>+click.
</p>
<h2><span id=".E8.A3.85.E9.85.8D"></span><span class="mw-headline" id="装配">装配</span></h2>
<div class="mw-translate-fuzzy">
<p>通过在零件之间添加约束来将零件组装成部件。 约束后，如果可能，A2plus将根据约束移动零件。<br/>对于零件之间的复杂约束，A2plus可能无法解析。 因此也可以参考<a href="#Troubleshooting/zh-hans">故障排除</a>部分中有关解决此类情况的策略。
</p>
</div>
<div class="mw-translate-fuzzy">
<p>通过按住<span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Ctrl</span>(MAC用户需使用<span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">command</span>)键并选择两个零件的边或面来添加零件之间的约束。 约束将附加在模型树中，并添加到受影响的零件。
</p>
</div>
<p>For complex constraints between parts A2plus might fail to solve the constraints. Therefore also have a look at section <a href="#Troubleshooting">Troubleshooting</a> for strategies to resolve such cases.
</p>
<h3><span id=".E4.BF.9D.E6.8C.81.E8.BF.BD.E8.B8.AA"></span><span class="mw-headline" id="保持追踪">保持追踪</span></h3>
<p>添加的零件越多，跟踪就越重要。 因此，A2plus提供了以下工具来移动和查看零件：
</p>
<ul><li>要在部件中移动零件，请先在模型树中将其选中，然后点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_MovePart.svg"><img decoding="async" height="24" src="../File/A2p_MovePart.svg" width="24"/></a></span>。将零件放置在所需位置后，用鼠标左键单击完成移动操作。如果被移动的零件已经具有约束，它将通过按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_solver.svg"><img decoding="async" height="24" src="../File/A2p_solver.svg" width="24"/></a></span>进行相应放置，因为这将触发部件的所有约束的解析操作。</li>
<li>要显示约束，请在模型树中将其选中，然后点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ViewConnection.svg"><img decoding="async" height="24" src="../File/A2p_ViewConnection.svg" width="24"/></a></span>。这将使整个装配透明，并突出显示通过约束连接的两个对象。要返回普通视图，请在部件中单击鼠标左键。</li>
<li>要仅显示装配中的某些零件，请在模型树中选择这些零件，然后使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Isolate_Element.svg"><img decoding="async" height="24" src="../File/A2p_Isolate_Element.svg" width="24"/></a></span>。或者，您可以通过在模型树中选择某个零件并按<span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Space</span>来切换其可见性来隐藏该零件。</li>
<li>要切换整个装配体的透明度视图，可以点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ToggleTransparency.svg"><img decoding="async" height="24" src="../File/A2p_ToggleTransparency.svg" width="24"/></a></span>。</li>
<li>使用正常的FreeCAD编辑可以使每个零件透明。但是，有时由于FreeCAD中的错误，在重新打开装配体时零件的透明度设置会丢失。解决方法是，可以点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Restore_Transparency.svg"><img decoding="async" height="24" src="../File/A2p_Restore_Transparency.svg" width="24"/></a></span>恢复透明度设置。</li></ul>
<h3><span id=".E7.BA.A6.E6.9D.9F"></span><span class="mw-headline" id="约束">约束</span></h3>
<div class="mw-translate-fuzzy">
<p>创建约束时，按下约束工具栏按钮后将显示一个对话框:<br/>
<span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ConstraintPropertiesDialog.png"><img decoding="async" height="214" src="../File/A2p_ConstraintPropertiesDialog.png" width="344"/></a></span><br/>
对于某些约束，它允许您修改约束方向。 点击按钮<span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;"><span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_solver.svg"><img decoding="async" height="24" src="../File/A2p_solver.svg" width="24"/></a></span> Solve</span> 您可以预先检查是否可以用A2plus解析这个新约束。 如果不是，请查看<a href="#Troubleshooting">故障排除</a>部分。
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ConstraintPropertiesDialog.png"><img decoding="async" height="214" src="../File/A2p_ConstraintPropertiesDialog.png" width="344"/></a></span>
</p>
<p style="text-align:left; font-style:italic; width:800px; margin-left:1em; margin-right:1em;">Above: The A2plus Constraint Properties Dialog</p>
<p>For certain constraints it allows you to modify the constraint direction. With the button <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;"><span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_solver.svg"><img decoding="async" height="24" src="../File/A2p_solver.svg" width="24"/></a></span> Solve</span> you can check beforehand if this new constraint can be solved by A2plus. If not, have a look at section <a href="#Troubleshooting">Troubleshooting</a>.
</p><p>Constraints can be disabled by changing its <a href="Std_ToggleVisibility.html" title="Std ToggleVisibility">visibility</a>. This is done by selecting the constraint in the tree view and pressing <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Space</span>. This toggles the property <span style="font-size:60%; padding-right:0.8em;">Data</span><b>Suppressed</b>. A suppressed constraint is not taken into account when the assembly is solved.
</p><p>A2plus提供下列约束:
</p>
<h4><span id=".E7.82.B9.E5.AF.B9.E7.82.B9"></span><span class="mw-headline" id="点对点">点对点</span></h4>
<p>在不同的两个零件上各选择一个<a href="Glossary.html#Vertex" title="Glossary">顶点</a> （点）。点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PointIdentity.svg"><img decoding="async" height="24" src="../File/A2p_PointIdentity.svg" width="24"/></a></span>添加<b>点重合</b>约束，它将使选中的两个顶点重合。
</p>
<h4><span id=".E7.82.B9.E5.AF.B9.E7.BA.BF"></span><span class="mw-headline" id="点对线">点对线</span></h4>
<p>选择一个零件上的<a href="Glossary.html#Vertex" title="Glossary">顶点</a>（点）或圆形<a href="Glossary.html#Edge" title="Glossary">边</a>（将选择其中心点）或一个球<a href="Glossary.html#Face" title="Glossary">面</a>（也将选择其中心点）,然后选择另一零件上的<a href="Glossary.html#Edge" title="Glossary">边</a>。工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PointOnLineConstraint.svg"><img decoding="async" height="24" src="../File/A2p_PointOnLineConstraint.svg" width="24"/></a></span> 添加<b>线上点</b>约束。它会把顶点移动到边的上面。
</p>
<h4><span id=".E7.82.B9.E5.AF.B9.E9.9D.A2"></span><span class="mw-headline" id="点对面">点对面</span></h4>
<p>选择一个零件上的<a href="Glossary.html#Vertex" title="Glossary">顶点</a>（点）或圆形<a href="Glossary.html#Edge" title="Glossary">边</a>（将选择其中心点）或一个球面<a href="Glossary.html#Face" title="Glossary">面</a>（也将选择其中心点）和另一个零件上的平面。点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PointOnPlaneConstraint.svg"><img decoding="async" height="24" src="../File/A2p_PointOnPlaneConstraint.svg" width="24"/></a></span>添加<b>面上点</b>约束。“约束”对话框允许您设定点和平面之间的偏移。此偏移也可以在平面的两侧之间翻转。如果偏移为零，则约束将顶点放置在平面上。
</p>
<h4><span id=".E7.90.83.E9.9D.A2.E5.AF.B9.E7.90.83.E9.9D.A2"></span><span class="mw-headline" id="球面对球面">球面对球面</span></h4>
<p>在两个零件上选择球<a href="Glossary.html#Face" title="Glossary">面</a>或<a href="Glossary.html#Vertex" title="Glossary">顶点</a>（点）。 点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_SphericalSurfaceConstraint.svg"><img decoding="async" height="24" src="../File/A2p_SphericalSurfaceConstraint.svg" width="24"/></a></span>添加<b>球心重合</b>约束。 它将使两个零件的球心，一个零件的球的中心与零件的顶点或两个零件的顶点重合。
</p>
<h4><span id=".E5.9C.86.E8.BE.B9.E5.AF.B9.E5.9C.86.E8.BE.B9"></span><span class="mw-headline" id="圆边对圆边">圆边对圆边</span></h4>
<p>在两个零件上选择圆形<a href="Glossary.html#Edge" title="Glossary">边</a>。 点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_CircularEdgeConstraint.svg"><img decoding="async" height="24" src="../File/A2p_CircularEdgeConstraint.svg" width="24"/></a></span>添加<b>圆形边</b>约束。 约束对话框允许您指定边缘之间的偏移。 该偏移量也可以翻转。 您还可以设置约束方向并锁定零件的旋转。 如果偏移量为零，则约束将使边缘同心于同一平面。
</p>
<h4><span id=".E8.BD.B4.E7.BA.A6.E6.9D.9F"></span><span class="mw-headline" id="轴约束">轴约束</span></h4>
<p>在两个部分上选择圆柱形<a href="Glossary.html#Face" title="Glossary">面</a>或线性<a href="Glossary.html#Edge" title="Glossary">边</a>。点击工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AxialConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AxialConstraint.svg" width="24"/></a></span>添加<b>轴约束</b>。 约束对话框允许您指定轴方向。 该对话框还允许您锁定零件的旋转。 约束将使轴或线重合。
</p>
<h4><span id=".E8.BD.B4.E5.B9.B3.E8.A1.8C"></span><span class="mw-headline" id="轴平行">轴平行</span></h4>
<p>在两个零件上选择圆柱形<a href="Glossary.html#Face" title="Glossary">面</a>或线性<a href="Glossary.html#Edge" title="Glossary">边</a>。 工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AxisParallelConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AxisParallelConstraint.svg" width="24"/></a></span>添加了<b>轴平行</b>约束。 约束对话框允许您指定轴方向。 约束将使轴或线平行。
</p>
<h4><span id=".E8.BD.B4.E5.AF.B9.E9.9D.A2.E5.B9.B3.E8.A1.8C"></span><span class="mw-headline" id="轴对面平行">轴对面平行</span></h4>
<p>在一个零件上选择圆柱<a href="Glossary.html#Face" title="Glossary">面</a>或线性<a href="Glossary.html#Edge" title="Glossary">边</a>，在另一部分选择一个平面。 工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AxisPlaneParallelConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AxisPlaneParallelConstraint.svg" width="24"/></a></span>添加<b>轴与面平行</b>约束。 约束将使轴或线平行于平面。
</p>
<h4><span id=".E8.BD.B4.E5.AF.B9.E9.9D.A2.E6.B3.95.E7.BA.BF"></span><span class="mw-headline" id="轴对面法线">轴对面法线</span></h4>
<p>在一个零件上选择圆柱<a href="Glossary.html#Face" title="Glossary">面</a>或线性<a href="Glossary.html#Edge" title="Glossary">边</a>，在另一零件选择一个平面。 工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AxisPlaneNormalConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AxisPlaneNormalConstraint.svg" width="24"/></a></span>添加<b>轴与面法线平行</b>约束。 约束将使轴或线垂直于平面。
</p>
<h4><span class="mw-headline" id="Axis_on_Plane_angle">Axis on Plane angle</span></h4>
<p>Select either a cylindrical <a href="Glossary.html#Face" title="Glossary">face</a> or a linear <a href="Glossary.html#Edge" title="Glossary">edge</a> on one part and a plane on the other part. The toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AxisPlaneAngleConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AxisPlaneAngleConstraint.svg" width="24"/></a></span> adds the constraint <b>axisPlaneAngle</b>. The constraint will at first make the axis parallel to the plane. Then you can adjust the angle for the axis in the appearing constraint settings dialog.
</p>
<h4><span id=".E9.9D.A2.E5.B9.B3.E8.A1.8C"></span><span class="mw-headline" id="面平行">面平行</span></h4>
<p>在两个零件上选择一个平面。 按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PlanesParallelConstraint.svg"><img decoding="async" height="24" src="../File/A2p_PlanesParallelConstraint.svg" width="24"/></a></span>添加<b>面与面相互平行</b>约束。 约束对话框允许您指定约束方向。 约束将使平面平行。
</p>
<h4><span id=".E9.9D.A2.E5.AF.B9.E9.9D.A2"></span><span class="mw-headline" id="面对面">面对面</span></h4>
<p>在两个零件上选择平面。 按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PlaneCoincidentConstraint.svg"><img decoding="async" height="24" src="../File/A2p_PlaneCoincidentConstraint.svg" width="24"/></a></span>添加<b>面与面重合</b>约束。 约束对话框允许您指定约束方向和平面之间的偏移。 该偏移量也可以翻转。 如果偏移量为零，则约束将使平面重合。
</p>
<h4><span id=".E6.96.9C.E9.9D.A2"></span><span class="mw-headline" id="斜面">斜面</span></h4>
<p>在两个零件上选择平面。 点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AngleConstraint.svg"><img decoding="async" height="24" src="../File/A2p_AngleConstraint.svg" width="24"/></a></span>添加<b>斜面</b>约束。 约束对话框允许您指定平面之间的角度。 约束将使平面首先平行，并设置指定的角度。
</p>
<h4><span id=".E9.87.8D.E5.BF.83.E9.87.8D.E5.90.88"></span><span class="mw-headline" id="重心重合">重心重合</span></h4>
<p>在两个零件上选择闭合的<a href="Glossary.html#Edge" title="Glossary">边</a>或平面。 点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_CenterOfMassConstraint.svg"><img decoding="async" height="24" src="../File/A2p_CenterOfMassConstraint.svg" width="24"/></a></span>添加<b>重心</b>约束。 约束对话框允许您指定边或平面之间的偏移。 该偏移量也可以翻转。 您还可以设置约束方向并锁定零件的旋转。 如果偏移量为零，则约束会将边或平面置于同一平面中。
</p>
<h3><span id=".E5.AD.90.E9.83.A8.E4.BB.B6"></span><span class="mw-headline" id="子部件">子部件</span></h3>
<p>一个部件可以包含其他部件。 通过按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart.svg" width="24"/></a></span>，然后选择包含部件<span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">* .FCStd</span>文件，可以像零件一样添加它们。 也可以使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>像零件一样编辑这些子部件。请确保当发生更改后通过工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart_Update.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart_Update.svg" width="24"/></a></span>更新部件关系。
</p>
<h2><span id=".E7.BA.A6.E6.9D.9F.E5.A4.84.E7.90.86"></span><span class="mw-headline" id="约束处理">约束处理</span></h2>
<p>通过启用相应的按钮，可以选用的约束会高亮显示在工具栏和“约束工具”对话框中。 通过点击工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DefineConstraints.svg"><img decoding="async" height="24" src="../File/A2p_DefineConstraints.svg" width="24"/></a></span>打开“约束工具”对话框。 它旨在保持打开状态，以便能够快速向部件添加多个约束。
</p><p>可以通过在模型树中选择现有约束来进行编辑，然后双击它或使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditConstraint.svg"><img decoding="async" height="24" src="../File/A2p_EditConstraint.svg" width="24"/></a></span>。 这将打开“约束属性”对话框。
</p><p>Constraints can be temporarily suppressed by selecting them in the model tree and changing the tree element property <span style="font-size:60%; padding-right:0.8em;">Data</span><b>Suppressed</b>.
</p><p>可以通过在模型树中选择约束并按<span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Del</span>或在模型树中选择带有约束的零件并使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DeleteConnections.svg"><img decoding="async" height="24" src="../File/A2p_DeleteConnections.svg" width="24"/></a></span>来删除约束。
</p><p>使用工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_solver.svg"><img decoding="async" height="24" src="../File/A2p_solver.svg" width="24"/></a></span>可以随时解析所有约束。 如果工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ToggleAutoSolve.svg"><img decoding="async" height="24" src="../File/A2p_ToggleAutoSolve.svg" width="24"/></a></span>处于打开状态，则在每次编辑约束后都会自动完成解析。
</p><p>工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_FlipConstraint.svg"><img decoding="async" height="24" src="../File/A2p_FlipConstraint.svg" width="24"/></a></span>影响最近添加的约束。 点击后将翻转约束方向。
</p><p>With the <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_CD_ConstraintViewer.svg"><img decoding="async" height="43" src="../File/A2p_CD_ConstraintViewer.svg" width="24"/></a></span> tool, it is possible the show and inspect existing constraints. After clicking it a dialog pops up. Then either select a part in the tree and click the button <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;">Import from part</span> to get all constraints of this part, or select one or more constraints in the tree and click the button <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;">Import from Tree</span>. As result you get all info about the constraints. By clicking in the column <i>Suppress</i> a single constraint can be suppressed. For more features, follow the tooltips of the other dialog buttons.
</p>
<h2><span id=".E9.9B.B6.E4.BB.B6.E6.B8.85.E5.8D.95"></span><span class="mw-headline" id="零件清单">零件清单</span></h2>
<p>要创建部件的零件清单，部件的不同零件必须获取A2plus可以读取的零件信息。 这可以通过使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>编辑零件来完成。 在打开的部件中，按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartsInfo.svg"><img decoding="async" height="24" src="../File/A2p_PartsInfo.svg" width="24"/></a></span> ，并创建一个名称为<i>#PARTINFO#</i>的 <a class="new" href="index.php?title=Spreadsheet_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Spreadsheet Workbench/zh-hans (page does not exist)">电子表格</a>。
</p><p>电子表格的结构如下：
</p><p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartinfoTable.png"><img decoding="async" height="207" src="../File/A2p_PartinfoTable.png" width="576"/></a></span>
</p><p>在最终零件列表中，用您希望使用的信息填写灰色字段。
</p><p>在部件或子部件中，使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartsList.svg"><img decoding="async" height="24" src="../File/A2p_PartsList.svg" width="24"/></a></span>。 它将询问您是否要对所有子部件进行递归迭代。 点击“是”。 这将创建一个名为“＃PARTSLIST＃”的新电子表格。 它包含来自零件的不同“＃PARTSINFO＃”电子表格的信息，列表如下：
</p><p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartslistTable.png"><img decoding="async" height="114" src="../File/A2p_PartslistTable.png" width="727"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<p>位置（POS）根据模型树中零件的外观自动设置。 顶层零件将获得POS1。<br/>数量（QTY）是自动从装配中计算得出的。 如果零件在装配中出现两次，则将得到数量2。
</p>
</div>
<p>The quantity (QTY) is automatically calculated from the assembly. If a parts is twice in the assembly it will get QTY 2.
</p><p>如果您更新了零件信息，则可以再次按下工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartsList.svg"><img decoding="async" height="24" src="../File/A2p_PartsList.svg" width="24"/></a></span>来刷新零件列表。
</p><p>对于子部件，您还可以使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartsInfo.svg"><img decoding="async" height="24" src="../File/A2p_PartsInfo.svg" width="24"/></a></span>创建信息电子表格。 当您创建或更新主部件的零件清单时，如果您要对所有子部件进行递归迭代，请单击“否”以使用此信息。 这样，不同的零件不在零件清单中，而仅在子装配中。
</p>
<h2><span id=".E7.89.B9.E6.AE.8A.E5.8A.9F.E8.83.BD"></span><span class="mw-headline" id="特殊功能">特殊功能</span></h2>
<h3><span id=".E9.83.A8.E4.BB.B6.E7.BB.93.E6.9E.84"></span><span class="mw-headline" id="部件结构">部件结构</span></h3>
<div class="mw-translate-fuzzy">
<p>点击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Treeview.svg"><img decoding="async" height="24" src="../File/A2p_Treeview.svg" width="24"/></a></span>将创建一个具有部件结构的HTML文件。 默认情况下，将在部件文件的文件夹中创建该文件。 结构看起来像这样：<br/> <span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Dependency-Tree.jpg"><img decoding="async" height="180" src="../File/A2p_Dependency-Tree.jpg" width="217"/></a></span>
</p>
</div>
<dl><dd><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Dependency-Tree.jpg"><img decoding="async" height="180" src="../File/A2p_Dependency-Tree.jpg" width="217"/></a></span></dd></dl>
<h3><span id=".E8.87.AA.E7.94.B1.E5.BA.A6"></span><span class="mw-headline" id="自由度">自由度</span></h3>
<div class="mw-translate-fuzzy">
<pre><span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DOFs.svg"><img decoding="async" height="24" src="../File/A2p_DOFs.svg" width="24"/></a></span>按钮用其自由度标记部件的每个零件。 此外，它的输出包含所有零件及其依存关系的列表。 该列表输出到FreeCAD的小程序“报告视图”中。 如果当前不可见此小程序，则可以通过右键单击FreeCAD工具栏区域的空白部分，然后在出现的上下文菜单中或通过菜单 <b>View → Panels → Report view</b>。<br/>再次单击按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DOFs.svg"><img decoding="async" height="24" src="../File/A2p_DOFs.svg" width="24"/></a></span>可以删除自由度标签。
</pre>
</div>
<p>The degrees of freedom labels can be removed by clicking the button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DOFs.svg"><img decoding="async" height="24" src="../File/A2p_DOFs.svg" width="24"/></a></span> again.
</p>
<h3><span id=".E9.9B.B6.E4.BB.B6.E6.A0.87.E7.AD.BE"></span><span class="mw-headline" id="零件标签">零件标签</span></h3>
<p>点击按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartLabel.svg"><img decoding="async" height="24" src="../File/A2p_PartLabel.svg" width="24"/></a></span> 用其名称标记三维视图中部件的每个零件。再次单击按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_PartLabel.svg"><img decoding="async" height="24" src="../File/A2p_PartLabel.svg" width="24"/></a></span>可以删除零件标签
</p>
<h3><span id=".E9.83.A8.E4.BB.B6.E6.95.B4.E4.BD.93.E5.BD.A2.E7.8A.B6"></span><span class="mw-headline" id="部件整体形状">部件整体形状</span></h3>
<div class="mw-translate-fuzzy">
<p>有时有必要将整个组件组合为一个形状。 然后，该形状可以用于<a class="new" href="index.php?title=Mesh_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Mesh Workbench/zh-hans (page does not exist)">网格工作台</a>中的3D打印或<a class="new" href="index.php?title=TechDraw_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="TechDraw Workbench/zh-hans (page does not exist)">技术图纸工作台</a>中的图形。 使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_SimpleAssemblyShape.svg"><img decoding="async" height="24" src="../File/A2p_SimpleAssemblyShape.svg" width="24"/></a></span>创建。 默认情况下，该形状不可见。 如果部件发生更改，请使用相同的工具栏按钮来更新形状。
</p>
</div>
<h3><span class="mw-headline" id="Convert_absolute_Paths_to_relative_Ones">Convert absolute Paths to relative Ones</span></h3>
<p>With the menu <b>A2plus → Misc → <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_SetRelativePathes.svg"><img decoding="async" height="24" src="../File/A2p_SetRelativePathes.svg" width="24"/></a></span> Convert absolute paths of imported parts to relative ones</b> you can convert absolute paths of imported parts to relative ones.
</p>
<h2><span id=".E5.8F.82.E8.80.83"></span><span class="mw-headline" id="参考">参考</span></h2>
<p>可以通过FreeCAD的菜单<b>Edit → <a href="Preferences_Editor.html" title="Preferences Editor">Preferences</a></b>访问A2plus首选项，并在“ A2plus”部分中进行访问。 您可以设置以下选项：
</p>
<h3><span id=".E9.BB.98.E8.AE.A4.E8.A7.A3.E6.9E.90.E6.96.B9.E6.B3.95"></span><span class="mw-headline" id="默认解析方法">默认解析方法</span></h3>
<div class="mw-translate-fuzzy">
<ul><li><b>使用局部系统求解</b><br/>求解器以将属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为“True”的零件以及受其约束的零件开始。 不计算所有其他部分。 如果可以找到解析方案，则将下一个约束部分添加到计算中，依此类推。</li>
<li><b>使用“磁性”求解器，一次求解所有零件</b><br/>求解器尝试将所有零件一次定向移动到<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>属性设置为 <i>True</i>的零件上。 请注意，在大多数情况下，这将需要更多时间来计算解决方案。</li>
<li><b>强制固定位置</b><br/>它将装配中所有零件的属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为“ true”。 由于所有零件将始终固定在其创建位置，因此实际上不执行任何计算。</li></ul>
</div>
<h3><span id=".E9.BB.98.E8.AE.A4.E6.B1.82.E8.A7.A3.E5.99.A8.E8.A1.8C.E4.B8.BA"></span><span class="mw-headline" id="默认求解器行为">默认求解器行为</span></h3>
<dl><dt>Solve automatically if a constraint property is changed</dt>
<dd>The solver will automatically be started. The same as turning on the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ToggleAutoSolve.svg"><img decoding="async" height="24" src="../File/A2p_ToggleAutoSolve.svg" width="24"/></a></span>.</dd></dl>
<p><br/>
</p>
<div class="mw-translate-fuzzy">
<ul><li>'<i>如果更改约束属性，则自动求解</i><br/>求解器将自动启动。 与打开工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ToggleAutoSolve.svg"><img decoding="async" height="24" src="../File/A2p_ToggleAutoSolve.svg" width="24"/></a></span>后的结果相同。</li></ul>
<p> 
</p>
<h3><span id=".E6.9B.B4.E6.96.B0.E5.AF.BC.E5.85.A5.E9.9B.B6.E4.BB.B6.E6.97.B6.E7.9A.84.E8.A1.8C.E4.B8.BA"></span><span class="mw-headline" id="更新导入零件时的行为">更新导入零件时的行为</span></h3>
</div>
<div class="mw-translate-fuzzy">
<ul><li><b>在更新之前重新计算导入的零件</b><br/>将在FreeCAD中打开装配的所有零件，包括子bujian ，以便使用电子表格中的值进行重建。<br/>此功能旨在完全参数化构造。 <b>注意：</b>此功能是非常试验性的，不建议用于重要项目。<br/>已知问题：
<ul><li>由于错误引用零件中的拓扑名称，可能会破坏装配体</li>
<li>如果在已关闭参考零件文件的情况下进行编辑，则主电子表格可能会损坏。 这会使FreeCAD崩溃。</li></ul></li></ul>
</div>
<div class="mw-translate-fuzzy">
<ul><li><b>启用对导入零件的递归更新</b><br/>递归打开所有子部件以更新它们。</li></ul>
</div>
<div class="mw-translate-fuzzy">
<ul><li><b>使用实验性的拓扑命名</b><br/>将零件导入部件时，算法会为导入形状的每个子元素生成拓扑名称。拓扑名称被写入<span style="font-size:60%; padding-right:0.8em;">Data</span><b>mux Info</b>。当需要更新导入的零件时，这些拓扑名称用于更新约束的子元素。因此，程序集对FreeCAD的易失性子元素数变得更加健壮。<br/>“注意：<b>这会增加导入部件期间的文件大小和计算时间。如果要使用拓扑命名，则必须在创建程序集之前激活它。</b></li></ul>
</div>
<div class="mw-translate-fuzzy">
<ul><li><b>子部件从零件继承面的透明度</b><br/>部件将使用导入零件的颜色和透明度设置。<br/><b>注意：</b>此功能是非常试验性的，不建议用于重要项目。</li></ul>
</div>
<div class="mw-translate-fuzzy">
<ul><li><b>不导入不可见的形状</b><br/>这将隐藏不可见的基准/构造形状。 <b>注意：</b>不要将任何约束条件连接到更高层级部件或其他子部件中的基准/构造形状。 否则，您可能会破坏部件。</li></ul>
</div>
<div class="mw-translate-fuzzy">
<ul><li>'<i>使用实体联合体来导入零件和子装配</i><br/>所有导入的零件将直接作为联合体放在一起。<br/>如果只允许使用一个实体，此功能对于<a class="new" href="index.php?title=FEM_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="FEM Workbench/zh-hans (page does not exist)">有限元</a>模拟或<a href="Manual;Preparing_models_for_3D_printing.html" title="Manual:Preparing models for 3D printing">3D打印</a>很有用。 另一种方法是稍后创建 <a href="#Shape_of_whole_Assembly">整个部件的外形</a>。</li></ul>
</div>
<h3><span id=".E7.94.A8.E6.88.B7.E7.95.8C.E9.9D.A2.E8.AE.BE.E7.BD.AE"></span><span class="mw-headline" id="用户界面设置">用户界面设置</span></h3>
<div class="mw-translate-fuzzy">
<ul><li>'<i>在工具栏中显示约束</i><br/>如果不使用此选项，则不同约束的工具栏按钮将不可见，以节省工具栏中的空间。 仍然可以使用“约束工具”对话框（工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_DefineConstraints.svg"><img decoding="async" height="24" src="../File/A2p_DefineConstraints.svg" width="24"/></a></span>）设置新约束。</li>
<li><b>使用操作系统的本机文件管理器</b><br/>如果使用此选项，则在选择部件文件时会出现操作系统的文件对话框。</li></ul>
</div>
<h3><span id=".E6.96.87.E4.BB.B6.E5.AD.98.E5.82.A8"></span><span class="mw-headline" id="文件存储">文件存储</span></h3>
<div class="mw-translate-fuzzy">
<ul><li><b>使用导入零件的相对路径</b><br/>使用零件文件的相对文件路径。</li>
<li><b>为导入的零件使用绝对路径</b><br/>使用零件文件的绝对文件路径。</li>
<li><b>所有文件都在此项目文件夹中：</b><br/>所有项目文件都必须在指定文件夹中。 它们是否在此文件夹的子文件夹中并不重要。 <b>注意：</b>不允许在相同文件夹中多次存在同一文件（例如，在不同的子文件夹中）。<br/>此选项在不同的计算机上工作很有帮助，因为这样一来，仅需复制项目文件夹即可。</li></ul>
</div>
<h2><span id=".E6.95.85.E9.9A.9C.E6.8E.92.E9.99.A4"></span><span class="mw-headline" id="故障排除">故障排除</span></h2>
<p>迟早您会遇到A2plus无法解决您设置的约束的问题。 为了克服这个问题，有不同的策略：
</p>
<h3><span class="mw-headline" id="Using_the_Conflict_Finder_Tool">Using the Conflict Finder Tool</span></h3>
<p>This is the safest method when you have several constraints because this tool attempts to solve one constraint after another until it finds the conflicting constraint. Then you can go on with the other strategies to resolve the identified constraint. The tool is called using the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_SearchConstraintConflicts.svg"><img decoding="async" height="24" src="../File/A2p_SearchConstraintConflicts.svg" width="24"/></a></span>.
</p>
<h3><span class="mw-headline" id="Checking_Constraint_Direction">Checking Constraint Direction</span></h3>
<p>有时似乎总是定义了约束，但仍然无法解决。 一个示例：假设为两个平面设置了<b><a href="#Plane_Parallel">面平行</a></b>约束。 现在，您想为相同的平面设置 <b><a href="#Plane_on_Plane">面重合</a></b>约束，而A2plus无法解决该约束。 然后<b>面平行</b> 和 <b>面重合</b> 的约束方向是不同的。 对两个约束使用相同的方向来解决此问题。
</p><p>A2plus offers to automatically check the right direction for <b>all</b> constraints of the assembly using the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ReAdjustConstraints.svg"><img decoding="async" height="24" src="../File/A2p_ReAdjustConstraints.svg" width="24"/></a></span>.
</p>
<h3><span id=".E5.88.A0.E9.99.A4.E7.BA.A6.E6.9D.9F"></span><span class="mw-headline" id="删除约束">删除约束</span></h3>
<p>大多数无法解决的约束在添加新约束时直接发生。然后，解决方案是删除上次添加的约束。A2plus也会提出这个建议。
</p><p>有时删除策略是唯一的策略，例如，在FreeCAD中编辑零件时，会丢失连接到约束的面或边。然后，应一次删除一个连接到已更改零件的约束。每次删除后，使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_solver.svg"><img decoding="async" height="24" src="../File/A2p_solver.svg" width="24"/></a></span>查看是否达到可解状态。
</p><p>当得到可以求解的装配体时，请逐步添加所需的约束。
</p>
<h3><span id=".E7.A7.BB.E5.8A.A8.E9.9B.B6.E4.BB.B6"></span><span class="mw-headline" id="移动零件">移动零件</span></h3>
<p>当您得到的部件在某些情况下，求解器仅需要更好的起始值即可求解约束。 例如，您有一个轴零件和一个车轮零件。 您添加了<b>轴重合</b>约束，没有获得求解器失败但零件没有相应移动的信息，在FreeCAD的“报告视图”小部件中，您看到“<i>REACHED POS-ACCURACY：0.0' '”。 一种解决方案是通过约束将零件移到您想要获得的位置附近。可以解决此问题，逐步添加所需的约束。</i>
</p><p><i>注意：</i>确保约束的至少一部分将属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为<i>false</i>。
</p>
<h3><span id=".E8.AE.BE.E7.BD.AE.E6.8F.90.E7.A4.BA.E5.B1.9E.E6.80.A7"></span><span class="mw-headline" id="设置提示属性">设置提示属性</span></h3>
<div class="mw-translate-fuzzy">
<p>如果在导入到A2plus部件后错过了零件的某些特征，请检查属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b><a href="PartDesign_MoveTip.html" title="PartDesign MoveTip">提示</a></b>。<br/> A2plus会导入具有所有特征的零件实体特征。 这是明智的，因为将提示设置为某个特征意味着提示背后的所有特征都不应出现在最终零件中。 因此，如果您丢失了A2plus中的零件特征，请通过工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>打开零件，然后选择一个实体并查看其属性 <span style="font-size:60%; padding-right:0.8em;">Data</span><b>Tip</b>。 如果提示不在所需的功能上，请右键单击该提示应位于的特征，然后选择<b><span typeof="mw:File"><a class="mw-file-description" href="../File/PartDesign_MoveTip.png"><img decoding="async" height="24" src="../File/PartDesign_MoveTip.png" srcset="/images/thumb/4/4c/PartDesign_MoveTip.png/36px-PartDesign_MoveTip.png 1.5x, /images/thumb/4/4c/PartDesign_MoveTip.png/48px-PartDesign_MoveTip.png 2x" width="24"/></a></span>设置提示</b>。 最后，保存零件并使用工具栏按钮 <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart_Update.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart_Update.svg" width="24"/></a></span>重新加载部件。
</p>
</div>
<p>A2plus imports bodies of parts with all their features up to the tip feature. This is sensible because setting the tip to a certain feature means that all features behind the tip should not appear in the final part. So if you miss a part feature in A2plus, open the part via the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_EditPart.svg"><img decoding="async" height="24" src="../File/A2p_EditPart.svg" width="24"/></a></span>, then select a body and look at its property <span style="font-size:60%; padding-right:0.8em;">Data</span><b>Tip</b>. If the tip is not at the feature where you want it, right-click on the feature where the tip should be and choose <b><span typeof="mw:File"><a class="mw-file-description" href="../File/PartDesign_MoveTip.svg"><img decoding="async" height="24" src="../File/PartDesign_MoveTip.svg" width="24"/></a></span> Set tip</b>. Finally save the part and reload the assembly using the toolbar button <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_ImportPart_Update.svg"><img decoding="async" height="24" src="../File/A2p_ImportPart_Update.svg" width="24"/></a></span>.
</p>
<h3><span id=".E4.BF.AE.E5.A4.8D.E9.83.A8.E4.BB.B6.E6.A0.91"></span><span class="mw-headline" id="修复部件树">修复部件树</span></h3>
<p>如果您看不到无法解决某些约束的明确原因，则可以尝试使用工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_RepairTree.svg"><img decoding="async" height="24" src="../File/A2p_RepairTree.svg" width="24"/></a></span>。 这将解析所有约束，然后在不同零件下重新分组。
</p>
<h3><span class="mw-headline" id="Migrating_old_A2plus_assemblies">Migrating old A2plus assemblies</span></h3>
<p>Assemblies created with A2plus older than March 2019 do not show the correct icons for imported parts and have obsolete properties. These assemblies can be migrated to A2plus version 0.4.35 and newer using the menu <b>A2plus → Misc → <span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_Upgrade.svg"><img decoding="async" height="24" src="../File/A2p_Upgrade.svg" width="24"/></a></span> Migrate proxies of imported parts</b>. After doing this, you must save and reopen your assembly file.
</p>
<h3><span id=".E9.81.BF.E5.85.8D.E4.BD.BF.E7.94.A8.E9.87.8D.E9.9F.B3.E7.AC.A6.E5.8F.B7"></span><span class="mw-headline" id="避免使用重音符号">避免使用重音符号</span></h3>
<p><b>This strategy is not necessary for Windows.</b>
</p><p>在某些操作系统上，如果零件或部件的文件名或文件路径包含重音符号，则可能会出现问题。 因此，一般应避免使用此类字符以及特殊字符。
</p>
<h3><span id=".E5.9B.BA.E5.AE.9A.E4.BD.8D.E7.BD.AE"></span><span class="mw-headline" id="固定位置">固定位置</span></h3>
<p><b>使用A2plus 0.3.11或更高版本创建的装配体不再需要此策略，因为A2plus现在会发出警告，提示缺少固定位置。</b>
</p><p>当您在两个零件之间设置约束时，没有零件的属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为“ true”，或者没有约束将零件连接到<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为' 'true'，约束无法解决。 如果约束的两个部分都将<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为“ true”，则会发生相同的情况。
</p><p>随后A2plus会输出有关失败解决方案的信息，但是有时您只会看到零件没有相应移动，在FreeCAD的“报告视图”小部件中，您会看到“<i>REACHED POS-ACCURACY：0.0</i>”。 这意味着求解器完成时没有错误，但实际上无法解决约束。
</p><p>因此，请检查装配中至少有一个零件的<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为“ true”。 然后确保仅对以某种方式连接到固定零件的零件设置约束。 要可视化这些依赖关系，请参见<a href="#Assembly_Structure/zh-hans">装配体结构</a>节。
</p>
<h3><span id=".E6.97.8B.E8.BD.AC.E9.9B.B6.E4.BB.B6"></span><span class="mw-headline" id="旋转零件">旋转零件</span></h3>
<p>'<i>使用A2plus 0.4.0或更高版本创建的装配体不再需要此策略，因为A2plus现在会在后台自动旋转零件一点以为求解器获得足够的起始角度。</i>
</p><p>如果两个选定平面当前的角度为0°或180°，则求解器通常由于约束 <b>斜面</b>而失败。（零件不会相应移动，在FreeCAD的“报告视图”小部件中，您会看到“<i>REACHED POS-ACCURACY：0.0</i>”。）一种解决方案是使用FreeCAD将零件旋转几度。 变换功能（右键单击模型树中的零件，然后在上下文菜单<b>变换</b>中进行选择）。
</p><p><i>注意：</i>确保约束的至少一部分将属性<span style="font-size:60%; padding-right:0.8em;">Data</span><b>fixed Position</b>设置为<i>false</i>。
</p>
<h2><span id=".E5.8A.A8.E7.94.BB"></span><span class="mw-headline" id="动画">动画</span></h2>
<p>A2plus通过拖动和Python脚本提供动画功能。
</p>
<h3><span id=".E6.8B.96.E5.8A.A8"></span><span class="mw-headline" id="拖动">拖动</span></h3>
<p>拖动动画是交互式的，因为您可以通过拖动部件的一部分来触发动画。
要获得这些动画：
</p>
<ol><li>完全约束应该对其运动或旋转进行动画处理的部分</li>
<li>单击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/A2p_MovePartUnderConstraints.svg"><img decoding="async" height="24" src="../File/A2p_MovePartUnderConstraints.svg" width="24"/></a></span>。 这将启用拖动模式。</li>
<li>单击装配体中所需的零件。</li>
<li>现在，您可以移动鼠标，并且零件将在定义的约束内跟随鼠标的移动。</li>
<li>要结束拖动模式，请在部件中单击鼠标左键或按ESC。</li></ol>
<p>这是一个尝试拖动动画的示例部件：<a class="external text" href="https://forum.freecadweb.org/download/file.php?id=99204" rel="nofollow">A2p_example-for-dragging-animation.FCStd</a>
</p><p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_dragging-animation-result.gif"><img decoding="async" height="328" src="../File/A2p_dragging-animation-result.gif" width="509"/></a></span>
</p>
<div class="mw-translate-fuzzy">
<p>这是使用示例程序集的拖动动画：
</p>
</div>
<h3><span id=".E8.84.9A.E6.9C.AC.E7.BC.96.E5.86.99"></span><span class="mw-headline" id="脚本编写">脚本编写</span></h3>
<p>尽管拖动模式提供了不错的交互式动画，但有时对于截屏视频或视频而言，它们的精度还不够高。 脚本动画的优势在于，它们可以以定义的方式对移动和旋转进行动画处理。 例如，您可以将零件前后精确旋转10°。 以下示例使用了应旋转零件的装配体。 如果您尝试使用拖动模式对此进行动画处理，则将看到获得来回旋转的难度有多大，例如 在演示中向老板展示。 但是，使用交互式示例脚本，这是一个简单的任务。
</p><p>脚本动画通常以这种方式工作：
</p>
<ol><li>部件完全约束</li>
<li>脚本更改参数，例如零件的位置或旋转角度</li>
<li>更改参数后，解决了部件约束</li>
<li>重复步骤2.和3.以获取动画</li></ol>
<p>代替放置参数也可以改变约束，例如两个平面之间的距离。
</p>
<h4><span id=".E7.AE.80.E5.8D.95.E8.84.9A.E6.9C.AC.E7.A4.BA.E4.BE.8B"></span><span class="mw-headline" id="简单脚本示例">简单脚本示例</span></h4>
<p>编写动画脚本的最简单方法是遵循定义的动作的非交互式动画。 这是一个例子：
首先下载此程序集文件：<a class="external text" href="https://forum.freecadweb.org/download/file.php?id=97554" rel="nofollow">A2p_animated-example.FCStd</a>以及此Python脚本：<a class="external text" href="https://forum.freecadweb.org/download" rel="nofollow">/file.php?id=97981 A2p_animation-example-script.py</a>。
</p>
<div class="mw-collapsible mw-collapsed toccolours">
<p>这是脚本的内容，以“＃”开头的行描述了不同脚本行的作用：
</p>
<div class="mw-collapsible-content">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># import libraries</span>
<span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">PySide</span>
<span class="kn">import</span> <span class="nn">A2plus.a2p_solversystem</span> <span class="k">as</span> <span class="nn">a2p_solver</span>

<span class="c1"># 我们使用1度的步幅</span>
<span class="n">step</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># 每步之间等待1毫秒</span>
<span class="n">timeout</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="c1"># 初始角度为0度</span>
<span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># 我们获取当前打开的文档</span>
<span class="n">document</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">activeDocument</span><span class="p">()</span>
<span class="c1"># 我们获取当前打开的文档</span>
<span class="n">starWheel</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="s2">"star_wheel_001"</span><span class="p">)</span>
<span class="c1"># 我们获取当前打开的文档</span>
<span class="n">progressDialog</span> <span class="o">=</span> <span class="n">PySide</span><span class="o">.</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QProgressDialog</span><span class="p">(</span><span class="sa">u</span><span class="s2">"Animation progress"</span><span class="p">,</span> <span class="sa">u</span><span class="s2">"Stop"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>

<span class="c1"># while程序块是更改角度和求解的主循环</span>
<span class="c1"># 随后的装配体约束</span>
<span class="k">while</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">:</span> <span class="c1"># run this loop until we have one full turn (360 degrees)</span>
    <span class="c1"># 增加旋转角度</span>
    <span class="n">angle</span> <span class="o">+=</span> <span class="n">step</span>
    <span class="c1"># 设置进度对话框的新角度</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
    <span class="c1"># 更改零件“ star_wheel_001”的旋转角度</span>
    <span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">Angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
    <span class="c1"># 解决约束</span>
    <span class="n">a2p_solver</span><span class="o">.</span><span class="n">solveConstraints</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">useTransaction</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># 解决后更新视图（“ Gui”代表“图形用户界面”）</span>
    <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateGui</span><span class="p">()</span>
    <span class="c1"># 将进度对话框置于最前面</span>
    <span class="n">PySide</span><span class="o">.</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="n">raise_</span><span class="p">(</span><span class="n">progressDialog</span><span class="p">)</span>
    <span class="c1">#等待一段时间再执行下一步</span>
    <span class="k">if</span> <span class="n">progressDialog</span><span class="o">.</span><span class="n">wasCanceled</span><span class="p">():</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mi">360</span>
    <span class="c1"># wait some time before performing the next step</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>要使用脚本执行动画，我们必须
</p>
<ol><li>在FreeCAD中打开程序集文件。</li>
<li>在FreeCAD中打开脚本文件。</li>
<li>单击工具栏按钮<span typeof="mw:File"><a class="mw-file-description" href="../File/Menu_Std_DlgMacroExecute_fr_02.png"><img decoding="async" height="24" src="../File/Menu_Std_DlgMacroExecute_fr_02.png" srcset="/images/thumb/0/02/Menu_Std_DlgMacroExecute_fr_02.png/36px-Menu_Std_DlgMacroExecute_fr_02.png 1.5x, /images/thumb/0/02/Menu_Std_DlgMacroExecute_fr_02.png/48px-Menu_Std_DlgMacroExecute_fr_02.png 2x" width="24"/></a></span>执行脚本（也称为宏）。</li>
<li>转到装配件的选项卡以查看旋转。</li></ol>
<p>如果要练习，只需更改脚本中的某些内容，然后再执行即可。 例如，将“ step”增加到“ 5”。
</p><p>这是示例动画的结果：
</p><p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_animated-example-result.gif"><img decoding="async" height="591" src="../File/A2p_animated-example-result.gif" width="451"/></a></span>
</p>
<h4><span id=".E4.BA.A4.E4.BA.92.E5.BC.8F.E8.84.9A.E6.9C.AC.E7.A4.BA.E4.BE.8B"></span><span class="mw-headline" id="交互式脚本示例">交互式脚本示例</span></h4>
<p>第一个脚本示例演示了如何在没有任何用户反馈的情况下创建动画。 对于大多数应用程序，您需要与动画进行交互。 例如，示例中有趣的问题是查看驱动销如何与车轮的中心凹槽交叉。 要仔细看，您可以将此细节提供给您的同事或老板。 因此，您需要一个交互式解决方案。
</p><p>这可以通过使用带有滑块的自定义动画对话框来完成。 通过移动滑块，您可以设置旋转角度，从而在有趣的位置来回旋转。
</p><p>我们使用相同的装配体文件：<a class="external text" href="https://forum.freecadweb.org/download/file.php?id=97554" rel="nofollow">A2p_animated-example.FCStd</a>和此Python脚本：<a class="external text" href="https://forum.freecadweb.org/download" rel="nofollow">/file.php?id=97982 A2p_animation-example-script.py</a>。
</p>
<div class="mw-collapsible mw-collapsed toccolours">
<p>这是获取交互式动画对话框的脚本内容：
</p>
<div class="mw-collapsible-content">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># import libraries</span>
<span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">PySide</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">FreeCAD.A2plus.a2p_solversystem</span> <span class="k">as</span> <span class="nn">a2p_solver</span>
<span class="kn">from</span> <span class="nn">FreeCAD</span> <span class="kn">import</span> <span class="n">Units</span>
<span class="kn">from</span> <span class="nn">PySide</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>

<span class="err">＃</span><span class="n">每次计算后等待1毫秒</span>
<span class="n">timeout</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="err">＃</span><span class="n">我们获取当前打开的文档</span>
<span class="n">document</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">activeDocument</span><span class="p">()</span>
<span class="err">＃</span><span class="n">我们稍后要更改零件</span><span class="err">“</span> <span class="n">star_wheel_001</span><span class="err">”</span><span class="n">的旋转角度</span>
<span class="n">starWheel</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="s2">"star_wheel_001"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AnimationDlg</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span> <span class="c1"># 动画对话框</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># to initialize the dialog</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AnimationDlg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># 对话框组件的定义</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minimumSizeHint</span><span class="p">())</span> <span class="c1"># 将最小对话框大小设置为最小</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">'Animation Dialog'</span><span class="p">)</span>
        <span class="c1"># 对整个表单使用网格布局</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># first dialog grid line</span>
        <span class="c1"># 添加描述标签</span>
        <span class="n">DescriptionLabel</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">DescriptionLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Change slider to change rotation angle"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">DescriptionLabel</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
         <span class="c1"># 下一个对话框网格线</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># 添加标签；不需要“自我”前缀，因为我们不想以后更改标签</span>
        <span class="n">LabelMin</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">LabelMin</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Min"</span><span class="p">)</span>
        <span class="n">LabelMin</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">LabelMin</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># 添加旋转编辑以定义滑块最小值</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># 获取角度单位为字符串</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setSuffix</span><span class="p">(</span><span class="s2">" "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Units</span><span class="o">.</span><span class="n">Quantity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Units</span><span class="o">.</span><span class="n">Angle</span><span class="p">))[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">"Minimal angle for the slider"</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">"valueChanged(int)"</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">setMinEdit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># 添加滑块</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSlider</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">"Move the slider to change the rotation angle"</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">"sliderMoved(int)"</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleSliderValue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1"># 添加标签</span>
        <span class="n">LabelMax</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">LabelMax</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Max"</span><span class="p">)</span>
        <span class="n">LabelMax</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">LabelMax</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="c1"># 添加旋转编辑以定义滑块最大值</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># 获取角度单位为字符串</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setSuffix</span><span class="p">(</span><span class="s2">" "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Units</span><span class="o">.</span><span class="n">Quantity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Units</span><span class="o">.</span><span class="n">Angle</span><span class="p">))[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">360</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">"Maximal angle for the slider"</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">"valueChanged(int)"</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">setMaxEdit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
         <span class="c1"># 下一个对话框网格线</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># 添加一个间隔</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># 添加标签</span>
        <span class="n">LabelCurrent</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">LabelCurrent</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Current angle:"</span><span class="p">)</span>
        <span class="n">LabelCurrent</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">LabelCurrent</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># 输出当前角度</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">"Current rotation angle"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">isReadOnly</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1"># 添加单位标签</span>
        <span class="n">LabelUnit</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">LabelUnit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"deg"</span><span class="p">)</span>
        <span class="n">LabelUnit</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">LabelUnit</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="c1"># 关闭对话框按钮</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Close</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Close"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">"Closes the dialog"</span><span class="p">)</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">"clicked()"</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">CloseClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">lineNo</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="c1"># 将定义的网格布局放置到对话框中g</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">handleSliderValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 将滑块值设置为角度</span>
        <span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">Angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
        <span class="c1"># 输出当前角度</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
        <span class="c1"># 解析约束 </span>
        <span class="n">a2p_solver</span><span class="o">.</span><span class="n">solveConstraints</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
        <span class="c1"># 解决后更新视图（“ Gui”代表“图形用户界面”）</span>
        <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateGui</span><span class="p">()</span>
        <span class="c1"># 等待一些时间，重要的是要花时间进行计算</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setMinEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 确保最小值比最大值大</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&gt;=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">setMaxEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 确保最小值比最大值大</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&gt;=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MinEdit</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MaxEdit</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">CloseClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">AnimationDialog</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># 创建并显示定义的对话框</span>
<span class="n">AnimationDialog</span> <span class="o">=</span> <span class="n">AnimationDlg</span><span class="p">()</span>
<span class="n">AnimationDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># 在对话框可见时运行此循环</span>
<span class="k">while</span> <span class="n">AnimationDialog</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
    <span class="c1"># 更新视图， 给OS反馈对话框处于激活状态是很重要的</span>
    <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateGui</span><span class="p">()</span>
    <span class="c1"># 将对话框置于最前面，以便对话框始终可见</span>
    <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="n">raise_</span><span class="p">(</span><span class="n">AnimationDialog</span><span class="p">)</span>
    <span class="c1">#在这里也输出滑块值，因为在计算过程中滑块可能已经移动了</span>
    <span class="n">AnimationDialog</span><span class="o">.</span><span class="n">CurrentAngle</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">AnimationDialog</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="mw-translate-fuzzy">
<p>脚本中定义的对话框如下所示:<br/><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AnimationDialog.png"><img decoding="async" height="149" src="../File/A2p_AnimationDialog.png" width="376"/></a></span>
</p>
</div>
<p><span class="mw-default-size" typeof="mw:File"><a class="mw-file-description" href="../File/A2p_AnimationDialog.png"><img decoding="async" height="149" src="../File/A2p_AnimationDialog.png" width="376"/></a></span>
</p>
<h3><span id=".E8.84.9A.E6.9C.AC.E5.91.BD.E4.BB.A4"></span><span class="mw-headline" id="脚本命令">脚本命令</span></h3>
<p>为了更好地理解脚本语法，这是一些命令信息：
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">Angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
</pre></div>
<p>Here we change the placement property <code>Rotation.Angle</code> of the part get got previously as <code>starWheel</code>. This property gets the angle as <a class="external text" href="https://en.wikipedia.org/wiki/Radian" rel="nofollow">radian</a>. The function <code>radians()</code> from the library <code>math</code> converts the angle from degree to radian.
</p>
<div class="mw-translate-fuzzy">
属性“ Rotation.Angle”使用零件的当前放置轴（在我们的示例中为x轴）。 旋转零件 您可以使用命令<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">Axis</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>围绕z轴设置旋转轴（在调用旋转命令之前）
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Rotation</span><span class="o">.</span><span class="n">Axis</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
除了旋转，零件也可以移动。 例如，要更改车轮在y方向上的放置，命令将为 <div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">PositionShift</span>
</pre></div> 在这种情况下，我们将不定义变量“ angle”，而是 我们在每次循环运行时都会更改“ PositionShift”。<br/>有不同的方法来设置零件的位置。 一些是<a href="Placement.html" title="Placement">在此处记录</a>。 不幸的是，没有列出所有可能的放置命令。
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">starWheel</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">PositionShift</span>
</pre></div>
<p>In this case we would not define the variable <code>angle</code> but <code>PositionShift</code> that we change on every loop run.
</p><p>There are different ways to set the placement of a part. Some are <a href="Placement.html" title="Placement"> documented here</a>. Unfortunately there is no list (yet) with all possible placement commands.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">a2p_solver</span><span class="o">.</span><span class="n">solveConstraints</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">useTransaction</span><span class="o">=</span><span class="kc">False</span><span class="o">/</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
<p>This is an A2plus-specific command. It solves the assembly constraints of the assembly we previously got as <code>document</code>. The option <code>useTransaction</code> specifies if FreeCAD should store every change in the undo/redo stack. For large animations you might therefore set it to <code>false</code>.
</p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
<div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a class="mw-file-description" href="../File/User_hub.png"><img decoding="async" height="24" src="../File/User_hub.png" srcset="/images/thumb/9/94/User_hub.png/36px-User_hub.png 1.5x, /images/thumb/9/94/User_hub.png/48px-User_hub.png 2x" width="24"/></a></span> <a class="new" href="index.php?title=User_hub_zh-hans&amp;action=edit&amp;redlink=1.html" title="User hub/zh-hans (page does not exist)">User documentation</a>
<div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b><a class="new" href="index.php?title=Getting_started_zh-hans&amp;action=edit&amp;redlink=1.html" title="Getting started/zh-hans (page does not exist)">Getting started</a></b></li>
<li><b>Installation:</b> <a class="new" href="index.php?title=Download_zh-hans&amp;action=edit&amp;redlink=1.html" title="Download/zh-hans (page does not exist)">Download</a>, <a class="new" href="index.php?title=Installing_on_Windows_zh-hans&amp;action=edit&amp;redlink=1.html" title="Installing on Windows/zh-hans (page does not exist)">Windows</a>, <a class="new" href="index.php?title=Installing_on_Linux_zh-hans&amp;action=edit&amp;redlink=1.html" title="Installing on Linux/zh-hans (page does not exist)">Linux</a>, <a class="new" href="index.php?title=Installing_on_Mac_zh-hans&amp;action=edit&amp;redlink=1.html" title="Installing on Mac/zh-hans (page does not exist)">Mac</a>, <a class="new" href="index.php?title=Installing_additional_components_zh-hans&amp;action=edit&amp;redlink=1.html" title="Installing additional components/zh-hans (page does not exist)">Additional components</a>, <a class="new" href="index.php?title=Compile_on_Docker_zh-hans&amp;action=edit&amp;redlink=1.html" title="Compile on Docker/zh-hans (page does not exist)">Docker</a>, <a class="new" href="index.php?title=AppImage_zh-hans&amp;action=edit&amp;redlink=1.html" title="AppImage/zh-hans (page does not exist)">AppImage</a>, <a class="new" href="index.php?title=Ubuntu_Snap_zh-hans&amp;action=edit&amp;redlink=1.html" title="Ubuntu Snap/zh-hans (page does not exist)">Ubuntu Snap</a></li>
<li><b>Basics:</b> <a class="new" href="index.php?title=About_FreeCAD_zh-hans&amp;action=edit&amp;redlink=1.html" title="About FreeCAD/zh-hans (page does not exist)">About FreeCAD</a>, <a class="new" href="index.php?title=Interface_zh-hans&amp;action=edit&amp;redlink=1.html" title="Interface/zh-hans (page does not exist)">Interface</a>, <a class="new" href="index.php?title=Mouse_navigation_zh-hans&amp;action=edit&amp;redlink=1.html" title="Mouse navigation/zh-hans (page does not exist)">Mouse navigation</a>, <a class="new" href="index.php?title=Selection_methods_zh-hans&amp;action=edit&amp;redlink=1.html" title="Selection methods/zh-hans (page does not exist)">Selection methods</a>, <a class="new" href="index.php?title=Object_name_zh-hans&amp;action=edit&amp;redlink=1.html" title="Object name/zh-hans (page does not exist)">Object name</a>, <a class="new" href="index.php?title=Preferences_Editor_zh-hans&amp;action=edit&amp;redlink=1.html" title="Preferences Editor/zh-hans (page does not exist)">Preferences</a>, <a class="new" href="index.php?title=Workbenches_zh-hans&amp;action=edit&amp;redlink=1.html" title="Workbenches/zh-hans (page does not exist)">Workbenches</a>, <a class="new" href="index.php?title=Document_structure_zh-hans&amp;action=edit&amp;redlink=1.html" title="Document structure/zh-hans (page does not exist)">Document structure</a>, <a class="new" href="index.php?title=Property_zh-hans&amp;action=edit&amp;redlink=1.html" title="Property/zh-hans (page does not exist)">Properties</a>, <a class="new" href="index.php?title=Help_FreeCAD_zh-hans&amp;action=edit&amp;redlink=1.html" title="Help FreeCAD/zh-hans (page does not exist)">Help FreeCAD</a>, <a class="new" href="index.php?title=Donate_zh-hans&amp;action=edit&amp;redlink=1.html" title="Donate/zh-hans (page does not exist)">Donate</a></li></ul>
<hr/>
<ul><li><b>Help:</b> <a class="new" href="index.php?title=Tutorials_zh-hans&amp;action=edit&amp;redlink=1.html" title="Tutorials/zh-hans (page does not exist)">Tutorials</a>, <a class="new" href="index.php?title=Video_tutorials_zh-hans&amp;action=edit&amp;redlink=1.html" title="Video tutorials/zh-hans (page does not exist)">Video tutorials</a></li>
<li><b><a class="new" href="index.php?title=Workbenches_zh-hans&amp;action=edit&amp;redlink=1.html" title="Workbenches/zh-hans (page does not exist)">Workbenches</a>:</b> <a href="Std_Base_zh-hans.html" title="Std Base/zh-hans">Std Base</a>, <a class="new" href="index.php?title=Assembly_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Assembly Workbench/zh-hans (page does not exist)">Assembly</a>, <a class="new" href="index.php?title=BIM_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="BIM Workbench/zh-hans (page does not exist)">BIM</a>, <a class="new" href="index.php?title=CAM_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="CAM Workbench/zh-hans (page does not exist)">CAM</a>, <a class="new" href="index.php?title=Draft_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Draft Workbench/zh-hans (page does not exist)">Draft</a>, <a class="new" href="index.php?title=FEM_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="FEM Workbench/zh-hans (page does not exist)">FEM</a>, <a class="new" href="index.php?title=Inspection_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Inspection Workbench/zh-hans (page does not exist)">Inspection</a>, <a class="new" href="index.php?title=Material_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Material Workbench/zh-hans (page does not exist)">Material</a>, <a class="new" href="index.php?title=Mesh_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Mesh Workbench/zh-hans (page does not exist)">Mesh</a>, <a class="new" href="index.php?title=OpenSCAD_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="OpenSCAD Workbench/zh-hans (page does not exist)">OpenSCAD</a>, <a class="new" href="index.php?title=Part_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Part Workbench/zh-hans (page does not exist)">Part</a>, <a class="new" href="index.php?title=PartDesign_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="PartDesign Workbench/zh-hans (page does not exist)">PartDesign</a>, <a class="new" href="index.php?title=Points_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Points Workbench/zh-hans (page does not exist)">Points</a>, <a class="new" href="index.php?title=Reverse_Engineering_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Reverse Engineering Workbench/zh-hans (page does not exist)">Reverse Engineering</a>, <a class="new" href="index.php?title=Robot_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Robot Workbench/zh-hans (page does not exist)">Robot</a>, <a class="new" href="index.php?title=Sketcher_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Sketcher Workbench/zh-hans (page does not exist)">Sketcher</a>, <a class="new" href="index.php?title=Spreadsheet_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Spreadsheet Workbench/zh-hans (page does not exist)">Spreadsheet</a>, <a class="new" href="index.php?title=Surface_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="Surface Workbench/zh-hans (page does not exist)">Surface</a>, <a class="new" href="index.php?title=TechDraw_Workbench_zh-hans&amp;action=edit&amp;redlink=1.html" title="TechDraw Workbench/zh-hans (page does not exist)">TechDraw</a>, <a class="new" href="index.php?title=Testing_zh-hans&amp;action=edit&amp;redlink=1.html" title="Testing/zh-hans (page does not exist)">Test Framework</a></li></ul>
<hr/>
<ul><li><b><a class="new" href="index.php?title=Addon_zh-hans&amp;action=edit&amp;redlink=1.html" title="Addon/zh-hans (page does not exist)">Addons</a>:</b> <a class="new" href="index.php?title=Std_AddonMgr_zh-hans&amp;action=edit&amp;redlink=1.html" title="Std AddonMgr/zh-hans (page does not exist)">Addon Manager</a>, <a class="new" href="index.php?title=External_workbenches_zh-hans&amp;action=edit&amp;redlink=1.html" title="External workbenches/zh-hans (page does not exist)">External workbenches</a>, <a class="new" href="index.php?title=Scripting_and_macros_zh-hans&amp;action=edit&amp;redlink=1.html" title="Scripting and macros/zh-hans (page does not exist)">Scripting and macros</a></li></ul>
<hr/>
<ul><li><b>Hubs:</b> <a class="new" href="index.php?title=User_hub_zh-hans&amp;action=edit&amp;redlink=1.html" title="User hub/zh-hans (page does not exist)">User hub</a>, <a class="new" href="index.php?title=Power_users_hub_zh-hans&amp;action=edit&amp;redlink=1.html" title="Power users hub/zh-hans (page does not exist)">Power users hub</a>, <a class="new" href="index.php?title=Developer_hub_zh-hans&amp;action=edit&amp;redlink=1.html" title="Developer hub/zh-hans (page does not exist)">Developer hub</a></li></ul></div>
</div></div>
<!-- 
NewPP limit report
Cached time: 20241129212003
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.281 seconds
Real time usage: 1.318 seconds
Preprocessor visited node count: 1790/1000000
Post‐expand include size: 15395/2097152 bytes
Template argument size: 11694/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 8/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 39545/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 1020.784      1 -total
 97.03%  990.462      8 Template:Code
  0.94%    9.591     17 Template:PropertyData
  0.79%    8.050     37 Template:Variable
  0.37%    3.785      1 Template:TOCright
  0.31%    3.117      1 Template:Userdocnavi/zh-hans
  0.19%    1.980      9 Template:MenuCommand
  0.16%    1.629      1 Template:FileName
  0.15%    1.520      1 Template:Navigation_menu_2
  0.15%    1.518      6 Template:KEY
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:174931-0!canonical and timestamp 20241129212002 and revision id 1149035. Rendering was triggered because: api-parse
 -->
</div></div><script src="../script.js"></script>
